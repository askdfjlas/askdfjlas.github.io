(this["webpackJsonpaskdfjlas.github.io"]=this["webpackJsonpaskdfjlas.github.io"]||[]).push([[4],{191:function(e,t,n){"use strict";n.r(t),n.d(t,"amplify_chatbot",(function(){return w}));var o,i,r,a=n(9),s=n(29),c=n(21),u=n(5),l=n(4),d=n(14),p=n(215),f=function(e,t,n,o){return new(n||(n=Promise))((function(i,r){function a(e){try{c(o.next(e))}catch(t){r(t)}}function s(e){try{c(o.throw(e))}catch(t){r(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((o=o.apply(e,t||[])).next())}))},m=function(e,t){var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(s){r=[6,s],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}},h=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var o=Array(e),i=0;for(t=0;t<n;t++)for(var r=arguments[t],a=0,s=r.length;a<s;a++,i++)o[i]=r[a];return o},v=function(e,t,n){for(var o=0;o<n.length;o++)e.setUint8(t+o,n.charCodeAt(o))},b=function(e,t){var n=2*e.length,o=8+n,i=new ArrayBuffer(36+o),r=new DataView(i);return v(r,0,"RIFF"),r.setUint32(4,24+o,!0),v(r,8,"WAVE"),v(r,12,"fmt "),r.setUint32(16,16,!0),r.setUint16(20,1,!0),r.setUint16(22,1,!0),r.setUint32(24,t,!0),r.setUint32(28,2*t,!0),r.setUint16(32,2,!0),r.setUint16(34,16,!0),v(r,36,"data"),r.setUint32(40,n,!0),function(e,t,n){for(var o=t,i=0;i<n.length;i++,o+=2){var r=Math.max(-1,Math.min(1,n[i]));e.setInt16(o,r<0?32768*r:32767*r,!0)}}(r,44,e),r},g=function(e,t,n,o){var i=function(e,t,n){if(n===t)return e;for(var o=t/n,i=Math.round(e.length/o),r=new Float32Array(i),a=0,s=0;a<r.length;){for(var c=Math.round((a+1)*o),u=0,l=0,d=s;d<c&&d<e.length;d++)u+=e[d],l++;r[a]=u/l,a++,s=c}return r}(function(e,t){for(var n=new Float32Array(t),o=0,i=0;i<e.length;i++)n.set(e[i],o),o+=e[i].length;return n}(e,t),n,o),r=b(i,o);return new Blob([r],{type:"application/octet-stream"})},y=new s.a("AudioRecorder"),x=function(){function e(e){this.streamBuffer=[],this.streamBufferLength=0,this.recording=!1,this.options=e}return e.prototype.init=function(){return f(this,void 0,void 0,(function(){var e=this;return m(this,(function(t){switch(t.label){case 0:return Object(c.b)().isBrowser?(window.AudioContext=window.AudioContext||window.webkitAudioContext,this.audioContext=new AudioContext,[4,navigator.mediaDevices.getUserMedia({audio:!0}).then((function(t){e.audioSupported=!0,e.setupAudioNodes(t)})).catch((function(){return e.audioSupported=!1,Promise.reject("Audio is not supported")}))]):[3,2];case 1:return t.sent(),[3,3];case 2:return this.audioSupported=!1,[2,Promise.reject("Audio is not supported")];case 3:return[2]}}))}))},e.prototype.setupAudioNodes=function(e){return f(this,void 0,void 0,(function(){var t,n,o,i,r=this;return m(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,this.audioContext.resume()];case 1:return a.sent(),[3,3];case 2:return t=a.sent(),y.error(t),[3,3];case 3:return n=this.audioContext.createMediaStreamSource(e),(o=this.audioContext.createScriptProcessor(4096,1,1)).onaudioprocess=function(e){if(r.recording){var t=e.inputBuffer.getChannelData(0);r.streamBuffer.push(new Float32Array(t)),r.streamBufferLength+=t.length,r.analyse()}},(i=this.audioContext.createAnalyser()).minDecibels=-90,i.maxDecibels=-10,i.smoothingTimeConstant=.85,n.connect(i),i.connect(o),o.connect(n.context.destination),this.analyserNode=i,[2]}}))}))},e.prototype.startRecording=function(e,t){return f(this,void 0,void 0,(function(){var n,o;return m(this,(function(i){switch(i.label){case 0:if(this.recording||!this.audioSupported)return[2];this.onSilence=e||function(){},this.visualizer=t||function(){},n=this.audioContext,i.label=1;case 1:return i.trys.push([1,3,,4]),[4,n.resume()];case 2:return i.sent(),[3,4];case 3:return o=i.sent(),y.error(o),[3,4];case 4:return this.start=Date.now(),this.recording=!0,[2]}}))}))},e.prototype.stopRecording=function(){this.audioSupported&&(this.recording=!1)},e.prototype.clear=function(){this.stopRecording(),this.streamBufferLength=0,this.streamBuffer=[]},e.prototype.play=function(e){var t=this;if(e&&this.audioSupported){var n=new Blob([e]);return new Promise((function(e,o){var i=new FileReader;i.onload=function(){t.playbackSource&&t.playbackSource.disconnect(),t.playbackSource=t.audioContext.createBufferSource();t.audioContext.decodeAudioData(i.result,(function(n){t.playbackSource.buffer=n,t.playbackSource.connect(t.audioContext.destination),t.playbackSource.onended=function(){return e()},t.playbackSource.start(0)}),(function(e){return o(e)}))},i.onerror=function(){return o()},i.readAsArrayBuffer(n)}))}},e.prototype.stop=function(){this.playbackSource&&this.playbackSource.stop()},e.prototype.analyse=function(){if(this.audioSupported){var e=this.analyserNode;e.fftSize=2048;var t=e.fftSize,n=new Uint8Array(t),o=this.options.amplitude,i=this.options.time;e.getByteTimeDomainData(n),this.visualizer(n,t);for(var r=0;r<t;r++){var a=n[r]/128-1;(a>o||a<-1*o)&&(this.start=Date.now())}Date.now()-this.start>i&&this.onSilence()}},e.prototype.exportWAV=function(e){return void 0===e&&(e=16e3),f(this,void 0,void 0,(function(){var t,n;return m(this,(function(o){return this.audioSupported?(t=this.audioContext.sampleRate,n=g(this.streamBuffer,this.streamBufferLength,t,e),this.clear(),[2,n]):[2]}))}))},e}();!function(e){e[e.Initial=0]="Initial",e[e.Listening=1]="Listening",e[e.SendingText=2]="SendingText",e[e.SendingVoice=3]="SendingVoice",e[e.Error=4]="Error"}(o||(o={})),function(e){e.Bot="bot",e.User="user"}(i||(i={})),function(e){e[e.Recoverable=0]="Recoverable",e[e.Unrecoverable=1]="Unrecoverable"}(r||(r={}));var w=function(){function e(e){var t=this;Object(a.k)(this,e),this.clearOnComplete=!1,this.conversationModeOn=!1,this.botTitle=l.a.CHATBOT_TITLE,this.voiceEnabled=!1,this.textEnabled=!0,this.silenceTime=1500,this.silenceThreshold=.2,this.messages=[],this.text="",this.chatState=o.Initial,this.messageJSX=function(e){var n=e.map((function(e){return Object(a.i)("div",{class:"bubble "+e.from},e.content)}));if(t.chatState===o.SendingText||t.chatState===o.SendingVoice){var r=t.chatState===o.SendingText?i.Bot:i.User;n.push(Object(a.i)("div",{class:"bubble "+r},Object(a.i)("div",{class:"dot-flashing "+r},Object(a.i)("span",{class:"dot left"}),Object(a.i)("span",{class:"dot middle"}),Object(a.i)("span",{class:"dot right"}))))}return n},this.chatCompleted=Object(a.f)(this,"chatCompleted",7)}return e.prototype.submitHandler=function(e){this.sendTextMessage()},e.prototype.componentWillLoad=function(){if(!p.a||"function"!==typeof p.a.onComplete)throw new Error(d.m);this.validateProps()},e.prototype.componentDidRender=function(){var e=this.element.shadowRoot.querySelector(".body");e.scrollTop=e.scrollHeight},e.prototype.validateProps=function(){var e=this;if(this.voiceEnabled||this.textEnabled)if(this.botName){this.welcomeMessage&&this.appendToChat(this.welcomeMessage,i.Bot),this.voiceEnabled&&(this.audioRecorder=new x({time:this.silenceTime,amplitude:this.silenceThreshold}),this.audioRecorder.init().catch((function(t){e.setError(t,r.Recoverable)})));try{p.a.onComplete(this.botName,(function(t,n){e.chatCompleted.emit({data:n,err:t}),e.clearOnComplete?e.reset():e.chatState=o.Initial}))}catch(t){this.setError(t,r.Unrecoverable)}}else this.setError(l.a.NO_BOT_NAME_ERROR,r.Unrecoverable);else this.setError(l.a.CHAT_DISABLED_ERROR,r.Unrecoverable)},e.prototype.handleMicButton=function(){var e=this;this.chatState===o.Initial&&(this.audioRecorder.stop(),this.chatState=o.Listening,this.audioRecorder.startRecording((function(){return e.handleSilence()}),(function(t,n){return e.visualizer(t,n)})))},e.prototype.handleSilence=function(){var e=this;this.chatState=o.SendingVoice,this.audioRecorder.stopRecording(),this.audioRecorder.exportWAV().then((function(t){e.sendVoiceMessage(t)}))},e.prototype.handleTextChange=function(e){var t=e.target;this.text=t.value},e.prototype.handleCancelButton=function(){this.audioRecorder.clear(),this.chatState=o.Initial},e.prototype.handleToastClose=function(e){this.error=void 0,e===r.Recoverable&&(this.chatState=o.Initial)},e.prototype.visualizer=function(e,t){!function(e,t,n){if(n){if(!Object(c.b)().isBrowser)throw new Error("Visualization is not supported on non-browsers.");var o=n.getBoundingClientRect(),i=o.width,r=o.height;n.width=i,n.height=r;var a=n.getContext("2d");a.fillStyle="white",a.clearRect(0,0,i,r);requestAnimationFrame((function(){a.fillRect(0,0,i,r),a.lineWidth=1;var o=getComputedStyle(document.documentElement).getPropertyValue("--amplify-primary-color");a.strokeStyle=o&&""!==o?o:"#ff9900",a.beginPath();for(var s=1*i/t,c=0,u=0;u<t||u%3===0;u++){var l=e[u]/128*r/2;0===u?a.moveTo(c,l):a.lineTo(c,l),c+=s}a.lineTo(n.width,n.height/2),a.stroke()}))}}(e,t,this.element.shadowRoot.querySelector("canvas"))},e.prototype.sendTextMessage=function(){return f(this,void 0,void 0,(function(){var e,t,n;return m(this,(function(a){switch(a.label){case 0:if(0===this.text.length||this.chatState!==o.Initial)return[2];e=this.text,this.text="",this.appendToChat(e,i.User),this.chatState=o.SendingText,a.label=1;case 1:return a.trys.push([1,3,,4]),[4,p.a.send(this.botName,e)];case 2:return t=a.sent(),[3,4];case 3:return n=a.sent(),this.setError(n,r.Recoverable),[2];case 4:return t.message&&this.appendToChat(t.message,i.Bot),this.chatState=o.Initial,[2]}}))}))},e.prototype.sendVoiceMessage=function(e){return f(this,void 0,void 0,(function(){var t,n,a,s,c=this;return m(this,(function(u){switch(u.label){case 0:t={content:e,options:{messageType:"voice"}},u.label=1;case 1:return u.trys.push([1,3,,4]),[4,p.a.send(this.botName,t)];case 2:return n=u.sent(),[3,4];case 3:return a=u.sent(),this.setError(a,r.Recoverable),[2];case 4:return this.chatState=o.Initial,s=n.dialogState,n.inputTranscript&&this.appendToChat(n.inputTranscript,i.User),this.appendToChat(n.message,i.Bot),[4,this.audioRecorder.play(n.audioStream).then((function(){c.conversationModeOn&&"Fulfilled"!==s&&"Failed"!==s&&c.chatState===o.Initial&&c.handleMicButton()})).catch((function(e){return c.setError(e,r.Recoverable)}))];case 5:return u.sent(),[2]}}))}))},e.prototype.appendToChat=function(e,t){this.messages=h(this.messages,[{content:e,from:t}])},e.prototype.setError=function(e,t){var n="string"===typeof e?e:e.message;this.chatState=o.Error,this.error={message:n,errorType:t}},e.prototype.reset=function(){this.chatState=o.Initial,this.text="",this.error=void 0,this.messages=[],this.welcomeMessage&&this.appendToChat(this.welcomeMessage,i.Bot),this.audioRecorder&&this.audioRecorder.clear()},e.prototype.listeningFooterJSX=function(){var e=this;return[Object(a.i)("canvas",{height:"50"}),Object(a.i)("amplify-button",{"data-test":"chatbot-cancel-button",handleButtonClick:function(){return e.handleCancelButton()},class:"icon-button",variant:"icon",icon:"ban"})]},e.prototype.footerJSX=function(){var e=this;if(this.chatState===o.Listening)return this.listeningFooterJSX();var t=this.textEnabled?l.a.TEXT_INPUT_PLACEHOLDER:l.a.VOICE_INPUT_PLACEHOLDER;return[Object(a.i)("amplify-input",{placeholder:u.a.get(t),description:"text",handleInputChange:function(t){return e.handleTextChange(t)},value:this.text,disabled:this.chatState===o.Error||!this.textEnabled}),this.voiceEnabled&&Object(a.i)("amplify-button",{"data-test":"chatbot-mic-button",handleButtonClick:function(){return e.handleMicButton()},class:"icon-button",variant:"icon",icon:"microphone",disabled:this.chatState===o.Error||this.chatState!==o.Initial}),this.textEnabled&&Object(a.i)("amplify-button",{"data-test":"chatbot-send-button",class:"icon-button",variant:"icon",icon:"send",handleButtonClick:function(){return e.sendTextMessage()},disabled:this.chatState===o.Error||this.chatState!==o.Initial})]},e.prototype.errorToast=function(){var e=this;if(this.error){var t=this.error,n=t.message,o=t.errorType;return Object(a.i)("amplify-toast",{message:u.a.get(n),handleClose:function(){return e.handleToastClose(o)}})}},e.prototype.render=function(){return Object(a.i)(a.b,null,Object(a.i)("div",{class:"amplify-chatbot"},Object(a.i)("slot",{name:"header"},Object(a.i)("div",{class:"header","data-test":"chatbot-header"},u.a.get(this.botTitle))),Object(a.i)("div",{class:"body","data-test":"chatbot-body"},this.messageJSX(this.messages)),Object(a.i)("div",{class:"footer","data-test":"chatbot-footer"},this.footerJSX()),this.errorToast()))},Object.defineProperty(e.prototype,"element",{get:function(){return Object(a.h)(this)},enumerable:!1,configurable:!0}),e}();w.style=".bot .dot{background-color:var(--bot-dot-color)}.user .dot{background-color:var(--user-dot-color)}.dot-flashing{width:2.625rem}.dot-flashing .dot{display:inline-block;width:0.625rem;height:0.625rem;border-radius:10rem;opacity:0.65}.dot-flashing .left{-webkit-animation:dot-flashing 1s infinite alternate;animation:dot-flashing 1s infinite alternate;-webkit-animation-delay:0s;animation-delay:0s}.dot-flashing .middle{margin-left:0.375rem;margin-right:0.375rem;-webkit-animation:dot-flashing 1s infinite linear alternate;animation:dot-flashing 1s infinite linear alternate;-webkit-animation-delay:0.5s;animation-delay:0.5s}.dot-flashing .right{-webkit-animation:dot-flashing 1s infinite alternate;animation:dot-flashing 1s infinite alternate;-webkit-animation-delay:1s;animation-delay:1s}@-webkit-keyframes dot-flashing{0%{opacity:0.65}50%,100%{opacity:0.1}}@keyframes dot-flashing{0%{opacity:0.65}50%,100%{opacity:0.1}}:host{--width:28.75rem;--height:37.5rem;--header-color:var(--amplify-secondary-color);--header-size:var(--amplify-text-lg);--bot-background-color:rgb(230, 230, 230);--bot-text-color:black;--bot-dot-color:var(--bot-text-color);--user-background-color:var(--amplify-blue);--user-text-color:var(--amplify-white);--user-dot-color:var(--user-text-color)}.amplify-chatbot{display:-ms-inline-flexbox;display:inline-flex;-ms-flex-direction:column;flex-direction:column;background-color:var(--background-color);border-radius:0.375rem;-webkit-box-shadow:0.0625rem 0rem 0.25rem 0 rgba(0, 0, 0, 0.15);box-shadow:0.0625rem 0rem 0.25rem 0 rgba(0, 0, 0, 0.15);-webkit-box-sizing:border-box;box-sizing:border-box;font-family:var(--amplify-font-family);margin-bottom:1rem;width:100%;height:var(--height);max-width:var(--width)}@media (min-width: 672px){.amplify-chatbot{width:var(--width)}}.header{padding:1.25rem 0.375rem 1.25rem 0.375rem;color:var(--header-color);font-size:var(--header-size);font-weight:bold;text-align:center;word-wrap:break-word}.body{border-top:0.0625rem solid rgba(0, 0, 0, 0.05);padding:1.5rem 1rem 0 1rem;display:-ms-flexbox;display:flex;-ms-flex-positive:1;flex-grow:1;-ms-flex-direction:column;flex-direction:column;overflow:auto}.bubble{max-width:100%;padding:0.8em 1.4em;text-align:left;word-wrap:break-word;margin-bottom:0.625rem}.bot{margin-right:auto;background-color:var(--bot-background-color);color:var(--bot-text-color);border-radius:1.5rem 1.5rem 1.5rem 0}.user{margin-left:auto;background-color:var(--user-background-color);color:var(--user-text-color);border-radius:1.5rem 1.5rem 0 1.5rem}.footer{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;border-top:0.062rem solid rgba(0, 0, 0, 0.05);padding-right:0.625rem;min-height:3.125rem}.footer amplify-input{--border:none;--margin:0;-ms-flex-positive:1;flex-grow:1}canvas{margin-left:0.625rem;margin-right:0.625rem;-ms-flex-positive:1;flex-grow:1;height:3.125rem}.icon-button{--icon-height:1.25rem;--icon-fill:var(--amplify-primary-color);--padding:0.625rem;--width:auto}"},215:function(e,t,n){"use strict";n.d(t,"a",(function(){return It}));var o=n(29),i=n(19),r=function(){return(r=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},a=new o.a("AbstractInteractionsProvider"),s=function(){function e(e){void 0===e&&(e={}),this._config=e}return e.prototype.configure=function(e){return void 0===e&&(e={}),this._config=r(r({},this._config),e),a.debug("configure "+this.getProviderName(),this._config),this.options},e.prototype.getCategory=function(){return"Interactions"},Object.defineProperty(e.prototype,"options",{get:function(){return r({},this._config)},enumerable:!0,configurable:!0}),e}(),c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function u(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var l=function(){return(l=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function d(e,t,n,o){return new(n||(n=Promise))((function(i,r){function a(e){try{c(o.next(e))}catch(t){r(t)}}function s(e){try{c(o.throw(e))}catch(t){r(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((o=o.apply(e,t||[])).next())}))}function p(e,t){var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(s){r=[6,s],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}}Object.create;function f(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,i,r=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(o=r.next()).done;)a.push(o.value)}catch(s){i={error:s}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(i)throw i.error}}return a}Object.create;var m,h,v,b,g,y,x,w,S,E,T,O,C,A,j,L,_,I,k,R,N,P,z,F,B,M,U,D,$,q,H,V,G,W,J,X,Y,K,Q,Z,ee,te,ne,oe,ie,re,ae,se,ce,ue,le,de,pe,fe,me,he,ve,be,ge,ye,xe=n(246),we=n(54),Se=n(34),Ee=n(46),Te=n(26),Oe=n(55),Ce=n(32),Ae=n(56),je=n(57),Le=n(24),_e=new Set(["ap-east-1","ap-northeast-1","ap-northeast-2","ap-south-1","ap-southeast-1","ap-southeast-2","ca-central-1","eu-central-1","eu-north-1","eu-west-1","eu-west-2","eu-west-3","me-south-1","sa-east-1","us-east-1","us-east-2","us-west-1","us-west-2"]),Ie=new Set(["cn-north-1","cn-northwest-1"]),ke=new Set(["us-iso-east-1"]),Re=new Set(["us-isob-east-1"]),Ne=new Set(["us-gov-east-1","us-gov-west-1"]),Pe=l(l({},{apiVersion:"2016-11-28",disableHostPrefix:!1,regionInfoProvider:function(e,t){var n=void 0;switch(e){case"eu-west-1":n={hostname:"runtime.lex.eu-west-1.amazonaws.com",partition:"aws",signingService:"lex"};break;case"us-east-1":n={hostname:"runtime.lex.us-east-1.amazonaws.com",partition:"aws",signingService:"lex"};break;case"us-west-2":n={hostname:"runtime.lex.us-west-2.amazonaws.com",partition:"aws",signingService:"lex"};break;default:_e.has(e)&&(n={hostname:"runtime.lex.{region}.amazonaws.com".replace("{region}",e),partition:"aws",signingService:"lex"}),Ie.has(e)&&(n={hostname:"runtime.lex.{region}.amazonaws.com.cn".replace("{region}",e),partition:"aws-cn"}),ke.has(e)&&(n={hostname:"runtime.lex.{region}.c2s.ic.gov".replace("{region}",e),partition:"aws-iso"}),Re.has(e)&&(n={hostname:"runtime.lex.{region}.sc2s.sgov.gov".replace("{region}",e),partition:"aws-iso-b"}),Ne.has(e)&&(n={hostname:"runtime.lex.{region}.amazonaws.com".replace("{region}",e),partition:"aws-us-gov"}),void 0===n&&(n={hostname:"runtime.lex.{region}.amazonaws.com".replace("{region}",e),partition:"aws",signingService:"lex"})}return Promise.resolve(n)},signingName:"lex"}),{runtime:"browser",base64Decoder:Ce.a,base64Encoder:Ce.b,bodyLengthChecker:Ae.a,credentialDefaultProvider:Object(Ee.a)("Credential is missing"),defaultUserAgent:Object(je.a)(xe.a,xe.b),maxAttempts:Te.a,region:Object(Ee.a)("Region is missing"),requestHandler:new Se.a,sha256:we.Sha256,streamCollector:Se.b,urlParser:Oe.a,utf8Decoder:Le.fromUtf8,utf8Encoder:Le.toUtf8}),ze=n(40),Fe=n(53),Be=n(38),Me=n(41),Ue=n(48),De=n(42),$e=n(0),qe=function(e){function t(t){var n=this,o=l(l({},Pe),t),i=Object(ze.b)(o),r=Object(ze.a)(i),a=Object(Ue.b)(r),s=Object(Te.c)(a),c=Object(De.b)(s),u=Object(Be.b)(c),d=Object(Me.b)(u);return(n=e.call(this,d)||this).config=d,n.middlewareStack.use(Object(Ue.a)(n.config)),n.middlewareStack.use(Object(Te.b)(n.config)),n.middlewareStack.use(Object(De.a)(n.config)),n.middlewareStack.use(Object(Fe.a)(n.config)),n.middlewareStack.use(Object(Be.a)(n.config)),n.middlewareStack.use(Object(Me.a)(n.config)),n}return u(t,e),t.prototype.destroy=function(){e.prototype.destroy.call(this)},t}($e.a);(h=m||(m={})).filterSensitiveLog=function(e){return l({},e)},h.isa=function(e){return Object($e.i)(e,"BadGatewayException")},(b=v||(v={})).filterSensitiveLog=function(e){return l({},e)},b.isa=function(e){return Object($e.i)(e,"BadRequestException")},(y=g||(g={})).filterSensitiveLog=function(e){return l({},e)},y.isa=function(e){return Object($e.i)(e,"Button")},function(e){e.CONFIRMED="Confirmed",e.DENIED="Denied",e.NONE="None"}(x||(x={})),(S=w||(w={})).filterSensitiveLog=function(e){return l({},e)},S.isa=function(e){return Object($e.i)(e,"ConflictException")},function(e){e.GENERIC="application/vnd.amazonaws.card.generic"}(E||(E={})),(O=T||(T={})).filterSensitiveLog=function(e){return l({},e)},O.isa=function(e){return Object($e.i)(e,"DeleteSessionRequest")},(A=C||(C={})).filterSensitiveLog=function(e){return l({},e)},A.isa=function(e){return Object($e.i)(e,"DeleteSessionResponse")},(L=j||(j={})).filterSensitiveLog=function(e){return l({},e)},L.isa=function(e){return Object($e.i)(e,"DependencyFailedException")},(I=_||(_={})).filterSensitiveLog=function(e){return l(l(l({},e),e.message&&{message:$e.d}),e.slots&&{slots:$e.d})},I.isa=function(e){return Object($e.i)(e,"DialogAction")},function(e){e.CLOSE="Close",e.CONFIRM_INTENT="ConfirmIntent",e.DELEGATE="Delegate",e.ELICIT_INTENT="ElicitIntent",e.ELICIT_SLOT="ElicitSlot"}(k||(k={})),function(e){e.CONFIRM_INTENT="ConfirmIntent",e.ELICIT_INTENT="ElicitIntent",e.ELICIT_SLOT="ElicitSlot",e.FAILED="Failed",e.FULFILLED="Fulfilled",e.READY_FOR_FULFILLMENT="ReadyForFulfillment"}(R||(R={})),function(e){e.FAILED="Failed",e.FULFILLED="Fulfilled",e.READY_FOR_FULFILLMENT="ReadyForFulfillment"}(N||(N={})),(z=P||(P={})).filterSensitiveLog=function(e){return l({},e)},z.isa=function(e){return Object($e.i)(e,"GenericAttachment")},(B=F||(F={})).filterSensitiveLog=function(e){return l({},e)},B.isa=function(e){return Object($e.i)(e,"GetSessionRequest")},(U=M||(M={})).filterSensitiveLog=function(e){return l(l(l(l({},e),e.dialogAction&&{dialogAction:_.filterSensitiveLog(e.dialogAction)}),e.recentIntentSummaryView&&{recentIntentSummaryView:e.recentIntentSummaryView.map((function(e){return D.filterSensitiveLog(e)}))}),e.sessionAttributes&&{sessionAttributes:$e.d})},U.isa=function(e){return Object($e.i)(e,"GetSessionResponse")},($=D||(D={})).filterSensitiveLog=function(e){return l(l({},e),e.slots&&{slots:$e.d})},$.isa=function(e){return Object($e.i)(e,"IntentSummary")},(H=q||(q={})).filterSensitiveLog=function(e){return l({},e)},H.isa=function(e){return Object($e.i)(e,"InternalFailureException")},(G=V||(V={})).filterSensitiveLog=function(e){return l({},e)},G.isa=function(e){return Object($e.i)(e,"LimitExceededException")},(J=W||(W={})).filterSensitiveLog=function(e){return l({},e)},J.isa=function(e){return Object($e.i)(e,"LoopDetectedException")},function(e){e.COMPOSITE="Composite",e.CUSTOM_PAYLOAD="CustomPayload",e.PLAIN_TEXT="PlainText",e.SSML="SSML"}(X||(X={})),(K=Y||(Y={})).filterSensitiveLog=function(e){return l({},e)},K.isa=function(e){return Object($e.i)(e,"NotAcceptableException")},(Z=Q||(Q={})).filterSensitiveLog=function(e){return l({},e)},Z.isa=function(e){return Object($e.i)(e,"NotFoundException")},(te=ee||(ee={})).filterSensitiveLog=function(e){return l(l(l({},e),e.sessionAttributes&&{sessionAttributes:$e.d}),e.requestAttributes&&{requestAttributes:$e.d})},te.isa=function(e){return Object($e.i)(e,"PostContentRequest")},(oe=ne||(ne={})).filterSensitiveLog=function(e){return l(l({},e),e.message&&{message:$e.d})},oe.isa=function(e){return Object($e.i)(e,"PostContentResponse")},(re=ie||(ie={})).filterSensitiveLog=function(e){return l(l(l(l({},e),e.inputText&&{inputText:$e.d}),e.sessionAttributes&&{sessionAttributes:$e.d}),e.requestAttributes&&{requestAttributes:$e.d})},re.isa=function(e){return Object($e.i)(e,"PostTextRequest")},(se=ae||(ae={})).filterSensitiveLog=function(e){return l(l(l(l({},e),e.message&&{message:$e.d}),e.slots&&{slots:$e.d}),e.sessionAttributes&&{sessionAttributes:$e.d})},se.isa=function(e){return Object($e.i)(e,"PostTextResponse")},(ue=ce||(ce={})).filterSensitiveLog=function(e){return l(l(l(l({},e),e.dialogAction&&{dialogAction:_.filterSensitiveLog(e.dialogAction)}),e.recentIntentSummaryView&&{recentIntentSummaryView:e.recentIntentSummaryView.map((function(e){return D.filterSensitiveLog(e)}))}),e.sessionAttributes&&{sessionAttributes:$e.d})},ue.isa=function(e){return Object($e.i)(e,"PutSessionRequest")},(de=le||(le={})).filterSensitiveLog=function(e){return l(l({},e),e.message&&{message:$e.d})},de.isa=function(e){return Object($e.i)(e,"PutSessionResponse")},(fe=pe||(pe={})).filterSensitiveLog=function(e){return l({},e)},fe.isa=function(e){return Object($e.i)(e,"RequestTimeoutException")},(he=me||(me={})).filterSensitiveLog=function(e){return l({},e)},he.isa=function(e){return Object($e.i)(e,"ResponseCard")},(be=ve||(ve={})).filterSensitiveLog=function(e){return l({},e)},be.isa=function(e){return Object($e.i)(e,"SentimentResponse")},(ye=ge||(ge={})).filterSensitiveLog=function(e){return l({},e)},ye.isa=function(e){return Object($e.i)(e,"UnsupportedMediaTypeException")};var He=n(2),Ve=function(e,t){return d(void 0,void 0,void 0,(function(){var n,o,i,r,a,s,c,u,d,f,m,h,v,b,g,y,x,w;return p(this,(function(p){switch(p.label){case 0:return o=[l({},e)],w={},[4,ft(e.body,t)];case 1:switch(n=l.apply(void 0,o.concat([(w.body=p.sent(),w)])),r="UnknownError",r=mt(e,n.body),r){case"BadGatewayException":case"com.amazonaws.lexruntimeservice#BadGatewayException":return[3,2];case"BadRequestException":case"com.amazonaws.lexruntimeservice#BadRequestException":return[3,4];case"ConflictException":case"com.amazonaws.lexruntimeservice#ConflictException":return[3,6];case"DependencyFailedException":case"com.amazonaws.lexruntimeservice#DependencyFailedException":return[3,8];case"InternalFailureException":case"com.amazonaws.lexruntimeservice#InternalFailureException":return[3,10];case"LimitExceededException":case"com.amazonaws.lexruntimeservice#LimitExceededException":return[3,12];case"LoopDetectedException":case"com.amazonaws.lexruntimeservice#LoopDetectedException":return[3,14];case"NotAcceptableException":case"com.amazonaws.lexruntimeservice#NotAcceptableException":return[3,16];case"NotFoundException":case"com.amazonaws.lexruntimeservice#NotFoundException":return[3,18];case"RequestTimeoutException":case"com.amazonaws.lexruntimeservice#RequestTimeoutException":return[3,20];case"UnsupportedMediaTypeException":case"com.amazonaws.lexruntimeservice#UnsupportedMediaTypeException":return[3,22]}return[3,24];case 2:return a=[{}],[4,We(n,t)];case 3:return i=l.apply(void 0,[l.apply(void 0,a.concat([p.sent()])),{name:r,$metadata:lt(e)}]),[3,25];case 4:return s=[{}],[4,Je(n,t)];case 5:return i=l.apply(void 0,[l.apply(void 0,s.concat([p.sent()])),{name:r,$metadata:lt(e)}]),[3,25];case 6:return c=[{}],[4,Xe(n,t)];case 7:return i=l.apply(void 0,[l.apply(void 0,c.concat([p.sent()])),{name:r,$metadata:lt(e)}]),[3,25];case 8:return u=[{}],[4,Ye(n,t)];case 9:return i=l.apply(void 0,[l.apply(void 0,u.concat([p.sent()])),{name:r,$metadata:lt(e)}]),[3,25];case 10:return d=[{}],[4,Ke(n,t)];case 11:return i=l.apply(void 0,[l.apply(void 0,d.concat([p.sent()])),{name:r,$metadata:lt(e)}]),[3,25];case 12:return f=[{}],[4,Qe(n,t)];case 13:return i=l.apply(void 0,[l.apply(void 0,f.concat([p.sent()])),{name:r,$metadata:lt(e)}]),[3,25];case 14:return m=[{}],[4,Ze(n,t)];case 15:return i=l.apply(void 0,[l.apply(void 0,m.concat([p.sent()])),{name:r,$metadata:lt(e)}]),[3,25];case 16:return h=[{}],[4,et(n,t)];case 17:return i=l.apply(void 0,[l.apply(void 0,h.concat([p.sent()])),{name:r,$metadata:lt(e)}]),[3,25];case 18:return v=[{}],[4,tt(n,t)];case 19:return i=l.apply(void 0,[l.apply(void 0,v.concat([p.sent()])),{name:r,$metadata:lt(e)}]),[3,25];case 20:return b=[{}],[4,nt(n,t)];case 21:return i=l.apply(void 0,[l.apply(void 0,b.concat([p.sent()])),{name:r,$metadata:lt(e)}]),[3,25];case 22:return g=[{}],[4,ot(n,t)];case 23:return i=l.apply(void 0,[l.apply(void 0,g.concat([p.sent()])),{name:r,$metadata:lt(e)}]),[3,25];case 24:y=n.body,r=y.code||y.Code||r,i=l(l({},y),{name:""+r,message:y.message||y.Message||r,$fault:"client",$metadata:lt(e)}),p.label=25;case 25:return x=i.message||i.Message||r,i.message=x,delete i.Message,[2,Promise.reject(Object.assign(new Error(x),i))]}}))}))},Ge=function(e,t){return d(void 0,void 0,void 0,(function(){var n,o,i,r,a,s,c,u,d,f,m,h,v,b,g;return p(this,(function(p){switch(p.label){case 0:return o=[l({},e)],g={},[4,ft(e.body,t)];case 1:switch(n=l.apply(void 0,o.concat([(g.body=p.sent(),g)])),r="UnknownError",r=mt(e,n.body),r){case"BadGatewayException":case"com.amazonaws.lexruntimeservice#BadGatewayException":return[3,2];case"BadRequestException":case"com.amazonaws.lexruntimeservice#BadRequestException":return[3,4];case"ConflictException":case"com.amazonaws.lexruntimeservice#ConflictException":return[3,6];case"DependencyFailedException":case"com.amazonaws.lexruntimeservice#DependencyFailedException":return[3,8];case"InternalFailureException":case"com.amazonaws.lexruntimeservice#InternalFailureException":return[3,10];case"LimitExceededException":case"com.amazonaws.lexruntimeservice#LimitExceededException":return[3,12];case"LoopDetectedException":case"com.amazonaws.lexruntimeservice#LoopDetectedException":return[3,14];case"NotFoundException":case"com.amazonaws.lexruntimeservice#NotFoundException":return[3,16]}return[3,18];case 2:return a=[{}],[4,We(n,t)];case 3:return i=l.apply(void 0,[l.apply(void 0,a.concat([p.sent()])),{name:r,$metadata:lt(e)}]),[3,19];case 4:return s=[{}],[4,Je(n,t)];case 5:return i=l.apply(void 0,[l.apply(void 0,s.concat([p.sent()])),{name:r,$metadata:lt(e)}]),[3,19];case 6:return c=[{}],[4,Xe(n,t)];case 7:return i=l.apply(void 0,[l.apply(void 0,c.concat([p.sent()])),{name:r,$metadata:lt(e)}]),[3,19];case 8:return u=[{}],[4,Ye(n,t)];case 9:return i=l.apply(void 0,[l.apply(void 0,u.concat([p.sent()])),{name:r,$metadata:lt(e)}]),[3,19];case 10:return d=[{}],[4,Ke(n,t)];case 11:return i=l.apply(void 0,[l.apply(void 0,d.concat([p.sent()])),{name:r,$metadata:lt(e)}]),[3,19];case 12:return f=[{}],[4,Qe(n,t)];case 13:return i=l.apply(void 0,[l.apply(void 0,f.concat([p.sent()])),{name:r,$metadata:lt(e)}]),[3,19];case 14:return m=[{}],[4,Ze(n,t)];case 15:return i=l.apply(void 0,[l.apply(void 0,m.concat([p.sent()])),{name:r,$metadata:lt(e)}]),[3,19];case 16:return h=[{}],[4,tt(n,t)];case 17:return i=l.apply(void 0,[l.apply(void 0,h.concat([p.sent()])),{name:r,$metadata:lt(e)}]),[3,19];case 18:v=n.body,r=v.code||v.Code||r,i=l(l({},v),{name:""+r,message:v.message||v.Message||r,$fault:"client",$metadata:lt(e)}),p.label=19;case 19:return b=i.message||i.Message||r,i.message=b,delete i.Message,[2,Promise.reject(Object.assign(new Error(b),i))]}}))}))},We=function(e,t){return d(void 0,void 0,void 0,(function(){var t,n;return p(this,(function(o){return t={name:"BadGatewayException",$fault:"server",$metadata:lt(e),Message:void 0},void 0!==(n=e.body).Message&&null!==n.Message&&(t.Message=n.Message),[2,t]}))}))},Je=function(e,t){return d(void 0,void 0,void 0,(function(){var t,n;return p(this,(function(o){return t={name:"BadRequestException",$fault:"client",$metadata:lt(e),message:void 0},void 0!==(n=e.body).message&&null!==n.message&&(t.message=n.message),[2,t]}))}))},Xe=function(e,t){return d(void 0,void 0,void 0,(function(){var t,n;return p(this,(function(o){return t={name:"ConflictException",$fault:"client",$metadata:lt(e),message:void 0},void 0!==(n=e.body).message&&null!==n.message&&(t.message=n.message),[2,t]}))}))},Ye=function(e,t){return d(void 0,void 0,void 0,(function(){var t,n;return p(this,(function(o){return t={name:"DependencyFailedException",$fault:"client",$metadata:lt(e),Message:void 0},void 0!==(n=e.body).Message&&null!==n.Message&&(t.Message=n.Message),[2,t]}))}))},Ke=function(e,t){return d(void 0,void 0,void 0,(function(){var t,n;return p(this,(function(o){return t={name:"InternalFailureException",$fault:"server",$metadata:lt(e),message:void 0},void 0!==(n=e.body).message&&null!==n.message&&(t.message=n.message),[2,t]}))}))},Qe=function(e,t){return d(void 0,void 0,void 0,(function(){var t,n;return p(this,(function(o){return t={name:"LimitExceededException",$fault:"client",$metadata:lt(e),message:void 0,retryAfterSeconds:void 0},void 0!==e.headers["retry-after"]&&(t.retryAfterSeconds=e.headers["retry-after"]),void 0!==(n=e.body).message&&null!==n.message&&(t.message=n.message),[2,t]}))}))},Ze=function(e,t){return d(void 0,void 0,void 0,(function(){var t,n;return p(this,(function(o){return t={name:"LoopDetectedException",$fault:"server",$metadata:lt(e),Message:void 0},void 0!==(n=e.body).Message&&null!==n.Message&&(t.Message=n.Message),[2,t]}))}))},et=function(e,t){return d(void 0,void 0,void 0,(function(){var t,n;return p(this,(function(o){return t={name:"NotAcceptableException",$fault:"client",$metadata:lt(e),message:void 0},void 0!==(n=e.body).message&&null!==n.message&&(t.message=n.message),[2,t]}))}))},tt=function(e,t){return d(void 0,void 0,void 0,(function(){var t,n;return p(this,(function(o){return t={name:"NotFoundException",$fault:"client",$metadata:lt(e),message:void 0},void 0!==(n=e.body).message&&null!==n.message&&(t.message=n.message),[2,t]}))}))},nt=function(e,t){return d(void 0,void 0,void 0,(function(){var t,n;return p(this,(function(o){return t={name:"RequestTimeoutException",$fault:"client",$metadata:lt(e),message:void 0},void 0!==(n=e.body).message&&null!==n.message&&(t.message=n.message),[2,t]}))}))},ot=function(e,t){return d(void 0,void 0,void 0,(function(){var t,n;return p(this,(function(o){return t={name:"UnsupportedMediaTypeException",$fault:"client",$metadata:lt(e),message:void 0},void 0!==(n=e.body).message&&null!==n.message&&(t.message=n.message),[2,t]}))}))},it=function(e,t){return Object.entries(e).reduce((function(e,t){var n,o=f(t,2),i=o[0],r=o[1];return l(l({},e),((n={})[i]=r,n))}),{})},rt=function(e,t){return(e||[]).map((function(e){return function(e,t){return{__type:"GenericAttachment",attachmentLinkUrl:void 0!==e.attachmentLinkUrl&&null!==e.attachmentLinkUrl?e.attachmentLinkUrl:void 0,buttons:void 0!==e.buttons&&null!==e.buttons?at(e.buttons,t):void 0,imageUrl:void 0!==e.imageUrl&&null!==e.imageUrl?e.imageUrl:void 0,subTitle:void 0!==e.subTitle&&null!==e.subTitle?e.subTitle:void 0,title:void 0!==e.title&&null!==e.title?e.title:void 0}}(e,t)}))},at=function(e,t){return(e||[]).map((function(e){return function(e,t){return{__type:"Button",text:void 0!==e.text&&null!==e.text?e.text:void 0,value:void 0!==e.value&&null!==e.value?e.value:void 0}}(e)}))},st=function(e,t){return{__type:"ResponseCard",contentType:void 0!==e.contentType&&null!==e.contentType?e.contentType:void 0,genericAttachments:void 0!==e.genericAttachments&&null!==e.genericAttachments?rt(e.genericAttachments,t):void 0,version:void 0!==e.version&&null!==e.version?e.version:void 0}},ct=function(e,t){return{__type:"SentimentResponse",sentimentLabel:void 0!==e.sentimentLabel&&null!==e.sentimentLabel?e.sentimentLabel:void 0,sentimentScore:void 0!==e.sentimentScore&&null!==e.sentimentScore?e.sentimentScore:void 0}},ut=function(e,t){return Object.entries(e).reduce((function(e,t){var n,o=f(t,2),i=o[0],r=o[1];return l(l({},e),((n={})[i]=r,n))}),{})},lt=function(e){return{httpStatusCode:e.statusCode,httpHeaders:e.headers,requestId:e.headers["x-amzn-requestid"]}},dt=function(e,t){return function(e,t){return void 0===e&&(e=new Uint8Array),e instanceof Uint8Array?Promise.resolve(e):t.streamCollector(e)||Promise.resolve(new Uint8Array)}(e,t).then((function(e){return t.utf8Encoder(e)}))},pt=function(e){return void 0!==e&&""!==e&&(!Object.getOwnPropertyNames(e).includes("length")||0!=e.length)&&(!Object.getOwnPropertyNames(e).includes("size")||0!=e.size)},ft=function(e,t){return dt(e,t).then((function(e){return e.length?JSON.parse(e):{}}))},mt=function(e,t){var n,o,i=function(e){var t=e;return t.indexOf(":")>=0&&(t=t.split(":")[0]),t.indexOf("#")>=0&&(t=t.split("#")[1]),t},r=(n=e.headers,o="x-amzn-errortype",Object.keys(n).find((function(e){return e.toLowerCase()===o.toLowerCase()})));return void 0!==r?i(e.headers[r]):void 0!==t.code?i(t.code):void 0!==t.__type?i(t.__type):""},ht=n(10),vt=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return u(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Object(ht.a)(t,this.serialize,this.deserialize));var o=e.concat(this.middlewareStack),i={logger:t.logger,inputFilterSensitiveLog:ie.filterSensitiveLog,outputFilterSensitiveLog:ae.filterSensitiveLog},r=t.requestHandler;return o.resolve((function(e){return r.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return d(void 0,void 0,void 0,(function(){var n,o,i,r,a,s,c,u,d;return p(this,(function(p){switch(p.label){case 0:if(n={"Content-Type":"application/json"},o="/bot/{botName}/alias/{botAlias}/user/{userId}/text",void 0===e.userId)throw new Error("No value provided for input HTTP label: userId.");if((i=e.userId).length<=0)throw new Error("Empty value provided for input HTTP label: userId.");if(o=o.replace("{userId}",Object($e.f)(i)),void 0===e.botName)throw new Error("No value provided for input HTTP label: botName.");if((i=e.botName).length<=0)throw new Error("Empty value provided for input HTTP label: botName.");if(o=o.replace("{botName}",Object($e.f)(i)),void 0===e.botAlias)throw new Error("No value provided for input HTTP label: botAlias.");if((i=e.botAlias).length<=0)throw new Error("Empty value provided for input HTTP label: botAlias.");return o=o.replace("{botAlias}",Object($e.f)(i)),r=JSON.stringify(l(l(l({},void 0!==e.inputText&&{inputText:e.inputText}),void 0!==e.requestAttributes&&{requestAttributes:it(e.requestAttributes,t)}),void 0!==e.sessionAttributes&&{sessionAttributes:it(e.sessionAttributes,t)})),[4,t.endpoint()];case 1:return a=p.sent(),s=a.hostname,c=a.protocol,u=void 0===c?"https":c,d=a.port,[2,new He.a({protocol:u,hostname:s,port:d,method:"POST",headers:n,path:o,body:r})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return d(void 0,void 0,void 0,(function(){var n,o;return p(this,(function(i){switch(i.label){case 0:return 200!==e.statusCode&&e.statusCode>=400?[2,Ge(e,t)]:(n={$metadata:lt(e),__type:"PostTextResponse",dialogState:void 0,intentName:void 0,message:void 0,messageFormat:void 0,responseCard:void 0,sentimentResponse:void 0,sessionAttributes:void 0,sessionId:void 0,slotToElicit:void 0,slots:void 0},[4,ft(e.body,t)]);case 1:return void 0!==(o=i.sent()).dialogState&&null!==o.dialogState&&(n.dialogState=o.dialogState),void 0!==o.intentName&&null!==o.intentName&&(n.intentName=o.intentName),void 0!==o.message&&null!==o.message&&(n.message=o.message),void 0!==o.messageFormat&&null!==o.messageFormat&&(n.messageFormat=o.messageFormat),void 0!==o.responseCard&&null!==o.responseCard&&(n.responseCard=st(o.responseCard,t)),void 0!==o.sentimentResponse&&null!==o.sentimentResponse&&(n.sentimentResponse=ct(o.sentimentResponse,t)),void 0!==o.sessionAttributes&&null!==o.sessionAttributes&&(n.sessionAttributes=ut(o.sessionAttributes,t)),void 0!==o.sessionId&&null!==o.sessionId&&(n.sessionId=o.sessionId),void 0!==o.slotToElicit&&null!==o.slotToElicit&&(n.slotToElicit=o.slotToElicit),void 0!==o.slots&&null!==o.slots&&(n.slots=ut(o.slots,t)),[2,Promise.resolve(n)]}}))}))}(e,t)},t}($e.b),bt=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return u(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Object(ht.a)(t,this.serialize,this.deserialize));var o=e.concat(this.middlewareStack),i={logger:t.logger,inputFilterSensitiveLog:ee.filterSensitiveLog,outputFilterSensitiveLog:ne.filterSensitiveLog},r=t.requestHandler;return o.resolve((function(e){return r.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return d(void 0,void 0,void 0,(function(){var n,o,i,r,a,s,c,u,d;return p(this,(function(p){switch(p.label){case 0:if(n=l(l(l(l({"Content-Type":"application/octet-stream","x-amz-content-sha256":"UNSIGNED-PAYLOAD"},pt(e.sessionAttributes)&&{"x-amz-lex-session-attributes":$e.c.fromObject(e.sessionAttributes)}),pt(e.requestAttributes)&&{"x-amz-lex-request-attributes":$e.c.fromObject(e.requestAttributes)}),pt(e.accept)&&{Accept:e.accept}),pt(e.contentType)&&{"Content-Type":e.contentType}),o="/bot/{botName}/alias/{botAlias}/user/{userId}/content",void 0===e.userId)throw new Error("No value provided for input HTTP label: userId.");if((i=e.userId).length<=0)throw new Error("Empty value provided for input HTTP label: userId.");if(o=o.replace("{userId}",Object($e.f)(i)),void 0===e.botName)throw new Error("No value provided for input HTTP label: botName.");if((i=e.botName).length<=0)throw new Error("Empty value provided for input HTTP label: botName.");if(o=o.replace("{botName}",Object($e.f)(i)),void 0===e.botAlias)throw new Error("No value provided for input HTTP label: botAlias.");if((i=e.botAlias).length<=0)throw new Error("Empty value provided for input HTTP label: botAlias.");return o=o.replace("{botAlias}",Object($e.f)(i)),void 0!==e.inputStream&&(r=e.inputStream),[4,t.endpoint()];case 1:return a=p.sent(),s=a.hostname,c=a.protocol,u=void 0===c?"https":c,d=a.port,[2,new He.a({protocol:u,hostname:s,port:d,method:"POST",headers:n,path:o,body:r})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return d(void 0,void 0,void 0,(function(){var n,o;return p(this,(function(i){return 200!==e.statusCode&&e.statusCode>=400?[2,Ve(e,t)]:(n={$metadata:lt(e),__type:"PostContentResponse",audioStream:void 0,contentType:void 0,dialogState:void 0,inputTranscript:void 0,intentName:void 0,message:void 0,messageFormat:void 0,sentimentResponse:void 0,sessionAttributes:void 0,sessionId:void 0,slotToElicit:void 0,slots:void 0},void 0!==e.headers["x-amz-lex-message"]&&(n.message=e.headers["x-amz-lex-message"]),void 0!==e.headers["x-amz-lex-slots"]&&(n.slots=new $e.c(e.headers["x-amz-lex-slots"])),void 0!==e.headers["x-amz-lex-dialog-state"]&&(n.dialogState=e.headers["x-amz-lex-dialog-state"]),void 0!==e.headers["x-amz-lex-intent-name"]&&(n.intentName=e.headers["x-amz-lex-intent-name"]),void 0!==e.headers["x-amz-lex-input-transcript"]&&(n.inputTranscript=e.headers["x-amz-lex-input-transcript"]),void 0!==e.headers["x-amz-lex-message-format"]&&(n.messageFormat=e.headers["x-amz-lex-message-format"]),void 0!==e.headers["content-type"]&&(n.contentType=e.headers["content-type"]),void 0!==e.headers["x-amz-lex-session-id"]&&(n.sessionId=e.headers["x-amz-lex-session-id"]),void 0!==e.headers["x-amz-lex-session-attributes"]&&(n.sessionAttributes=new $e.c(e.headers["x-amz-lex-session-attributes"])),void 0!==e.headers["x-amz-lex-sentiment"]&&(n.sentimentResponse=e.headers["x-amz-lex-sentiment"]),void 0!==e.headers["x-amz-lex-slot-to-elicit"]&&(n.slotToElicit=e.headers["x-amz-lex-slot-to-elicit"]),o=e.body,n.audioStream=o,[2,Promise.resolve(n)])}))}))}(e,t)},t}($e.b),gt=n(240),yt=n(64),xt=function(e){if(e instanceof Blob||e instanceof ReadableStream)return new Response(e).arrayBuffer().then((function(e){return new Uint8Array(e)}));throw new Error("Readable is not supported.")},wt=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),St=function(){return(St=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},Et=function(e,t,n,o){return new(n||(n=Promise))((function(i,r){function a(e){try{c(o.next(e))}catch(t){r(t)}}function s(e){try{c(o.throw(e))}catch(t){r(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((o=o.apply(e,t||[])).next())}))},Tt=function(e,t){var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(s){r=[6,s],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}},Ot=new o.a("AWSLexProvider"),Ct=function(e){function t(t){void 0===t&&(t={});var n=e.call(this,t)||this;return n._botsCompleteCallback={},n}return wt(t,e),t.prototype.getProviderName=function(){return"AWSLexProvider"},t.prototype.reportBotStatus=function(e,t){var n=this;Ot.debug("postContent state",e.dialogState),"ReadyForFulfillment"!==e.dialogState&&"Fulfilled"!==e.dialogState||("function"===typeof this._botsCompleteCallback[t]&&setTimeout((function(){return n._botsCompleteCallback[t](null,{slots:e.slots})}),0),this._config&&"function"===typeof this._config[t].onComplete&&setTimeout((function(){return n._config[t].onComplete(null,{slots:e.slots})}),0)),"Failed"===e.dialogState&&("function"===typeof this._botsCompleteCallback[t]&&setTimeout((function(){return n._botsCompleteCallback[t]("Bot conversation failed")}),0),this._config&&"function"===typeof this._config[t].onComplete&&setTimeout((function(){return n._config[t].onComplete("Bot conversation failed")}),0))},t.prototype.sendMessage=function(e,t){return Et(this,void 0,void 0,(function(){var n,o,i,r,a,s,c,u,l,d;return Tt(this,(function(p){switch(p.label){case 0:return this._config[e]?[4,gt.a.get()]:[2,Promise.reject("Bot "+e+" does not exist")];case 1:if(!(n=p.sent()))return[2,Promise.reject("No credentials")];if(this.lexRuntimeServiceClient=new qe({region:this._config[e].region,credentials:n,customUserAgent:Object(yt.b)()}),"string"!==typeof t)return[3,6];o={botAlias:this._config[e].alias,botName:e,inputText:t,userId:n.identityId},Ot.debug("postText to lex",t),p.label=2;case 2:return p.trys.push([2,4,,5]),i=new vt(o),[4,this.lexRuntimeServiceClient.send(i)];case 3:return u=p.sent(),this.reportBotStatus(u,e),[2,u];case 4:return r=p.sent(),[2,Promise.reject(r)];case 5:return[3,11];case 6:a=t.content,s=t.options.messageType,o="voice"===s?{botAlias:this._config[e].alias,botName:e,contentType:"audio/x-l16; sample-rate=16000",inputStream:a,userId:n.identityId,accept:"audio/mpeg"}:{botAlias:this._config[e].alias,botName:e,contentType:"text/plain; charset=utf-8",inputStream:a,userId:n.identityId,accept:"audio/mpeg"},Ot.debug("postContent to lex",t),p.label=7;case 7:return p.trys.push([7,10,,11]),c=new bt(o),[4,this.lexRuntimeServiceClient.send(c)];case 8:return u=p.sent(),[4,xt(u.audioStream)];case 9:return l=p.sent(),this.reportBotStatus(u,e),[2,St(St({},u),{audioStream:l})];case 10:return d=p.sent(),[2,Promise.reject(d)];case 11:return[2]}}))}))},t.prototype.onComplete=function(e,t){if(!this._config[e])throw new ErrorEvent("Bot "+e+" does not exist");this._botsCompleteCallback[e]=t},t}(s),At=function(){return(At=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},jt=function(e,t,n,o){return new(n||(n=Promise))((function(i,r){function a(e){try{c(o.next(e))}catch(t){r(t)}}function s(e){try{c(o.throw(e))}catch(t){r(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((o=o.apply(e,t||[])).next())}))},Lt=function(e,t){var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(s){r=[6,s],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}},_t=new o.a("Interactions"),It=new(function(){function e(e){this._options=e,_t.debug("Interactions Options",this._options),this._pluggables={}}return e.prototype.getModuleName=function(){return"Interactions"},e.prototype.configure=function(e){var t=this,n=e?e.Interactions||e:{};_t.debug("configure Interactions",{opt:n}),this._options=At(At({bots:{}},n),n.Interactions);var o=this._options.aws_bots_config,i=this._options.bots;return!Object.keys(i).length&&o&&Array.isArray(o)&&o.forEach((function(e){t._options.bots[e.name]=e})),!this._pluggables.AWSLexProvider&&i&&Object.keys(i).map((function(e){return i[e]})).find((function(e){return!e.providerName||"AWSLexProvider"===e.providerName}))&&(this._pluggables.AWSLexProvider=new Ct),Object.keys(this._pluggables).map((function(e){t._pluggables[e].configure(t._options.bots)})),this._options},e.prototype.addPluggable=function(e){if(e&&"Interactions"===e.getCategory()){if(this._pluggables[e.getProviderName()])throw new Error("Bot "+e.getProviderName()+" already plugged");return e.configure(this._options.bots),void(this._pluggables[e.getProviderName()]=e)}},e.prototype.send=function(e,t){return jt(this,void 0,void 0,(function(){var n;return Lt(this,(function(o){switch(o.label){case 0:if(!this._options.bots||!this._options.bots[e])throw new Error("Bot "+e+" does not exist");if(n=this._options.bots[e].providerName||"AWSLexProvider",!this._pluggables[n])throw new Error("Bot "+n+" does not have valid pluggin did you try addPluggable first?");return[4,this._pluggables[n].sendMessage(e,t)];case 1:return[2,o.sent()]}}))}))},e.prototype.onComplete=function(e,t){if(!this._options.bots||!this._options.bots[e])throw new Error("Bot "+e+" does not exist");var n=this._options.bots[e].providerName||"AWSLexProvider";if(!this._pluggables[n])throw new Error("Bot "+n+" does not have valid pluggin did you try addPluggable first?");this._pluggables[n].onComplete(e,t)},e}())(null);i.a.register(It)},246:function(e){e.exports=JSON.parse('{"a":"@aws-sdk/client-lex-runtime-service","b":"1.0.0-gamma.8"}')}}]);
//# sourceMappingURL=4.ded6f615.chunk.js.map