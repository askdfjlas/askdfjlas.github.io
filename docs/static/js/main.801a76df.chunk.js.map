{"version":3,"sources":["Utils.js","Header/HeaderUtils.js","Api/UserAuthApi.js","Header/HeaderState.js","Header/RegisterForm.js","Header/LoginForm.js","Header/UserMenu.js","Header/HeaderAuth.js","Header/Header.js","TextEditor/ContentType.js","TextEditor/MaskManager.js","TextEditor/Caret.js","TextEditor/Toolbar.js","TextEditor/VirtualTextEditor.js","TextEditor/Block/MathBlock.js","TextEditor/Block/Block.js","TextEditor/TextEditorContent.js","TextEditor/registerEventHandlers.js","TextEditor/TextEditor.js","Home/CpNotes.js","Home/Home.js","Misc/LoadingSpinner.js","Enum/LoadState.js","HOC/CreateLoadingComponent.js","UserProfile/UserInfo.js","SearchSelect/SearchSelect.js","Api/ApiConstants.js","Api/Api.js","Enum/SolvedState.js","Api/ProblemsApi.js","UserProfile/AddProblemForm.js","Api/NotesApi.js","UserProfile/UserNoteInfo.js","UserProfile/UserContestInfo.js","UserProfile/UserNotesTitleDropdown.js","Paginator/VirtualPaginator.js","Paginator/Paginator.js","UserProfile/UserNotesList.js","UserProfile/UserNotes.js","Api/UsersApi.js","UserProfile/UserProfile.js","EditNote/DeleteMenu.js","EditNote/EditNoteForm.js","EditNote/ProblemInfo.js","EditNote/EditNote.js","Api/LikesApi.js","Misc/LikeDislike.js","PublicNote/PublicNoteInfo.js","PublicNote/PublicNote.js","UsersList/UsersTable.js","UsersList/UsersList.js","App.js","serviceWorker.js","index.js"],"names":["Utils","component","stateObject","Promise","resolve","reject","mounted","setState","object","property","hasOwnProperty","message","setError","setStatePromise","error","setSuccess","success","selectors","window","MathJax","typeset","HeaderUtils","password","confirmPassword","componentSetError","length","UserAuthApi","Auth","currentAuthenticatedUser","username","email","signUp","attributes","info","codeDeliveryDetails","Destination","code","confirmSignUp","resendSignUp","CodeDeliveryDetails","forgotPassword","forgotPasswordSubmit","signIn","signOut","getProfile","profile","currentSession","getSignInUserSession","accessToken","getAccessToken","getJwtToken","HeaderState","Object","freeze","LOGIN","RECOVERY_USERNAME","RECOVERY_PASSWORD","RECOVERY_SUCCESS","REGISTER","REGISTER_VERIFY","REGISTER_SUCCESS","ERROR_TRIGGER_PREFIX","RegisterForm","props","screen","unverifiedAccountUsername","state","destination","unverifiedAccountDestination","loading","close","bind","register","verifyEmail","resendVerificationEmail","setLoading","this","exitCallback","startsWith","substring","event","preventDefault","form","target","value","checkPasswords","componentSetSuccess","isLoading","submitButtonClassName","currentForm","createAccountForm","className","onSubmit","htmlFor","autoComplete","type","name","id","disabled","verifyEmailForm","key","onClick","emailVerifiedBox","Component","LoginForm","login","enablePasswordRecovery","resetPassword","emailVerificationCallback","componentsSetError","loginForm","recoveryUsernameForm","recoveryPasswordForm","recoveryPasswordSuccess","UserMenu","logout","logoutCallback","closeCallback","to","HeaderAuth","showRegisterForm","showLoginForm","showUserMenu","refreshUsername","toggleRegisterForm","toggleLoginForm","toggleUserMenu","hideUserMenu","afterLogin","unverifiedAccount","suggestUserRegister","getUsername","focusedElement","relatedTarget","classList","contains","loggedIn","loginButtons","loggedInButton","tabIndex","onBlur","topRightButtons","Header","path","useLocation","pathname","big","outerClassName","ContentType","MATH","BOLD","ITALIC","UNDERLINE","MaskManager","bit","on","originalMask","mask","style","Caret","selection","getSelection","anchorElement","anchorNode","parentElement","focusElement","focusNode","originalAnchorElement","originalFocusElement","anchorMathBlock","getContainingMathBlock","focusMathBlock","a","b","c","d","anchorIndex","getAttribute","focusIndex","anchorOffset","focusOffset","insideCaretBlock","rangeSelect","index","position","editorSelected","Number","leftIndex","leftPosition","rightIndex","rightPosition","newCaretInfo","editorMask","removeCaretBlock","setRangePosition","addCaretBlock","setPosition","blockElement","textNode","document","getElementById","childNodes","createTextNode","appendChild","range","createRange","setStart","collapse","removeAllRanges","addRange","leftBlockElement","rightBlockElement","leftTextNode","rightTextNode","setEnd","caretBlock","createElement","setAttribute","getClassName","innerHTML","String","fromCharCode","nextBlock","insertBefore","existingCaretBlock","removeChild","element","Toolbar","boldSelected","italicSelected","underlineSelected","mathSelected","callback","countCharacters","str","counter","character","VirtualTextEditor","initialContent","characters","caretBlockIndex","caretBlockPosition","block","m","char","push","splice","updateBlocks","globalIndex","charactersScanned","i","blocks","blockLength","blockEndIndex","j","blockStarts","characterCounter","rangeEnd","getGlobalIndex","firstBlockEnd","getIndexAndPosition","nextBlockGlobalIndex","insertedString","rightBuffer","globalCaretPosition","globalLeftIndex","deleteLength","globalRightIndex","editorMergeBit","newLeftIndex","newLeftPosition","caretInfo","leftGlobalIndex","rightGlobalIndex","getCorrectedIndexAndPosition","isEmpty","content","currentMask","characterBuffer","blockPosition","forEach","caretBlockIncoming","join","MathBlock","rendered","textContent","changeKey","useMemo","useEffect","renderMathJax","Block","editorId","selected","TextEditorContent","editable","handleBlur","handleFocus","contentElements","contentEditable","suppressContentEditableWarning","spellCheck","onFocus","registerEventHandlers","that","textEditor","addEventListener","composing","delete","insert","isComposing","inputType","dataTransfer","getData","data","pasteText","clipboardData","compositionIndex","compositionPosition","compositionInsert","handleSelectionChange","selectionChanged","caret","getInfo","err","TextEditor","uniqueKey","virtualTextEditor","contentChanged","getContent","toolbarUpdate","insertionUpdate","newString","updateCaretInfo","rangeMaskUpdate","updateContent","setInfo","newMask","newToolbarMask","toolbarMergeBit","leftCharacterMask","getCharacterMask","previouslyInsideCaretBlock","atBlockNewlineEnd","updateMask","updateCaret","leftElement","rightElement","leftElementLength","atLeftElementEnd","atRightElementBegin","outerTextEditor","junkNodes","node","nodeType","Node","TEXT_NODE","nodeName","childElement","children","nodeValue","onChange","removeEventListener","isIcon","contained","forceUpdate","CpNotes","Home","LoadingSpinner","LoadState","LOADING","DONE","NOT_FOUND","CreateLoadingComponent","defaultParams","notFoundErrorName","WrappedComponent","innerContent","useRef","useState","currentParams","changeCurrentParams","changeInfo","componentScreen","changeScreen","loadInfo","useCallback","params","current","otherProps","UserInfo","SearchSelect","searchTerm","previousValidSearchTerm","showOptions","options","filteredOptions","handleChange","handleOptionSelect","option","optionStringArray","keys","toLowerCase","getOptionString","includes","prevProps","staticKey","search","filterOptions","sortKey","optionString","optionElements","displayString","displayKey","ApiConstants","API_ENDPOINT","Api","Error","response","status","json","responseJson","createApiError","resource","method","fetch","body","JSON","stringify","headers","Authorization","manageResponseError","queryString","sendRequestBody","SolvedState","SOLVED","text","css","UPSOLVED","UPSOLVED_HELP","UNSOLVED","ProblemsApi","problems","prettySk","sk","replaceAll","platform","getJson","contestId","_prettifyProblems","problemId","solvedStateValue","parseInt","AddProblemForm","contestSortKey","problemSortKey","skipContestSearch","handlePlatformChange","toggleSkipContestSearch","updateProblemSortKey","updateContestSortKey","addProblem","searchContestFunction","searchContestKey","getContests","searchProblemFunction","searchProblemKey","getProblems","skipButtonText","defaultValue","NotesApi","forcePublished","postJson","title","solved","published","putJson","deleteJson","UserNoteInfo","solvedClass","getSolvedStateCssClass","problemUrl","problemSk","replace","publishedClass","timestamp","Date","editedTime","toLocaleDateString","authorUsername","loggedInUsername","problemCode","problemName","UserContestInfo","noteElements","notes","note","split","codeClassName","contestName","UserNotesTitleDropdown","showing","toggleCallback","showText","VirtualPaginator","pageSize","setContent","activeItems","item","paginatorActive","indices","active","pageIndex","currentIndex","activeBufferSize","itemBuffer","pageCount","bufferSize","Paginator","currentPage","totalPages","pageIndices","after","increment","before","sort","paginatorButtons","buttonClassName","buttonOnClick","RecursionLevel","CONTEST","PLATFORM","compareByRecent","note1","note2","groupByAttributes","objectList","attributeGroups","obj","attributeValues","attribute","UserNotesList","page","sortNoteItems","virtualPaginator","sortedNoteItems","updatePage","firstNote","contestObject","contestCode","organizeBySolved","organizeByPlatform","recursionLevel","keyString","paginatorIndices","organizeByContest","contestGroups","createContestObject","organize","attributeString","dropdownShowing","dropdownIndices","sortByRecent","groups","innerKeyString","innerIndices","noteInfoElements","NoteComponent","renderNoteItems","getSolvedStateText","toggleActiveItems","getPageCount","nextProps","nextState","importantProps","currentImportantProps","map","x","nextImportantProps","noteItems","paginator","UserNotes","showAddProblemForm","toggleAddProblemForm","toggleOrganizeBySolved","toggleOrganizeByPlatform","toggleOrganizeByContest","toggleSortByRecent","formComponent","userInfo","addNote","history","UsersApi","match","getUserInfo","getNotes","DeleteMenu","randomCode","uuidv4","deleteNote","confirmCode","problemInfo","remindUserToSave","returnValue","EditNoteForm","noteInfo","parse","lastSaved","disableEditButtons","saved","loadingSave","loadingPublish","showDeleteMenu","saveNote","togglePublishNote","toggleDeleteMenu","handleTitleChange","handleSolvedChange","handleContentChange","editNote","onbeforeunload","saveOrPublishNote","newContent","savedText","toLocaleString","togglePublishText","saveButtonClass","publishButtonClass","when","placeholder","ProblemInfo","href","link","rel","getProblemInfo","getNoteInfo","LikesApi","noteAuthor","likedStatus","LikeDislike","initialScore","initialStatus","likeCallback","score","setScore","setStatus","likeButtonClass","toggleStatus","PublicNoteInfo","editedTimestamp","sendLike","likeCount","ownerUsername","UsersTable","lastUpdated","users","updatedTime","userRows","user","contributionClassName","contribution","getUsers","usersInfo","App","exact","UsersList","UserProfile","EditNote","PublicNote","Boolean","location","hostname","Amplify","configure","amplify_config","add","keyCode","remove","ReactDOM","render","navigator","serviceWorker","ready","then","registration","unregister","catch","console"],"mappings":"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","file":"static/js/main.801a76df.chunk.js","sourcesContent":["class Utils {\n  static async setStatePromise(component, stateObject) {\n    return new Promise((resolve, reject) => {\n      if(component.mounted !== false) {\n        component.setState(stateObject, () => {\n          resolve();\n        });\n      }\n      resolve();\n    });\n  }\n\n  static isEmpty(object) {\n    for(const property in object) {\n      if(object.hasOwnProperty(property))\n        return false;\n    }\n    return true;\n  }\n\n  static async componentSetError(component, message) {\n    if(component.setError) {\n      await component.setError(message);\n    }\n    else {\n      await Utils.setStatePromise(component, {\n        error: `Error: ${message}`\n      });\n    }\n  }\n\n  static async componentSetSuccess(component, message) {\n    if(component.setSuccess) {\n      await component.setSuccess(message);\n    }\n    else {\n      await Utils.setStatePromise(component, {\n        error: '',\n        success: message\n      });\n    }\n  }\n\n  static renderMathJax(selectors) {\n    if(window.MathJax) {\n      window.MathJax.typeset(selectors);\n    }\n  }\n}\n\nexport default Utils;\n","import Utils from '../Utils';\n\nconst MIN_PASSWORD_LENGTH = 6;\n\nclass HeaderUtils {\n  static async checkPasswords(component, password, confirmPassword) {\n    if(password !== confirmPassword) {\n      await Utils.componentSetError(component, \"Your passwords don't match!\");\n      return false;\n    }\n\n    if(password.length < MIN_PASSWORD_LENGTH) {\n      await Utils.componentSetError(component, 'Your password is too short!');\n      return false;\n    }\n\n    return true;\n  }\n}\n\nexport default HeaderUtils;\n","import { Auth } from 'aws-amplify';\n\nclass UserAuthApi {\n  static async getProfile() {\n    try {\n      return await Auth.currentAuthenticatedUser();\n    }\n    catch(err) {\n      // currentAuthenticatedUser() throws this error if the user is not logged in\n      return null;\n    }\n  }\n\n  static async register(username, email, password) {\n    const info = await Auth.signUp({\n      username,\n      password,\n      attributes: {\n        email: email\n      }\n    });\n\n    // I like how Amplify makes this one inconsistently lowercase... lol\n    return info.codeDeliveryDetails.Destination;\n  }\n\n  static async verifyEmail(username, code) {\n    await Auth.confirmSignUp(username, code);\n  }\n\n  static async resendVerificationEmail(username) {\n    const info = await Auth.resendSignUp(username);\n    return info.CodeDeliveryDetails.Destination;\n  }\n\n  static async forgotPassword(username) {\n    const info = await Auth.forgotPassword(username);\n    return info.CodeDeliveryDetails.Destination;\n  }\n\n  static async resetPassword(username, code, password) {\n    await Auth.forgotPasswordSubmit(username, code, password);\n  }\n\n  static async login(username, password) {\n    await Auth.signIn(username, password);\n  }\n\n  static async logout() {\n    await Auth.signOut();\n  }\n\n  static async getUsername() {\n    const profile = await UserAuthApi.getProfile();\n    if(!profile)\n      return null;\n\n    return profile.username;\n  }\n\n  static async getAccessToken() {\n    const profile = await UserAuthApi.getProfile();\n    if(!profile)\n      return null;\n\n    const currentSession = profile.getSignInUserSession();\n    const accessToken = currentSession.getAccessToken();\n    return accessToken.getJwtToken();\n  }\n}\n\nexport default UserAuthApi;\n","const HeaderState = Object.freeze({\n  LOGIN: 0,\n  RECOVERY_USERNAME: 1,\n  RECOVERY_PASSWORD: 2,\n  RECOVERY_SUCCESS: 3,\n  REGISTER: 4,\n  REGISTER_VERIFY: 5,\n  REGISTER_SUCCESS: 6\n});\n\nexport default HeaderState;\n","import React, { Component } from 'react';\nimport Utils from '../Utils';\nimport HeaderUtils from './HeaderUtils';\nimport UserAuthApi from '../Api/UserAuthApi';\nimport HeaderState from './HeaderState';\nimport '../css/RegisterForm.css';\n\nconst USERNAME_MIN_LENGTH = 3;\nconst USERNAME_MAX_LENGTH = 20;\nconst ERROR_TRIGGER_PREFIX = 'PreSignUp failed with error';\n\nclass RegisterForm extends Component {\n  constructor(props) {\n    super(props);\n\n    const screen = props.unverifiedAccountUsername ?\n                   HeaderState.REGISTER_VERIFY : HeaderState.REGISTER;\n    this.state = {\n      error: '',\n      success: '',\n      username: props.unverifiedAccountUsername,\n      destination: props.unverifiedAccountDestination,\n      screen: screen,\n      loading: false\n    };\n\n    this.close = this.close.bind(this);\n    this.register = this.register.bind(this);\n    this.verifyEmail = this.verifyEmail.bind(this);\n    this.resendVerificationEmail = this.resendVerificationEmail.bind(this);\n    this.setLoading = this.setLoading.bind(this);\n  }\n\n  close() {\n    this.props.exitCallback();\n  }\n\n  async setError(message) {\n    if(message.startsWith(ERROR_TRIGGER_PREFIX)) {\n      message = message.substring(\n        ERROR_TRIGGER_PREFIX.length, message.length - 1\n      );\n    }\n\n    await Utils.setStatePromise(this, {\n      error: `Error: ${message}`,\n      success: ''\n    });\n  }\n\n  async register(event) {\n    event.preventDefault();\n\n    const form = event.target;\n    const username = form.username.value;\n    const email = form.email.value;\n    const password = form.password.value;\n    const confirmPassword = form.confirmPassword.value;\n\n    if(!username || !email || !password || !confirmPassword) {\n      await this.setError('Please fill out all of the fields.')\n      return;\n    }\n\n    if(username.length < USERNAME_MIN_LENGTH || username.length > USERNAME_MAX_LENGTH) {\n      await this.setError(\n        `Your username must be between ${USERNAME_MIN_LENGTH} ` +\n        `and ${USERNAME_MAX_LENGTH} characters!`\n      );\n      return;\n    }\n\n    const passwordsOk = await HeaderUtils.checkPasswords(this, password, confirmPassword);\n    if(!passwordsOk)\n      return;\n\n    await this.setLoading(true);\n    try {\n      const destination = await UserAuthApi.register(username, email, password);\n      Utils.setStatePromise(this, {\n        error: '',\n        username: username,\n        destination: destination,\n        screen: HeaderState.REGISTER_VERIFY\n      });\n    }\n    catch(err) {\n      await this.setError(err.message);\n    }\n    await this.setLoading(false);\n  }\n\n  async verifyEmail(event) {\n    event.preventDefault();\n\n    const code = event.target.code.value;\n    await this.setLoading(true);\n    try {\n      await UserAuthApi.verifyEmail(this.state.username, code);\n      Utils.setStatePromise(this, {\n        error: '',\n        success: '',\n        screen: HeaderState.REGISTER_SUCCESS\n      });\n    }\n    catch(err) {\n      await this.setError(err.message);\n    }\n    await this.setLoading(false);\n  }\n\n  async resendVerificationEmail(event) {\n    try {\n      await UserAuthApi.resendVerificationEmail(this.state.username);\n      await Utils.componentSetSuccess(this, 'Another email has been sent!');\n    }\n    catch(err) {\n      await this.setError(err.message);\n    }\n  }\n\n  async setLoading(isLoading) {\n    await Utils.setStatePromise(this, {\n      loading: isLoading\n    });\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  render() {\n    let submitButtonClassName = 'Askd-button';\n    if(this.state.loading) {\n      submitButtonClassName += ' Askd-form-loading';\n    }\n\n    const createAccountForm = (\n      <div className=\"Register-form Module-popup\">\n        { this.state.error && <h2>{this.state.error}</h2> }\n        <h2>Create an account!</h2>\n        <form className=\"Askd-form\" onSubmit={this.register}>\n          <label htmlFor=\"register-username\">Username</label>\n          <input autoComplete=\"off\" type=\"text\" name=\"username\"\n                 id=\"register-username\" />\n\n          <label htmlFor=\"register-email\">Email</label>\n          <input autoComplete=\"off\" type=\"text\" name=\"email\"\n                 id=\"register-email\" />\n\n          <label htmlFor=\"register-password\">Password</label>\n          <input autoComplete=\"off\" type=\"password\" name=\"password\"\n                 id=\"register-password\" />\n\n          <label htmlFor=\"register-confirm-password\">Confirm password</label>\n          <input autoComplete=\"off\" type=\"password\" name=\"confirmPassword\"\n                 id=\"register-confirm-password\" />\n\n          <input className={submitButtonClassName} type=\"submit\" value=\"Register\"\n                 disabled={this.state.loading} />\n        </form>\n      </div>\n    );\n\n    const verifyEmailForm = (\n      <div className=\"Register-form Module-popup\">\n        { this.state.error && <h2>{this.state.error}</h2> }\n        { this.state.success && <h2>{this.state.success}</h2> }\n        <h2>Verify your email!</h2>\n        <p>\n          You should've received an email at {this.state.destination} with a\n          verification code. If it isn't convenient for you to verify your\n          account now, you may do so later by logging in.\n        </p>\n        <form className=\"Askd-form\" onSubmit={this.verifyEmail}>\n          <label htmlFor=\"verification-code\">Verification code</label>\n          <input autoComplete=\"off\" type=\"text\" name=\"code\"\n                 key=\"verification-code\" id=\"verification-code\" />\n\n          <button type=\"button\" onClick={this.resendVerificationEmail}\n                  className=\"Askd-form-link Askd-form-link-bottom\">\n            Didn't get the email? Click here to resend\n          </button>\n\n          <input className={submitButtonClassName} type=\"submit\" value=\"Submit\"\n                 disabled={this.state.loading} />\n        </form>\n      </div>\n    );\n\n    const emailVerifiedBox = (\n      <div className=\"Register-form Module-popup\">\n        <h2>Verification success!</h2>\n        <p className=\"Module-popup-last\">\n          Your email was successfully verified! Click the 'X' button in the\n          top-right corner to return to the site, and you'll be able to login.\n        </p>\n      </div>\n    );\n\n    var currentForm;\n    switch(this.state.screen) {\n      case HeaderState.REGISTER:\n        currentForm = createAccountForm;\n        break;\n      case HeaderState.REGISTER_VERIFY:\n        currentForm = verifyEmailForm;\n        break;\n      case HeaderState.REGISTER_SUCCESS:\n        currentForm = emailVerifiedBox;\n        break;\n      default:\n    }\n\n    return (\n      <div className=\"Module-blocker\">\n        <button onClick={this.close}\n                className=\"Askd-form-close Askd-button Askd-button-circular\">X</button>\n        { currentForm }\n      </div>\n    );\n  }\n}\n\nexport default RegisterForm;\n","import React, { Component } from 'react';\nimport Utils from '../Utils';\nimport HeaderUtils from './HeaderUtils';\nimport UserAuthApi from '../Api/UserAuthApi';\nimport HeaderState from './HeaderState';\n\nclass LoginForm extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      error: '',\n      username: null,\n      destination: null,\n      loading: false,\n      screen: props.screen || HeaderState.LOGIN\n    }\n\n    this.close = this.close.bind(this);\n    this.login = this.login.bind(this);\n    this.enablePasswordRecovery = this.enablePasswordRecovery.bind(this);\n    this.forgotPassword = this.forgotPassword.bind(this);\n    this.resetPassword = this.resetPassword.bind(this);\n    this.resendVerificationEmail = this.resendVerificationEmail.bind(this);\n    this.setLoading = this.setLoading.bind(this);\n  }\n\n  close() {\n    this.props.exitCallback(false);\n  }\n\n  async login(event) {\n    event.preventDefault();\n\n    const form = event.target;\n    const username = form.username.value;\n    const password = form.password.value;\n\n    if(!username || !password) {\n      await Utils.componentSetError(this, \"Please fill out all of the fields.\");\n      return;\n    }\n\n    await this.setLoading(true);\n    try {\n      await UserAuthApi.login(username, password);\n      this.props.exitCallback(true);\n    }\n    catch(err) {\n      if(err.code === 'UserNotConfirmedException') {\n        const destination = await UserAuthApi.resendVerificationEmail(username);\n        await this.props.emailVerificationCallback(username, destination);\n      }\n      else {\n        await Utils.componentSetError(this, err.message);\n      }\n    }\n    await this.setLoading(false);\n  }\n\n  async enablePasswordRecovery(event) {\n    await Utils.setStatePromise(this, {\n      error: '',\n      screen: HeaderState.RECOVERY_USERNAME\n    });\n  }\n\n  async forgotPassword(event) {\n    event.preventDefault();\n\n    const username = event.target.username.value;\n    if(!username) {\n      await Utils.componentsSetError(this, 'Please input your username.');\n      return;\n    }\n\n    await this.setLoading(true);\n    try {\n      const destination = await UserAuthApi.forgotPassword(username);\n\n      await Utils.setStatePromise(this, {\n        error: '',\n        username: username,\n        destination: destination,\n        screen: HeaderState.RECOVERY_PASSWORD\n      });\n    }\n    catch(err) {\n      await Utils.componentSetError(this, err.message);\n    }\n    await this.setLoading(false);\n  }\n\n  async resetPassword(event) {\n    event.preventDefault();\n\n    const form = event.target;\n    const code = form.code.value;\n    const password = form.password.value;\n    const confirmPassword = form.confirmPassword.value;\n\n    if(!code || !password || !confirmPassword) {\n      Utils.componentSetError(this, 'Please fill out all of the fields.');\n      return;\n    }\n\n    const passwordsOk = await HeaderUtils.checkPasswords(this, password, confirmPassword);\n    if(!passwordsOk)\n      return;\n\n    await this.setLoading(true);\n    try {\n      await UserAuthApi.resetPassword(this.state.username, code, password);\n\n      await Utils.setStatePromise(this, {\n        error: '',\n        success: '',\n        screen: HeaderState.RECOVERY_SUCCESS\n      });\n    }\n    catch(err) {\n      await Utils.componentSetError(this, err.message);\n    }\n    await this.setLoading(false);\n  }\n\n  async resendVerificationEmail(event) {\n    try {\n      await UserAuthApi.forgotPassword(this.state.username);\n      await Utils.componentSetSuccess(this, 'Another email has been sent!');\n    }\n    catch(err) {\n      await Utils.componentSetError(this, err.message);\n    }\n  }\n\n  async setLoading(isLoading) {\n    await Utils.setStatePromise(this, {\n      loading: isLoading\n    });\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  render() {\n    let submitButtonClassName = 'Askd-button';\n    if(this.state.loading) {\n      submitButtonClassName += ' Askd-form-loading';\n    }\n\n    const loginForm = (\n      <div className=\"Register-form Module-popup\">\n        { this.state.error && <h2>{this.state.error}</h2> }\n        <h2>Login to your account!</h2>\n        <form className=\"Askd-form\" onSubmit={this.login}>\n          <label htmlFor=\"login-username\">Username or email</label>\n          <input autoComplete=\"off\" type=\"text\" name=\"username\"\n                 key=\"login-username\" id=\"login-username\" />\n\n          <label htmlFor=\"login-password\">Password</label>\n          <input autoComplete=\"off\" type=\"password\" name=\"password\"\n                 key=\"login-password\" id=\"login-password\" />\n\n          <button type=\"button\" onClick={this.enablePasswordRecovery}\n                  className=\"Askd-form-link Askd-form-link-bottom\">\n            Forgot your password?\n          </button>\n\n          <input className={submitButtonClassName} type=\"submit\" value=\"Login\"\n                 disabled={this.state.loading} />\n        </form>\n      </div>\n    );\n\n    const recoveryUsernameForm = (\n      <div className=\"Register-form Module-popup\">\n        { this.state.error && <h2>{this.state.error}</h2> }\n        <h2>Reset your password</h2>\n        <p>\n          Please provide your username or email, so that you can reset your\n          password via an emailed confirmation code.\n        </p>\n        <form className=\"Askd-form\" onSubmit={this.forgotPassword}>\n          <label htmlFor=\"reset-username\">Username or email</label>\n          <input autoComplete=\"off\" type=\"text\" name=\"username\"\n                 key=\"reset-username\" id=\"reset-username\" />\n\n          <input className={submitButtonClassName} type=\"submit\" value=\"Submit\"\n                 disabled={this.state.loading} />\n        </form>\n      </div>\n    );\n\n    const recoveryPasswordForm = (\n      <div className=\"Register-form Module-popup\">\n        { this.state.error && <h2>{this.state.error}</h2> }\n        { this.state.success && <h2>{this.state.success}</h2> }\n        <h2>Reset your password</h2>\n        <p>\n          You should've received an email at { this.state.destination } with a\n          verification code.\n        </p>\n        <form className=\"Askd-form\" onSubmit={this.resetPassword}>\n          <label htmlFor=\"reset-code\">Code</label>\n          <input autoComplete=\"off\" type=\"text\" name=\"code\"\n                 key=\"reset-code\" id=\"reset-code\" />\n\n          <label htmlFor=\"reset-password\">Password</label>\n          <input autoComplete=\"off\" type=\"password\" name=\"password\"\n                 key=\"reset-password\" id=\"reset-password\" />\n\n          <label htmlFor=\"reset-confirm-password\">Confirm password</label>\n          <input autoComplete=\"off\" type=\"password\" name=\"confirmPassword\"\n                 key=\"reset-confirm-password\" id=\"reset-confirm-password\" />\n\n          <button type=\"button\" onClick={this.resendVerificationEmail}\n                  className=\"Askd-form-link Askd-form-link-bottom\">\n            Didn't get the email? Click here to resend\n          </button>\n\n          <input className={submitButtonClassName} type=\"submit\" value=\"Submit\"\n                 disabled={this.state.loading} />\n        </form>\n      </div>\n    );\n\n    const recoveryPasswordSuccess= (\n      <div className=\"Register-form Module-popup\">\n        <h2>Password reset success!</h2>\n        <p>\n          Your password has been reset successfully. You'll now be able to\n          login again.\n        </p>\n      </div>\n    );\n\n    var currentForm;\n    switch(this.state.screen) {\n      case HeaderState.LOGIN:\n        currentForm = loginForm;\n        break;\n      case HeaderState.RECOVERY_USERNAME:\n        currentForm = recoveryUsernameForm;\n        break;\n      case HeaderState.RECOVERY_PASSWORD:\n        currentForm = recoveryPasswordForm;\n        break;\n      case HeaderState.RECOVERY_SUCCESS:\n        currentForm = recoveryPasswordSuccess;\n        break;\n      default:\n    }\n\n    return (\n      <div className=\"Module-blocker\">\n        <button onClick={this.close}\n                className=\"Askd-form-close Askd-button Askd-button-circular\">X</button>\n        { currentForm }\n      </div>\n    );\n  }\n}\n\nexport default LoginForm;\n","import React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport UserAuthApi from '../Api/UserAuthApi';\nimport '../css/UserMenu.css'\n\nclass UserMenu extends Component {\n  constructor(props) {\n    super(props);\n\n    this.logout = this.logout.bind(this);\n  }\n\n  async logout() {\n    await UserAuthApi.logout();\n    await this.props.logoutCallback();\n  }\n\n  render() {\n    return (\n      <div className=\"User-menu\">\n        <ol>\n          <li>\n            <Link className=\"Header-menu-button\" onClick={this.props.closeCallback}\n                  to={`/users/${this.props.username}`}>\n                  Your profile\n            </Link>\n          </li>\n          <div className=\"User-menu-divider\"></div>\n          <li className=\"User-menu-not-link\">\n            <button className=\"Header-menu-button\">\n              Settings\n            </button>\n          </li>\n          <li className=\"User-menu-not-link\">\n            <button className=\"Header-menu-button\" onClick={this.logout}>\n              Logout\n            </button>\n          </li>\n        </ol>\n      </div>\n    );\n  }\n}\n\nexport default UserMenu;\n","import React, { Component } from 'react';\nimport Utils from '../Utils';\nimport RegisterForm from './RegisterForm';\nimport LoginForm from './LoginForm';\nimport UserMenu from './UserMenu';\nimport UserAuthApi from '../Api/UserAuthApi';\n\nclass HeaderAuth extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      username: null,\n      showRegisterForm: false,\n      showLoginForm: false,\n      showUserMenu: false,\n      unverifiedAccountUsername: null,\n      unverifiedAccountDestination: null\n    };\n\n    this.refreshUsername = this.refreshUsername.bind(this);\n    this.toggleRegisterForm = this.toggleRegisterForm.bind(this);\n    this.toggleLoginForm = this.toggleLoginForm.bind(this);\n    this.toggleUserMenu = this.toggleUserMenu.bind(this);\n    this.hideUserMenu = this.hideUserMenu.bind(this);\n    this.afterLogin = this.afterLogin.bind(this);\n    this.unverifiedAccount = this.unverifiedAccount.bind(this);\n\n    window.suggestUserRegister = this.toggleRegisterForm;\n  }\n\n  async refreshUsername() {\n    const username = await UserAuthApi.getUsername();\n\n    await Utils.setStatePromise(this, {\n      username: username,\n      showUserMenu: false,\n      unverifiedAccountUsername: null\n    });\n  }\n\n  async componentDidMount() {\n    await this.refreshUsername();\n  }\n\n  async toggleRegisterForm(event) {\n    if(this.state.showRegisterForm) {\n      await Utils.setStatePromise(this, {\n        unverifiedAccountUsername: null,\n        unverifiedAccountDestination: null\n      });\n    }\n\n    await Utils.setStatePromise(this, {\n      showRegisterForm: !this.state.showRegisterForm\n    });\n  }\n\n  async toggleLoginForm(event) {\n    await Utils.setStatePromise(this, {\n      showLoginForm: !this.state.showLoginForm\n    });\n  }\n\n  async toggleUserMenu(event) {\n    await Utils.setStatePromise(this, {\n      showUserMenu: !this.state.showUserMenu\n    });\n  }\n\n  async hideUserMenu(event) {\n    const focusedElement = event.relatedTarget;\n    if(focusedElement && focusedElement.classList.contains('Header-menu-button'))\n      return;\n\n    await Utils.setStatePromise(this, {\n      showUserMenu: false\n    });\n  }\n\n  async afterLogin(loggedIn) {\n    await this.toggleLoginForm();\n\n    if(loggedIn)\n      await this.refreshUsername();\n  }\n\n  async unverifiedAccount(username, destination) {\n    await Utils.setStatePromise(this, {\n      showLoginForm: false,\n      showRegisterForm: true,\n      unverifiedAccountUsername: username,\n      unverifiedAccountDestination: destination\n    });\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  render() {\n    const loginButtons = (\n      <div className=\"Header-top-right\">\n        <button className=\"Header-menu-button\" onClick={this.toggleLoginForm}>\n          Login\n        </button>\n        <span className=\"Header-divider\"></span>\n        <button className=\"Header-menu-button\" onClick={this.toggleRegisterForm}>\n          Create an account\n        </button>\n      </div>\n    );\n\n    const loggedInButton = (\n      <div className=\"Header-logged-in\" tabIndex=\"-1\"\n           onBlur={this.hideUserMenu}>\n        <div className=\"Header-top-right\">\n          <button className=\"Header-menu-button\" onClick={this.toggleUserMenu}>\n            { this.state.username }\n          </button>\n        </div>\n        <div className=\"Header-user-menu\">\n          {\n            this.state.showUserMenu &&\n            <UserMenu username={this.state.username}\n                      closeCallback={this.toggleUserMenu}\n                      logoutCallback={this.refreshUsername} />\n          }\n        </div>\n      </div>\n    );\n\n    const topRightButtons = this.state.username ? loggedInButton : loginButtons;\n\n    return (\n      <>\n        {\n          this.state.showRegisterForm &&\n          <RegisterForm exitCallback={this.toggleRegisterForm}\n                        unverifiedAccountUsername=\n                        {this.state.unverifiedAccountUsername}\n                        unverifiedAccountDestination=\n                        {this.state.unverifiedAccountDestination} />\n        }\n        {\n          this.state.showLoginForm &&\n          <LoginForm exitCallback={this.afterLogin}\n                     emailVerificationCallback={this.unverifiedAccount} />\n        }\n        { topRightButtons }\n      </>\n    );\n  }\n}\n\nexport default HeaderAuth;\n","import React from 'react';\nimport { Link, useLocation } from 'react-router-dom';\nimport HeaderAuth from './HeaderAuth';\nimport '../css/Header.css';\n\nfunction Header() {\n  const path = useLocation().pathname;\n  const big = (path === '/' || path === '/home');\n  const outerClassName = big ? 'Header' : 'Header-small';\n\n  return (\n    <div className={outerClassName}>\n      { big && <h1>cp-notes beta</h1> }\n      <ul>\n        <li>\n          <Link to=\"/home\">Home</Link>\n        </li>\n        <li>\n          <Link to=\"/users\">Users</Link>\n        </li>\n      </ul>\n      <HeaderAuth />\n      <span className=\"Header-bottom\"></span>\n    </div>\n  );\n}\n\nexport default Header;\n","const ContentType = Object.freeze({\n  MATH: (1 << 0),\n  BOLD: (1 << 1),\n  ITALIC: (1 << 2),\n  UNDERLINE: (1 << 3)\n});\n\nexport default ContentType;\n","import ContentType from './ContentType';\n\nclass MaskManager {\n  static toolbarMergeBit(bit, on, originalMask) {\n    if(bit === ContentType.MATH) {\n      if(on) return bit;\n      return 0;\n    }\n    else {\n      if(originalMask & ContentType.MATH) {\n        originalMask ^= ContentType.MATH;\n      }\n      return originalMask ^ bit;\n    }\n  }\n\n  static editorMergeBit(bit, on, originalMask) {\n    if(bit === ContentType.MATH) {\n      if(on) return bit;\n\n      if(originalMask & bit) originalMask ^= bit;\n      return originalMask;\n    }\n    else {\n      if(originalMask & ContentType.MATH) originalMask = 0;\n      if(on) return originalMask | bit;\n\n      if(originalMask & bit) originalMask ^= bit;\n      return originalMask;\n    }\n  }\n\n  static getClassName(mask) {\n    let className = '';\n    for(const style in ContentType) {\n      if(mask & ContentType[style]) {\n        className += `Askd-te-${style} `;\n      }\n    }\n    return className;\n  }\n}\n\nexport default MaskManager;\n","import MaskManager from './MaskManager';\n\nfunction lessThan(a, b, c, d) {\n  if(a === c)\n    return b < d;\n  return a < c;\n}\n\nclass Caret {\n  constructor(id) {\n    this.id = id;\n  }\n\n  getInfo() {\n    const selection = window.getSelection();\n    let anchorElement = selection.anchorNode.parentElement;\n    let focusElement = selection.focusNode.parentElement;\n    let originalAnchorElement = anchorElement;\n    let originalFocusElement = focusElement;\n\n    let anchorMathBlock = this.getContainingMathBlock(anchorElement);\n    let focusMathBlock = this.getContainingMathBlock(focusElement);\n    if(anchorMathBlock) anchorElement = anchorMathBlock;\n    if(focusMathBlock) focusElement = focusMathBlock;\n\n    let anchorIndex = anchorElement.getAttribute('index');\n    let focusIndex = focusElement.getAttribute('index');\n    let anchorOffset = anchorElement.getAttribute('position');\n    let focusOffset = focusElement.getAttribute('position');\n    let insideCaretBlock = anchorElement.getAttribute('id') === 'Askd-te-CARET';\n\n    if(anchorIndex === null || focusIndex === null) {\n      return {\n        rangeSelect: false,\n        index: 0,\n        position: 0,\n        insideCaretBlock: false,\n        editorSelected: true\n      };\n    }\n\n    if(originalAnchorElement.classList.contains('Askd-te-MATHJAX') &&\n       selection.anchorOffset === 0) {\n      anchorOffset = 0;\n    }\n    if(originalFocusElement.classList.contains('Askd-te-MATHJAX') &&\n       selection.focusOffset === 0) {\n      focusOffset = 0;\n    }\n\n    if(anchorOffset === null) anchorOffset = selection.anchorOffset;\n    if(focusOffset === null) focusOffset = selection.focusOffset;\n\n    anchorIndex = Number(anchorIndex);\n    anchorOffset = Number(anchorOffset);\n    focusIndex = Number(focusIndex);\n    focusOffset = Number(focusOffset);\n\n    if(anchorIndex === focusIndex && anchorOffset === focusOffset) {\n      return {\n        rangeSelect: false,\n        index: anchorIndex,\n        position: anchorOffset,\n        insideCaretBlock: insideCaretBlock,\n        editorSelected: true\n      };\n    }\n\n    if(!lessThan(anchorIndex, anchorOffset, focusIndex, focusOffset)) {\n      [ anchorIndex, focusIndex ] = [ focusIndex, anchorIndex ];\n      [ anchorOffset, focusOffset ] = [ focusOffset, anchorOffset ];\n    }\n\n    return {\n      rangeSelect: true,\n      leftIndex: anchorIndex,\n      leftPosition: anchorOffset,\n      rightIndex: focusIndex,\n      rightPosition: focusOffset,\n      editorSelected: true\n    };\n  }\n\n  setInfo(newCaretInfo, editorMask) {\n    if(newCaretInfo.rangeSelect) {\n      this.removeCaretBlock();\n      this.setRangePosition(\n        newCaretInfo.leftIndex, newCaretInfo.leftPosition,\n        newCaretInfo.rightIndex, newCaretInfo.rightPosition\n      );\n    }\n    else if(newCaretInfo.insideCaretBlock) {\n      this.addCaretBlock(newCaretInfo.index, newCaretInfo.position, editorMask);\n      this.setPosition(-1, 1);\n    }\n    else {\n      this.removeCaretBlock();\n      this.setPosition(newCaretInfo.index, newCaretInfo.position);\n    }\n  }\n\n  setPosition(index, position) {\n    let blockElement;\n    if(index >= 0) {\n      blockElement = document.getElementById(this.id + index);\n    }\n    else {\n      blockElement = document.getElementById('Askd-te-CARET');\n    }\n\n    let textNode = blockElement.childNodes[0];\n    if(!textNode) {\n      textNode = document.createTextNode('');\n      blockElement.appendChild(textNode);\n    }\n\n    let range = document.createRange();\n    range.setStart(textNode, position);\n    range.collapse(true);\n\n    let selection = window.getSelection();\n    selection.removeAllRanges();\n    selection.addRange(range);\n  }\n\n  setRangePosition(leftIndex, leftPosition, rightIndex, rightPosition) {\n    const leftBlockElement = document.getElementById(this.id + leftIndex);\n    const rightBlockElement = document.getElementById(this.id + rightIndex);\n    const leftTextNode = leftBlockElement.childNodes[0];\n    const rightTextNode = rightBlockElement.childNodes[0];\n\n    let range = document.createRange();\n    range.setStart(leftTextNode, leftPosition);\n    range.setEnd(rightTextNode, rightPosition);\n\n    let selection = window.getSelection();\n    selection.removeAllRanges();\n    selection.addRange(range);\n  }\n\n  addCaretBlock(index, position, editorMask) {\n    this.removeCaretBlock();\n\n    let caretBlock = document.createElement('div');\n    caretBlock.setAttribute('id', 'Askd-te-CARET');\n    caretBlock.setAttribute('index', index);\n    caretBlock.setAttribute('position', position);\n    caretBlock.setAttribute('class', MaskManager.getClassName(editorMask));\n    caretBlock.innerHTML = String.fromCharCode(8203);\n\n    let nextBlock = document.getElementById(this.id + (index + 1));\n    nextBlock.parentElement.insertBefore(caretBlock, nextBlock);\n  }\n\n  removeCaretBlock() {\n    let existingCaretBlock = document.getElementById('Askd-te-CARET');\n    if(existingCaretBlock) {\n      existingCaretBlock.parentElement.removeChild(existingCaretBlock);\n      return true;\n    }\n    return false;\n  }\n\n  getContainingMathBlock(element) {\n    while(element) {\n      if(element.classList.contains('Askd-te-MATHJAX')) {\n        return element;\n      }\n      element = element.parentElement;\n    }\n    return null;\n  }\n}\n\nexport default Caret;\n","import React, { Component } from 'react';\nimport ContentType from './ContentType';\n\nclass Toolbar extends Component {\n  render() {\n    const boldSelected = (this.props.mask & ContentType.BOLD) > 0;\n    const italicSelected = (this.props.mask & ContentType.ITALIC) > 0;\n    const underlineSelected = (this.props.mask & ContentType.UNDERLINE) > 0;\n    const mathSelected = (this.props.mask & ContentType.MATH) > 0;\n\n    return (\n      <div className=\"Askd-text-editor-toolbar\">\n        <ul>\n          <li className={`Askd-tb-selected-${boldSelected}`}>\n            <button type=\"button\" className=\"Askd-tb-icon Askd-tb-BOLD\"\n                    onClick={() => this.props.callback(ContentType.BOLD)} />\n          </li>\n          <li className={`Askd-tb-selected-${italicSelected}`}>\n            <button type=\"button\" className=\"Askd-tb-icon Askd-tb-ITALIC\"\n                    onClick={() => this.props.callback(ContentType.ITALIC)} />\n          </li>\n          <li className={`Askd-tb-selected-${underlineSelected}`}>\n            <button type=\"button\" className=\"Askd-tb-icon Askd-tb-UNDERLINE\"\n                    onClick={() => this.props.callback(ContentType.UNDERLINE)} />\n          </li>\n          <li className={`Askd-tb-selected-${mathSelected}`}>\n            <button type=\"button\" className=\"Askd-tb-icon Askd-tb-MATH\"\n                    onClick={() => this.props.callback(ContentType.MATH)} />\n          </li>\n        </ul>\n      </div>\n    );\n  }\n}\n\nexport default Toolbar;\n","import MaskManager from './MaskManager';\nimport ContentType from './ContentType';\n\n/* This is different from str.length; for example, emojis can use up 2 or more */\nfunction countCharacters(str) {\n  let counter = 0;\n  for(const character of str) {\n    Number(character);  // Silence unused variable linter warning\n    counter++;\n  }\n  return counter;\n}\n\nclass VirtualTextEditor {\n  constructor(initialContent) {\n    this.characters = [];\n    this.caretBlockIndex = null;\n    this.caretBlockPosition = null;\n\n    if(initialContent) {\n      for(const block of initialContent) {\n        const mask = block.m;\n        for(const char of block.c) {\n          this.characters.push({\n            m: mask,\n            c: char\n          });\n        }\n      }\n\n      /* Remove extra newline character if it exists */\n      this.characters.splice(this.characters.length - 1);\n    }\n\n    this.updateBlocks();\n  }\n\n  getIndexAndPosition(globalIndex) {\n    let charactersScanned = 0;\n    for(let i = 0; i < this.blocks.length; i++) {\n      const block = this.blocks[i];\n      const blockLength = countCharacters(block.c);\n      const blockEndIndex = charactersScanned + blockLength;\n\n      if(globalIndex <= blockEndIndex) {\n        let position = 0;\n        for(let j = charactersScanned; j <= blockEndIndex; j++) {\n          if(globalIndex === j) {\n            return [ i, position ];\n          }\n          position += this.characters[j].c.length;\n        }\n      }\n      charactersScanned += blockLength;\n    }\n\n    return [ null, null ];\n  }\n\n  getGlobalIndex(index, position) {\n    let globalIndex = this.blockStarts[index];\n    let characterCounter = 0;\n    while(characterCounter < position && globalIndex < this.characters.length) {\n      characterCounter += this.characters[globalIndex].c.length;\n      globalIndex++;\n    }\n\n    if(characterCounter <= position)\n      return globalIndex;\n\n    return globalIndex - 1;\n  }\n\n  /* Visually identical caret positions can have two different indices\n  and positions if it's in the middle of two blocks. This method returns the end\n  position of the first block if rangeEnd is false and the starting position\n  of the second block otherwise. */\n  getCorrectedIndexAndPosition(index, position, rangeEnd, globalIndex=null) {\n    if(globalIndex === null) {\n      globalIndex = this.getGlobalIndex(index, position);\n    }\n\n    const firstBlockEnd = this.getIndexAndPosition(globalIndex);\n    if(rangeEnd && globalIndex < this.characters.length) {\n      const nextBlockGlobalIndex = this.getGlobalIndex(firstBlockEnd[0] + 1, 0);\n      if(globalIndex === nextBlockGlobalIndex) {\n        return [ firstBlockEnd[0] + 1, 0 ];\n      }\n    }\n    return firstBlockEnd;\n  }\n\n  getCharacterMask(index, position, rangeSelect) {\n    const globalIndex = this.getGlobalIndex(index, position);\n\n    if(globalIndex === 0) {\n      if(this.characters.length > 0)\n        return this.characters[0].m;\n      return 0;\n    }\n    else if(rangeSelect) {\n      return this.characters[globalIndex].m;\n    }\n    return this.characters[globalIndex - 1].m;\n  }\n\n  insert(index, position, insertedString, mask) {\n    const globalIndex = this.getGlobalIndex(index, position);\n    const rightBuffer = this.characters.splice(globalIndex);\n\n    for(const char of insertedString) {\n      this.characters.push({\n        m: mask,\n        c: char\n      });\n    }\n\n    const globalCaretPosition = this.characters.length;\n    for(const character of rightBuffer) {\n      this.characters.push(character);\n    }\n\n    this.caretBlockIndex = null;\n    this.caretBlockPosition = null;\n\n    this.updateBlocks();\n    return this.getIndexAndPosition(globalCaretPosition);\n  }\n\n  delete(leftIndex, leftPosition, rightIndex, rightPosition) {\n    const globalLeftIndex = this.getGlobalIndex(leftIndex, leftPosition);\n    const globalRightIndex = this.getGlobalIndex(rightIndex, rightPosition);\n    const deleteLength = globalRightIndex - globalLeftIndex;\n\n    if(globalLeftIndex < 0) {\n      return [ 0, 0 ];\n    }\n\n    this.characters.splice(globalLeftIndex, deleteLength);\n    const globalCaretPosition = globalLeftIndex;\n\n    this.caretBlockIndex = null;\n    this.caretBlockPosition = null;\n\n    this.updateBlocks();\n    return this.getIndexAndPosition(globalCaretPosition);\n  }\n\n  rangeMaskUpdate(leftIndex, leftPosition, rightIndex, rightPosition, bit, on) {\n    const globalLeftIndex = this.getGlobalIndex(leftIndex, leftPosition);\n    const globalRightIndex = this.getGlobalIndex(rightIndex, rightPosition);\n\n    for(let i = globalLeftIndex; i < globalRightIndex; i++) {\n      this.characters[i].m = MaskManager.editorMergeBit(bit, on, this.characters[i].m);\n    }\n\n    this.caretBlockIndex = null;\n    this.caretBlockPosition = null;\n    this.updateBlocks();\n\n    const [ newLeftIndex, newLeftPosition ] = this.getIndexAndPosition(globalLeftIndex);\n    const [ newRightIndex, newRightPosition ] = this.getIndexAndPosition(globalRightIndex);\n    return [ newLeftIndex, newLeftPosition, newRightIndex, newRightPosition ];\n  }\n\n  addCaretBlock(index, position) {\n    this.caretBlockIndex = index;\n    this.caretBlockPosition = position;\n    this.updateBlocks();\n  }\n\n  /* Removes the caret block, and appropriately modifies caretInfo if provided */\n  removeCaretBlock(caretInfo) {\n    if(this.caretBlockIndex !== null) {\n      this.caretBlockIndex = null;\n      this.caretBlockPosition = null;\n\n      if(caretInfo) {\n        if(caretInfo.rangeSelect) {\n          let leftGlobalIndex = this.getGlobalIndex(\n            caretInfo.leftIndex, caretInfo.leftPosition\n          );\n\n          let rightGlobalIndex = this.getGlobalIndex(\n            caretInfo.rightIndex, caretInfo.rightPosition\n          );\n\n          this.updateBlocks();\n\n          [ caretInfo.leftIndex, caretInfo.leftPosition ] =\n            this.getCorrectedIndexAndPosition(null, null, false, leftGlobalIndex);\n          [ caretInfo.rightIndex, caretInfo.rightPosition ] =\n            this.getCorrectedIndexAndPosition(null, null, true, rightGlobalIndex);\n        }\n        else {\n          let globalIndex = this.getGlobalIndex(caretInfo.index, caretInfo.position);\n          this.updateBlocks();\n          [ caretInfo.index, caretInfo.position ] =\n            this.getCorrectedIndexAndPosition(null, null, false, globalIndex);\n        }\n      }\n      else {\n        this.updateBlocks();\n      }\n    }\n  }\n\n  isEmpty() {\n    return this.characters.length === 0;\n  }\n\n  /* Returns true if content is empty, or the caret position is at the end of\n  a block and the last character is a newline. This is important for mobile. */\n  atBlockNewlineEnd(index, position) {\n    if(this.isEmpty()) return true;\n    let content = this.blocks[index].c;\n    if(content.length === position && content[position - 1] === String.fromCharCode(10))\n       return true;\n    return false;\n  }\n\n  updateBlocks() {\n    this.blocks = [];\n    this.blockStarts = [];\n\n    let currentMask = this.characters.length > 0 ? this.characters[0].m : 0;\n    let characterBuffer = [];\n    let blockPosition = 0;\n    this.characters.forEach((character, i) => {\n      /* For math mode, replace newlines with spaces */\n      if(character.m === ContentType.MATH && character.c === String.fromCharCode(10)) {\n        character.c = ' ';\n      }\n\n      let caretBlockIncoming = this.blocks.length === this.caretBlockIndex &&\n        blockPosition === this.caretBlockPosition;\n\n      /* End of this block */\n      if(character.m !== currentMask || caretBlockIncoming) {\n        if(characterBuffer.length === 0) {\n          currentMask = 0;\n        }\n\n        this.blocks.push({\n          m: currentMask,\n          c: characterBuffer.join('')\n        });\n        this.blockStarts.push(i - characterBuffer.length);\n\n        blockPosition = character.c.length;\n        currentMask = character.m;\n        characterBuffer = [ character.c ];\n      }\n      else {\n        characterBuffer.push(character.c);\n        blockPosition += character.c.length;\n      }\n    });\n\n    this.blocks.push({\n      m: currentMask,\n      c: characterBuffer.join('')\n    });\n    this.blockStarts.push(this.characters.length - characterBuffer.length);\n\n    /* Extra newline character sets correct caret positioning */\n    this.blocks.push({\n      m: 0,\n      c: String.fromCharCode(10)\n    });\n\n    this.blockStarts.push(this.characters.length);\n  }\n\n  getContent() {\n    return this.blocks;\n  }\n}\n\nexport default VirtualTextEditor;\n","import React, { useEffect, useMemo } from 'react';\nimport Utils from '../../Utils';\n\nfunction MathBlock({ id, index, content, rendered }) {\n  let textContent = rendered ? '\\\\(' + content + '\\\\)' : content;\n  let className = rendered ? 'Askd-te-MATHJAX' : 'Askd-te-MATH';\n  let position = rendered ? content.length : null;\n\n  /* MathJax must be re-rendered when one of the following attributes change */\n  let changeKey = useMemo(() => {\n    return {\n      id: id, rendered: rendered, blockLength: content.length\n    };\n  }, [ id, rendered, content.length ]);\n\n  /* Render MathJax and put a zero-width space before and after,\n  in order to help caret selection */\n  useEffect(() => {\n    if(changeKey.rendered) {\n      Utils.renderMathJax([`#${changeKey.id}`]);\n\n      let blockElement = document.getElementById(changeKey.id);\n      blockElement.innerHTML = String.fromCharCode(8203) +\n        blockElement.innerHTML + String.fromCharCode(8203);\n    }\n  }, [changeKey]);\n\n  return (\n    <div className={className} id={id} index={index} position={position}>\n      { textContent }\n    </div>\n  );\n}\n\nexport default MathBlock;\n","import React, { Component } from 'react';\nimport ContentType from '../ContentType';\nimport MaskManager from '../MaskManager';\nimport MathBlock from './MathBlock';\n\nclass Block extends Component {\n  render() {\n    const block = this.props.block;\n    const editorId = this.props.id;\n    const selected = this.props.selected;\n    const index = this.props.index;\n    const content = block.c;\n\n    if(block.m === ContentType.MATH) {\n      return (\n        <MathBlock id={editorId + index} rendered={!selected} content={content}\n                   index={index} />\n      );\n    }\n\n    return (\n      <div className={MaskManager.getClassName(block.m)} id={editorId + index}\n           index={index}>\n        { content }\n      </div>\n    );\n  }\n}\n\nexport default Block;\n","import React from 'react';\nimport Block from './Block/Block';\n\nfunction TextEditorContent({ content, id, editable, caretInfo, handleBlur, handleFocus }) {\n  let contentElements = [];\n\n  content.forEach((block, i) => {\n    let selected = false;\n\n    if(editable && caretInfo.editorSelected) {\n      if(caretInfo.rangeSelect && caretInfo.leftIndex <= i && i <= caretInfo.rightIndex) {\n        selected = true;\n      }\n      if(!caretInfo.rangeSelect && caretInfo.index === i && !caretInfo.insideCaretBlock) {\n        selected = true;\n      }\n    }\n\n    contentElements.push(\n      <Block block={block} id={id} index={i} key={i} selected={selected} />\n    );\n  });\n\n  return (\n    <div className=\"Askd-text-editor-text\" id={id} tabIndex=\"0\"\n         contentEditable={editable} suppressContentEditableWarning=\"true\"\n         spellCheck=\"false\" onBlur={handleBlur} onFocus={handleFocus}>\n         { contentElements }\n    </div>\n  );\n}\n\nexport default TextEditorContent;\n","import ContentType from './ContentType';\n\nconst registerEventHandlers = (that) => {\n  that.textEditor.addEventListener('keydown', async (event) => {\n    let mathSelected = (that.state.editorMask & ContentType.MATH) > 0;\n\n    /* TBD, bro who even uses that button lol */\n    if(event.key === 'Delete') {\n      event.preventDefault();\n    }\n    else if(event.key === 'Backspace' && !that.composing) {\n      await that.delete();\n      event.preventDefault();\n    }\n    else if(event.key === 'Enter' && !that.composing && !mathSelected) {\n      await that.insert(String.fromCharCode(10));\n      event.preventDefault();\n    }\n  });\n\n  that.textEditor.addEventListener('beforeinput', async (event) => {\n    if(event.isComposing || that.composing) {\n      return;\n    }\n\n    event.preventDefault();\n\n    /* Mobile autocorrect and word selection from a menu */\n    if(event.inputType === 'insertReplacementText') {\n      that.caretInfo.rangeSelect = true;\n      const insertedString = event.dataTransfer.getData('text');\n      await that.insert(insertedString);\n    }\n    /* Generic event with a valid 'data'; things like undo/redo operations and\n       drag and drop are TBD */\n    else if(event.data) {\n      await that.insert(event.data);\n    }\n  });\n\n  that.textEditor.addEventListener('paste', async (event) => {\n    event.preventDefault();\n\n    const pasteText = event.clipboardData.getData('Text');\n    await that.insert(pasteText);\n  });\n\n  that.textEditor.addEventListener('compositionstart', async (event) => {\n    if(that.caretInfo.rangeSelect) {\n      await that.delete();\n    }\n\n    that.composing = true;\n    that.compositionIndex = that.caretInfo.index;\n    that.compositionPosition = that.caretInfo.position;\n  });\n\n  that.textEditor.addEventListener('compositionend', async (event) => {\n    if(!that.composing) {\n      return;\n    }\n\n    that.composing = false;\n    await that.compositionInsert(event.data);\n  });\n\n  let handleSelectionChange = (event) => {\n    if(that.composing) {\n      return;\n    }\n\n    let selectionChanged = false;\n    try {\n      const selection = window.getSelection();\n      const anchorNode = selection.anchorNode;\n\n      if(that.textEditor.contains(anchorNode)) {\n        const newCaretInfo = that.caret.getInfo();\n        for(const key in newCaretInfo) {\n          if(newCaretInfo.hasOwnProperty(key) &&\n             that.caretInfo[key] !== newCaretInfo[key]) {\n            selectionChanged = true;\n          }\n        }\n      }\n    }\n    catch(err) {\n      /* anchorElement isn't a div inside the text editor */\n    }\n\n    if(selectionChanged) {\n      that.selectionChanged();\n    }\n  };\n\n  document.addEventListener('selectionchange', handleSelectionChange);\n\n  return handleSelectionChange;\n}\n\nexport default registerEventHandlers;\n","import React, { Component } from 'react';\nimport Caret from './Caret';\nimport Toolbar from './Toolbar';\nimport VirtualTextEditor from './VirtualTextEditor';\nimport TextEditorContent from './TextEditorContent';\nimport MaskManager from './MaskManager';\nimport Utils from '../Utils';\nimport registerEventHandlers from './registerEventHandlers';\nimport '../css/TextEditor.css';\n\nclass TextEditor extends Component {\n  constructor(props) {\n    super(props);\n\n    this.id = this.props.uniqueKey ?\n                `Askd-text-editor${this.props.uniqueKey}` : 'Askd-text-editor';\n    this.virtualTextEditor = new VirtualTextEditor(this.props.initialContent);\n    this.caret = new Caret(this.id);\n\n    this.contentChanged = false;\n    this.caretInfo = {\n      rangeSelect: false,\n      index: 0,\n      position: 0,\n      editorSelected: false,\n      insideCaretBlock: false\n    };\n\n    this.composing = false;\n    this.compositionIndex = null;\n    this.compositionPosition = null;\n\n    this.state = {\n      content: this.virtualTextEditor.getContent(),\n      editorMask: 0\n    };\n\n    this.toolbarUpdate = this.toolbarUpdate.bind(this);\n  }\n\n  async delete() {\n    if(!this.caretInfo.rangeSelect) {\n      [ this.caretInfo.index, this.caretInfo.position ] = this.virtualTextEditor.delete(\n        this.caretInfo.index, this.caretInfo.position - 1,\n        this.caretInfo.index, this.caretInfo.position\n      );\n    }\n    else {\n      [ this.caretInfo.index, this.caretInfo.position ] = this.virtualTextEditor.delete(\n        this.caretInfo.leftIndex, this.caretInfo.leftPosition,\n        this.caretInfo.rightIndex, this.caretInfo.rightPosition\n      );\n    }\n\n    this.caretInfo.rangeSelect = false;\n    await this.insertionUpdate();\n  }\n\n  async insert(newString) {\n    this.updateCaretInfo();\n\n    if(this.caretInfo.rangeSelect) {\n      await this.delete();\n    }\n\n    [ this.caretInfo.index, this.caretInfo.position ] = this.virtualTextEditor.insert(\n      this.caretInfo.index, this.caretInfo.position, newString,\n      this.state.editorMask\n    );\n\n    this.caretInfo.rangeSelect = false;\n    await this.insertionUpdate();\n  }\n\n  async compositionInsert(newString) {\n    [ this.caretInfo.index, this.caretInfo.position ] = this.virtualTextEditor.insert(\n      this.compositionIndex, this.compositionPosition, newString,\n      this.state.editorMask\n    );\n\n    this.caretInfo.rangeSelect = false;\n    await this.insertionUpdate();\n  }\n\n  async rangeMaskUpdate(bit, on) {\n    if(!this.caretInfo.rangeSelect) {\n      return;\n    }\n\n    [ this.caretInfo.leftIndex, this.caretInfo.leftPosition,\n      this.caretInfo.rightIndex, this.caretInfo.rightPosition ] =\n    this.virtualTextEditor.rangeMaskUpdate(\n      this.caretInfo.leftIndex, this.caretInfo.leftPosition,\n      this.caretInfo.rightIndex, this.caretInfo.rightPosition, bit, on\n    );\n\n    await this.insertionUpdate();\n  }\n\n  async insertionUpdate() {\n    this.contentChanged = true;\n    this.caret.removeCaretBlock();\n    this.caretInfo.insideCaretBlock = false;\n\n    await this.updateContent();\n    this.caret.setInfo(this.caretInfo, this.state.editorMask);\n    await this.selectionChanged();\n  }\n\n  async updateContent() {\n    await Utils.setStatePromise(this, {\n      content: this.virtualTextEditor.getContent()\n    });\n  }\n\n  async updateMask(newMask) {\n    await Utils.setStatePromise(this, {\n      editorMask: newMask\n    });\n  }\n\n  async toolbarUpdate(bit) {\n    this.caretInfo.editorSelected = true;\n\n    const on = (this.state.editorMask & bit) === 0;\n    const newToolbarMask = MaskManager.toolbarMergeBit(bit, on, this.state.editorMask);\n\n    if(!this.caretInfo.rangeSelect) {\n      const leftCharacterMask = this.virtualTextEditor.getCharacterMask(\n        this.caretInfo.index, this.caretInfo.position, false\n      );\n\n      let previouslyInsideCaretBlock = this.caretInfo.insideCaretBlock;\n      this.caretInfo.insideCaretBlock = newToolbarMask !== leftCharacterMask ||\n        this.virtualTextEditor.atBlockNewlineEnd(\n          this.caretInfo.index, this.caretInfo.position\n        );\n\n      if(this.caretInfo.insideCaretBlock) {\n        this.virtualTextEditor.addCaretBlock(\n          this.caretInfo.index, this.caretInfo.position\n        );\n        await this.updateContent();\n      }\n      else {\n        if(previouslyInsideCaretBlock) {\n          this.virtualTextEditor.removeCaretBlock();\n          await this.updateContent();\n        }\n      }\n\n      await this.updateMask(newToolbarMask);\n      this.caret.setInfo(this.caretInfo, this.state.editorMask);\n    }\n    else {\n      await this.rangeMaskUpdate(bit, on);\n    }\n  }\n\n  async selectionChanged() {\n    let previouslyInsideCaretBlock = this.caretInfo.insideCaretBlock;\n    this.updateCaretInfo();\n\n    if(previouslyInsideCaretBlock) {\n      this.virtualTextEditor.removeCaretBlock(this.caretInfo);\n      this.caret.removeCaretBlock();\n      await this.updateContent();\n      this.caret.setInfo(this.caretInfo, this.state.editorMask);\n    }\n\n    if(this.caretInfo.rangeSelect) {\n      let updateCaret = false;\n      const leftElement = document.getElementById(this.id + this.caretInfo.leftIndex);\n      const rightElement = document.getElementById(this.id + this.caretInfo.rightIndex);\n\n      const leftElementLength = this.state.content[this.caretInfo.leftIndex].c.length;\n      const atLeftElementEnd = (this.caretInfo.leftPosition === leftElementLength);\n      const atRightElementBegin = (this.caretInfo.rightPosition === 0);\n\n      if(leftElement.classList.contains('Askd-te-MATHJAX') && !atLeftElementEnd)\n        updateCaret = true;\n      if(rightElement.classList.contains('Askd-te-MATHJAX') && !atRightElementBegin)\n        updateCaret = true;\n\n      let leftCharacterMask = this.virtualTextEditor.getCharacterMask(\n        this.caretInfo.leftIndex, this.caretInfo.leftPosition, true\n      );\n      await this.updateMask(leftCharacterMask);\n\n      if(updateCaret) {\n        this.caret.setInfo(this.caretInfo, this.state.editorMask);\n      }\n    }\n    else {\n      let leftCharacterMask = this.virtualTextEditor.getCharacterMask(\n        this.caretInfo.index, this.caretInfo.position, false\n      );\n      await this.updateMask(leftCharacterMask);\n      this.caret.setInfo(this.caretInfo, this.state.editorMask);\n    }\n  }\n\n  updateCaretInfo() {\n    const newCaretInfo = this.caret.getInfo();\n    this.caretInfo.editorSelected = true;\n\n    /* Maintain previous info for the other selection type */\n    if(newCaretInfo.rangeSelect) {\n      [ this.caretInfo.leftIndex, this.caretInfo.leftPosition ] =\n        this.virtualTextEditor.getCorrectedIndexAndPosition(\n          newCaretInfo.leftIndex, newCaretInfo.leftPosition, false\n        );\n\n      [ this.caretInfo.rightIndex, this.caretInfo.rightPosition ] =\n        this.virtualTextEditor.getCorrectedIndexAndPosition(\n          newCaretInfo.rightIndex, newCaretInfo.rightPosition, true\n        );\n\n      this.caretInfo.rangeSelect = true;\n      this.caretInfo.insideCaretBlock = false;\n    }\n    else {\n      [ this.caretInfo.index, this.caretInfo.position ] =\n        this.virtualTextEditor.getCorrectedIndexAndPosition(\n          newCaretInfo.index, newCaretInfo.position, false\n        );\n\n      if(this.virtualTextEditor.atBlockNewlineEnd(\n        this.caretInfo.index, this.caretInfo.position\n      )) {\n        newCaretInfo.insideCaretBlock = true;\n      }\n\n      this.caretInfo.rangeSelect = false;\n      this.caretInfo.insideCaretBlock = newCaretInfo.insideCaretBlock;\n    }\n  }\n\n  componentDidMount() {\n    this.textEditor = document.getElementById(this.id);\n    this.outerTextEditor = document.getElementById(this.id + '!');\n    this.handleSelectionChange = registerEventHandlers(this);\n  }\n\n  componentDidUpdate() {\n    if(!this.contentChanged) {\n      return;\n    }\n\n    /* The rendered text must be manually sanitized */\n    let junkNodes = [];\n    for(const node of this.textEditor.childNodes) {\n      if(node.nodeType === Node.TEXT_NODE || node.nodeName === 'BR' ||\n         node.nodeName === 'SPAN') {\n        junkNodes.push(node);\n      }\n    }\n\n    for(const node of junkNodes) {\n      this.textEditor.removeChild(node);\n    }\n\n    for(let i = 0; i < this.state.content.length; i++) {\n      let childElement = this.textEditor.children[i];\n      if(childElement.classList.contains('Askd-te-MATHJAX')) {\n        continue;\n      }\n\n      if(childElement.innerHTML !== this.state.content[i].c) {\n        childElement.childNodes[0].nodeValue = this.state.content[i].c;\n      }\n    }\n\n    /* Callback with new content */\n    if(this.props.onChange) {\n      this.props.onChange(this.state.content);\n    }\n\n    this.contentChanged = false;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n    document.removeEventListener('selectionchange', this.handleSelectionChange);\n  }\n\n  render() {\n    let handleBlur = (event) => {\n      /* Don't blur if event.relatedTarget is one of the toolbar buttons or\n      contained within the 'textarea' */\n      if(event.relatedTarget) {\n        let isIcon = event.relatedTarget.classList.contains('Askd-tb-icon') &&\n           this.outerTextEditor.contains(event.relatedTarget);\n        let contained = this.textEditor.contains(event.relatedTarget);\n\n        if(isIcon || contained) {\n          return;\n        }\n      }\n\n      if(this.caretInfo.editorSelected) {\n        this.caretInfo.editorSelected = false;\n        if(this.caretInfo.insideCaretBlock) {\n          this.caretInfo.insideCaretBlock = false;\n          this.caret.removeCaretBlock();\n          this.virtualTextEditor.removeCaretBlock();\n          this.updateContent();\n        }\n        else {\n          this.forceUpdate();\n        }\n      }\n    };\n\n    return (\n      <div className=\"Askd-text-editor\" id={this.id + '!'}>\n        <Toolbar mask={this.state.editorMask} callback={this.toolbarUpdate} />\n        <TextEditorContent content={this.state.content} id={this.id}\n                           editable={true} handleBlur={handleBlur}\n                           handleFocus={this.handleSelectionChange}\n                           caretInfo={this.caretInfo} />\n      </div>\n    );\n  }\n}\n\nexport default TextEditor;\n","import React, { Component } from 'react';\nimport TextEditor from '../TextEditor/TextEditor';\nimport Utils from '../Utils';\n\nclass CpNotes extends Component {\n  componentDidMount() {\n    Utils.renderMathJax();\n  }\n\n  render() {\n    return (\n      <div className=\"Module-wrapper\">\n        <div className=\"Module-description Module-description-centered\">\n          <p>A work-in-progress web application for storing publicly\n          accessible competitive programming notes! \\[\\LaTeX\\]</p>\n        </div>\n        <TextEditor />\n      </div>\n    );\n  }\n}\n\nexport default CpNotes;\n","import React from 'react';\nimport CpNotes from '../Home/CpNotes';\n\nfunction Home() {\n  return (\n    <>\n      <CpNotes />\n    </>\n  );\n}\n\nexport default Home;\n","import React from 'react';\nimport '../css/LoadingSpinner.css';\n\nfunction LoadingSpinner() {\n  return (\n    <div className=\"Loading-spinner\">\n    </div>\n  );\n}\n\nexport default LoadingSpinner;\n","const LoadState = Object.freeze({\n  LOADING: 0,\n  DONE: 1,\n  NOT_FOUND: 2\n});\n\nexport default LoadState;\n","import React, { useState, useEffect, useCallback, useRef } from 'react';\nimport LoadingSpinner from '../Misc/LoadingSpinner';\nimport LoadState from '../Enum/LoadState';\n\nfunction CreateLoadingComponent(getData, defaultParams, notFoundErrorName, WrappedComponent) {\n  return function LoadingComponent(props) {\n    let mounted = useRef(true);\n    let [ currentParams, changeCurrentParams ] = useState(defaultParams);\n    let [ info, changeInfo ] = useState(null);\n    let [ componentScreen, changeScreen ] = useState(LoadState.LOADING);\n\n    const loadInfo = useCallback(async (params) => {\n      changeScreen(LoadState.LOADING);\n\n      try {\n        const data = await getData(props, params);\n        if(mounted.current) {\n          changeInfo(data);\n          changeCurrentParams(params);\n          changeScreen(LoadState.DONE);\n        }\n      }\n      catch(err) {\n        if(err.name === notFoundErrorName) {\n          if(mounted.current) {\n            changeScreen(LoadState.NOT_FOUND);\n          }\n        }\n        else {\n          throw err;\n        }\n      }\n    }, [props]);\n\n    useEffect(() => {\n      mounted.current = true;\n      loadInfo(defaultParams);\n\n      return () => {\n        mounted.current = false;\n      };\n    }, [loadInfo]);\n\n    let innerContent;\n    if(componentScreen === LoadState.LOADING) {\n      innerContent = (\n        <LoadingSpinner />\n      );\n    }\n    else {\n      innerContent = (\n        <WrappedComponent otherProps={props} loadInfo={loadInfo} info={info}\n                          screen={componentScreen} currentParams={currentParams} />\n      );\n    }\n\n    return (\n      <div className=\"Module-wrapper\">\n        { innerContent }\n      </div>\n    );\n  };\n}\n\nexport default CreateLoadingComponent;\n","import React from 'react';\n\nfunction UserInfo({ info }) {\n  return (\n    <>\n      <h2 className=\"Module-heading\">{info.username}</h2>\n      {\n        info.email &&\n        <p>Email: {info.email} (only visible to you)</p>\n      }\n    </>\n  );\n}\n\nexport default UserInfo;\n","import React, { Component } from 'react';\nimport Utils from '../Utils';\nimport '../css/SearchSelect.css';\n\nconst MAX_OPTIONS = 10;\nconst GLOBAL_SORT_KEY = 'sk';\n\nclass SearchSelect extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      loading: false,\n      searchTerm: '',\n      previousValidSearchTerm: '',\n      showOptions: false,\n      options: [],\n      filteredOptions: []\n    };\n\n    this.handleChange = this.handleChange.bind(this);\n    this.handleBlur = this.handleBlur.bind(this);\n    this.handleFocus = this.handleFocus.bind(this);\n    this.handleOptionSelect = this.handleOptionSelect.bind(this);\n  }\n\n  getOptionString(option) {\n    const optionStringArray = [];\n    for(const key of this.props.keys)\n      optionStringArray.push(option[key]);\n\n    return optionStringArray.join(' - ');\n  }\n\n  async filterOptions() {\n    var filteredOptions = [];\n    const searchTerm = this.state.searchTerm.toLowerCase();\n\n    for(const option of this.state.options) {\n      if(filteredOptions.length === MAX_OPTIONS)\n        break;\n\n      const optionString = this.getOptionString(option);\n      if(optionString.toLowerCase().includes(searchTerm)) {\n        filteredOptions.push(option);\n        continue;\n      }\n\n      for(const key of this.props.keys) {\n        if(option[key].toLowerCase().includes(searchTerm)) {\n          filteredOptions.push(option);\n          break;\n        }\n      }\n    }\n\n    await Utils.setStatePromise(this, {\n      filteredOptions: filteredOptions\n    });\n  }\n\n  async componentDidUpdate(prevProps) {\n    if(prevProps.staticKey && !this.props.staticKey) {\n      await Utils.setStatePromise(this, {\n        searchTerm: ''\n      });\n      return;\n    }\n\n    if(this.props.staticKey === prevProps.staticKey)\n      return;\n\n    await Utils.setStatePromise(this, {\n      searchTerm: '',\n      loading: true\n    });\n    const options = await this.props.search();\n\n    await Utils.setStatePromise(this, {\n      loading: false,\n      previousValidSearchTerm: '',\n      options: options,\n      showOptions: false\n    });\n\n    await this.filterOptions();\n  }\n\n  async handleChange(event) {\n    await Utils.setStatePromise(this, {\n      searchTerm: event.target.value,\n    });\n\n    await this.filterOptions();\n  }\n\n  async handleBlur(event) {\n    const focusedElement = event.relatedTarget;\n    if(focusedElement && focusedElement.id === `Select-options-${this.props.name}`)\n      return;\n\n    await Utils.setStatePromise(this, {\n      showOptions: false,\n      searchTerm: this.state.previousValidSearchTerm\n    });\n  }\n\n  async handleFocus(event) {\n    await Utils.setStatePromise(this, {\n      showOptions: true\n    });\n  }\n\n  async handleOptionSelect(sortKey, optionString) {\n    await Utils.setStatePromise(this, {\n      searchTerm: optionString,\n      previousValidSearchTerm: optionString,\n      showOptions: false\n    });\n\n    await this.filterOptions();\n    this.props.callback(sortKey);\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  render() {\n    var optionElements = [];\n    for(const option of this.state.filteredOptions) {\n      const optionString = this.getOptionString(option);\n      const displayString = option[this.props.displayKey];\n      const sortKey = option[GLOBAL_SORT_KEY];\n      optionElements.push(\n        <li onClick={() => this.handleOptionSelect(sortKey, displayString)}\n            key={sortKey}>\n            {optionString}\n        </li>\n      );\n    }\n\n    return (\n      <div onBlur={this.handleBlur} className=\"Search-select\">\n        <input className={this.state.loading ? \"Askd-form-loading\" : \"\"}\n               onChange={this.handleChange} autoComplete=\"off\" type=\"text\"\n               value={this.state.searchTerm} onFocus={this.handleFocus}\n               name={this.props.name} id={this.props.id}\n               disabled={!this.props.search || this.state.loading} />\n        {\n          optionElements.length > 0 && this.state.showOptions &&\n          <ol id={`Select-options-${this.props.name}`} tabIndex=\"-1\"\n              className=\"Search-select-options\">\n            { optionElements }\n          </ol>\n        }\n      </div>\n    );\n  }\n}\n\nexport default SearchSelect;\n","const ApiConstants = Object.freeze({\n  API_ENDPOINT: 'https://qqmeusmrfk.execute-api.us-east-1.amazonaws.com/prod/'\n});\n\nexport default ApiConstants;\n","import queryString from 'query-string';\nimport ApiConstants from './ApiConstants';\nimport UserAuthApi from './UserAuthApi';\n\nclass Api {\n  static createApiError(name, message) {\n    const err = Error(message);\n    err.name = name;\n\n    return err;\n  }\n\n  static async manageResponseError(response) {\n    if(response.status === 400) {\n      const responseJson = await response.json();\n      throw Api.createApiError(responseJson.name, responseJson.message);\n    }\n    else if(response.status !== 200) {\n      throw Error('Request failed!');\n    }\n  }\n\n  static async sendRequestBody(resource, options, method) {\n    const accessToken = await UserAuthApi.getAccessToken();\n\n    const response = await fetch(ApiConstants.API_ENDPOINT + resource, {\n      method: method,\n      body: JSON.stringify(options),\n      headers: {\n        Authorization: accessToken\n      }\n    });\n\n    await Api.manageResponseError(response);\n    return await response.json();\n  }\n\n  static async getJson(resource, options) {\n    const path = `${resource}?${queryString.stringify(options)}`;\n    const accessToken = await UserAuthApi.getAccessToken();\n\n    const response = await fetch(ApiConstants.API_ENDPOINT + path, {\n      headers: {\n        Authorization: accessToken\n      }\n    });\n\n    await Api.manageResponseError(response);\n    return await response.json();\n  }\n\n  static async postJson(resource, options) {\n    return await Api.sendRequestBody(resource, options, 'POST');\n  }\n\n  static async putJson(resource, options) {\n    return await Api.sendRequestBody(resource, options, 'PUT');\n  }\n\n  static async deleteJson(resource, options) {\n    return await Api.sendRequestBody(resource, options, 'DELETE');\n  }\n}\n\nexport default Api;\n","const SolvedState = Object.freeze({\n  SOLVED: { value: 0, text: 'Solved', css: 'solved' },\n  UPSOLVED: { value: 1, text: 'Upsolved', css: 'upsolved' },\n  UPSOLVED_HELP: { value: 2, text: 'Upsolved with help', css: 'upsolved-help' },\n  UNSOLVED: { value: 3, text: 'Unsolved', css: 'unsolved' }\n});\n\nexport default SolvedState;\n","import Api from './Api';\nimport SolvedState from '../Enum/SolvedState';\n\nclass ProblemsApi {\n  static _prettifyProblems(problems) {\n    for(let i = 0; i < problems.length; i++) {\n      problems[i].prettySk = problems[i].sk.replaceAll('#', '');\n    }\n  }\n\n  static async getContests(platform) {\n    const options = {\n      platform: platform\n    };\n\n    return await Api.getJson('contests', options);\n  }\n\n  static async getProblems(platform, contestId) {\n    const options = {\n      platform: platform,\n      contestId: contestId\n    };\n\n    let problems = await Api.getJson('problems', options);\n    ProblemsApi._prettifyProblems(problems);\n\n    return problems;\n  }\n\n  static async getProblemInfo(platform, problemId) {\n    const options = {\n      platform: platform,\n      problemId: problemId\n    };\n\n    return await Api.getJson('problems', options);\n  }\n\n  static getSolvedStateText(solvedStateValue) {\n    solvedStateValue = parseInt(solvedStateValue);\n    for(const state in SolvedState) {\n      if(SolvedState[state].value === solvedStateValue) {\n        return SolvedState[state].text;\n      }\n    }\n  }\n\n  static getSolvedStateCssClass(solvedStateValue) {\n    solvedStateValue = parseInt(solvedStateValue);\n    for(const state in SolvedState) {\n      if(SolvedState[state].value === solvedStateValue) {\n        return SolvedState[state].css;\n      }\n    }\n  }\n}\n\nexport default ProblemsApi;\n","import React, { Component } from 'react';\nimport Utils from '../Utils';\nimport SearchSelect from '../SearchSelect/SearchSelect';\nimport ProblemsApi from '../Api/ProblemsApi';\nimport '../css/AddProblemForm.css';\n\nclass AddProblemForm extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      error: '',\n      platform: null,\n      contestSortKey: null,\n      problemSortKey: null,\n      skipContestSearch: false,\n      loading: false\n    };\n\n    this.close = this.close.bind(this);\n    this.handlePlatformChange = this.handlePlatformChange.bind(this);\n    this.toggleSkipContestSearch = this.toggleSkipContestSearch.bind(this);\n    this.updateProblemSortKey = this.updateProblemSortKey.bind(this);\n    this.updateContestSortKey = this.updateContestSortKey.bind(this);\n    this.addProblem = this.addProblem.bind(this);\n    this.setLoading = this.setLoading.bind(this);\n  }\n\n  close() {\n    this.props.callback(null, null, null);\n  }\n\n  async handlePlatformChange(event) {\n    await Utils.setStatePromise(this, {\n      platform: event.target.value\n    });\n  }\n\n  async toggleSkipContestSearch(event) {\n    await Utils.setStatePromise(this, {\n      skipContestSearch: !this.state.skipContestSearch,\n      contestSortKey: null,\n      problemSortKey: null\n    });\n  }\n\n  async updateContestSortKey(sortKey) {\n    await Utils.setStatePromise(this, {\n      contestSortKey: sortKey,\n      problemSortKey: null\n    });\n  }\n\n  async updateProblemSortKey(sortKey) {\n    await Utils.setStatePromise(this, {\n      problemSortKey: sortKey\n    });\n  }\n\n  async addProblem(event) {\n    event.preventDefault();\n\n    if(!this.state.problemSortKey) {\n      await Utils.componentSetError(this, 'Please search and select a problem.');\n      return;\n    }\n\n    await this.setLoading(true);\n    this.props.callback(this.state.problemSortKey, this.state.platform, this);\n  }\n\n  async setLoading(isLoading) {\n    await Utils.setStatePromise(this, {\n      loading: isLoading\n    });\n  }\n\n  render() {\n    let submitButtonClassName = 'Askd-button';\n    if(this.state.loading) {\n      submitButtonClassName += ' Askd-form-loading';\n    }\n\n    var searchContestFunction = null;\n    var searchContestKey = null;\n    if(this.state.platform && !this.state.skipContestSearch) {\n      searchContestFunction = () => ProblemsApi.getContests(this.state.platform);\n      searchContestKey = this.state.platform;\n    }\n\n    var searchProblemFunction = null;\n    var searchProblemKey = null;\n    if(this.state.platform && this.state.contestSortKey) {\n      searchProblemFunction = () =>\n        ProblemsApi.getProblems(this.state.platform, this.state.contestSortKey);\n      searchProblemKey = this.state.platform + this.state.contestSortKey;\n    }\n    else if(this.state.platform && this.state.skipContestSearch) {\n      searchProblemFunction = () => ProblemsApi.getProblems(this.state.platform);\n      searchProblemKey = this.state.platform;\n    }\n\n    var skipButtonText = this.state.skipContestSearch ?\n                         'Want to filter by contest?' :\n                         'Want to skip filtering by contest?';\n\n    return (\n      <div className=\"Module-blocker\">\n        <button onClick={this.close}\n                className=\"Askd-form-close Askd-button Askd-button-circular\">\n                X\n        </button>\n        <div className=\"Add-problem-form Module-popup\">\n          { this.state.error && <h2>{this.state.error}</h2> }\n          <h2>Add a problem!</h2>\n          <form className=\"Askd-form\" onSubmit={this.addProblem}>\n            <label htmlFor=\"cp-platform\">Platform</label>\n            <select defaultValue=\"\" onChange={this.handlePlatformChange}\n                    name=\"platform\" id=\"cp-platform\">\n              <option disabled value=\"\"></option>\n              <option value=\"CodeForces\">CodeForces</option>\n              <option value=\"CodeChef\">CodeChef</option>\n            </select>\n\n            <label htmlFor=\"cp-contest\">Contest</label>\n            <SearchSelect name='contest' id='cp-contest' search={searchContestFunction}\n                          keys={['sk', 'name']} callback={this.updateContestSortKey}\n                          displayKey='name' staticKey={searchContestKey} />\n\n            <button onClick={this.toggleSkipContestSearch}\n                    type=\"button\" className=\"Askd-form-link Askd-form-link-separator\">\n              { skipButtonText }\n            </button>\n\n            <label htmlFor=\"cp-title\">Problem</label>\n            <SearchSelect name='title' id='cp-title' search={searchProblemFunction}\n                          keys={['prettySk', 'name']} callback={this.updateProblemSortKey}\n                          displayKey='name' staticKey={searchProblemKey} />\n\n            <input className={submitButtonClassName} type=\"submit\"\n                   value=\"Add Problem\" disabled={this.state.loading} />\n          </form>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default AddProblemForm;\n","import Api from './Api';\n\nclass NotesApi {\n  static async getNotes(username) {\n    const options = {\n      username: username\n    };\n\n    return await Api.getJson('notes', options);\n  }\n\n  static async getNoteInfo(username, platform, problemId, forcePublished) {\n    const options = {\n      username: username,\n      platform: platform,\n      problemId: problemId,\n      forcePublished: forcePublished\n    };\n\n    return await Api.getJson('notes', options);\n  }\n\n  static async addNote(username, platform, problemId) {\n    const options = {\n      username: username,\n      platform: platform,\n      problemId: problemId\n    };\n\n    return await Api.postJson('notes', options);\n  }\n\n  static async editNote(username, platform, problemId, title, solved,\n                        content, published) {\n    const options = {\n      username: username,\n      platform: platform,\n      problemId: problemId,\n      title: title,\n      solved: solved,\n      content: content,\n      published: published\n    };\n\n    return await Api.putJson('notes', options);\n  }\n\n  static async deleteNote(username, platform, problemId) {\n    const options = {\n      username: username,\n      platform: platform,\n      problemId: problemId\n    };\n\n    return await Api.deleteJson('notes', options);\n  }\n}\n\nexport default NotesApi;\n","import React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport ProblemsApi from '../Api/ProblemsApi';\n\nclass UserNoteInfo extends Component {\n  render() {\n    const info = this.props.info;\n\n    const solvedClass = ProblemsApi.getSolvedStateCssClass(info.solved);\n    const problemUrl = info.problemSk.replace('#', '/');\n    const publishedClass = info.published ? 'published' : 'unpublished';\n    const timestamp = (new Date(info.editedTime)).toLocaleDateString();\n    const authorUsername = info.username;\n\n    return (\n      <li className={`User-note-info User-note-info-${solvedClass}`}>\n        <ul className=\"User-note-info-links\">\n          {\n            this.props.loggedInUsername === authorUsername &&\n            <li>\n              <Link className=\"Askd-form-link\"\n                    to={`/notes/edit/${info.platform}/${problemUrl}`}>\n                Edit\n              </Link>\n            </li>\n          }\n          {\n            info.published &&\n            <li>\n              <Link className=\"Askd-form-link\"\n                    to={`/notes/${authorUsername}/${info.platform}/${problemUrl}`}>\n                View\n              </Link>\n            </li>\n          }\n        </ul>\n        <h5>\n          {info.platform} {info.problemCode} - {info.problemName}\n        </h5>\n        <h6 className=\"User-note-info-title\">\n          {info.title}\n        </h6>\n        <h6 className=\"User-note-info-timestamp\">\n          {timestamp}\n        </h6>\n        <ul className=\"User-note-info-tags\">\n          <li className=\"User-note-info-tag User-note-solved-indicator\" />\n          <li className={`User-note-info-tag User-note-tag-${publishedClass}`} />\n        </ul>\n      </li>\n    );\n  }\n}\n\nexport default UserNoteInfo;\n","import React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport ProblemsApi from '../Api/ProblemsApi';\n\nclass UserContestInfo extends Component {\n  render() {\n    const info = this.props.info;\n\n    let noteElements = [];\n    for(let i = 0; i < info.notes.length; i++) {\n      const note = info.notes[i];\n      const problemCode = note.problemSk.split('#')[1];\n      const problemUrl = note.problemSk.replace('#', '/');\n      const authorUsername = note.username;\n\n      let codeClassName = 'User-note-contest-code';\n      if(problemCode.length >= 3) {\n        codeClassName += '-small';\n      }\n\n      const solvedClass = ProblemsApi.getSolvedStateCssClass(note.solved);\n\n      noteElements.push(\n        <li key={i} className={`User-note-contest-note User-note-contest-${solvedClass}`}>\n          <ul className=\"User-note-contest-links\">\n            {\n              this.props.loggedInUsername === authorUsername &&\n              <li>\n                <Link className=\"Askd-form-link\"\n                      to={`/notes/edit/${note.platform}/${problemUrl}`}>\n                  Edit\n                </Link>\n              </li>\n            }\n            {\n              note.published &&\n              <li>\n                <Link className=\"Askd-form-link\"\n                      to={`/notes/${authorUsername}/${note.platform}/${problemUrl}`}>\n                  View\n                </Link>\n              </li>\n            }\n          </ul>\n          <span className={codeClassName}>\n            {problemCode}\n          </span>\n        </li>\n      );\n    }\n\n    const timestamp = (new Date(info.editedTime)).toLocaleDateString();\n\n    return (\n      <li className=\"User-note-info\">\n        <h5>\n          {info.contestName}\n        </h5>\n        <h6 className=\"User-note-contest-timestamp\">\n          {timestamp}\n        </h6>\n        <ul className=\"User-note-contest-notes\">\n          { noteElements }\n        </ul>\n      </li>\n    );\n  }\n}\n\nexport default UserContestInfo;\n","import React from 'react';\n\nfunction UserNotesTitleDropdown({ title, innerContent, showing, toggleCallback }) {\n  const showText = showing ? 'Hide' : 'Show';\n\n  return (\n    <li className=\"User-notes-title-dropdown\">\n      <button className=\"User-notes-title-dropdown-showhide Askd-form-link\"\n              onClick={toggleCallback}>\n        { showText }\n      </button>\n      <h4 className=\"User-notes-title-dropdown-heading\">\n        {title}\n      </h4>\n      { showing && innerContent }\n    </li>\n  );\n}\n\nexport default UserNotesTitleDropdown;\n","class VirtualPaginator {\n  constructor(pageSize, content) {\n    this.pageSize = pageSize;\n    this.setContent(content);\n  }\n\n  setContent(content) {\n    this.content = [];\n    this.activeItems = content.length;\n\n    for(let i = 0; i < content.length; i++) {\n      let item = content[i];\n      item.paginatorActive = true;\n      this.content.push(item);\n    }\n  }\n\n  toggleActiveItems(indices) {\n    for(const index of indices) {\n      const active = this.content[index].paginatorActive;\n      this.content[index].paginatorActive = !active;\n\n      if(active) {\n        this.activeItems--;\n      }\n      else {\n        this.activeItems++;\n      }\n    }\n  }\n\n  getContent(pageIndex) {\n    let currentIndex = 1;\n    let activeBufferSize = 0;\n    let itemBuffer = [];\n\n    for(const item of this.content) {\n      itemBuffer.push(item);\n      if(item.paginatorActive) {\n        activeBufferSize++;\n        if(activeBufferSize === this.pageSize) {\n          if(currentIndex === pageIndex)\n            return itemBuffer;\n          itemBuffer = [];\n          activeBufferSize = 0;\n          currentIndex++;\n        }\n      }\n    }\n\n    if(currentIndex === pageIndex) {\n      return itemBuffer;\n    }\n\n    throw Error('Page index out of range!');\n  }\n\n  getPageCount() {\n    let pageCount = 0;\n    let bufferSize = 0;\n    let activeBufferSize = 0;\n    for(const item of this.content) {\n      if(bufferSize === 0) {\n        pageCount++;\n      }\n\n      bufferSize++;\n      if(item.paginatorActive) {\n        activeBufferSize++;\n      }\n      if(activeBufferSize === this.pageSize) {\n        activeBufferSize = 0;\n        bufferSize = 0;\n      }\n    }\n\n    return pageCount;\n  }\n}\n\nexport default VirtualPaginator;\n","import React from 'react';\nimport '../css/Paginator.css';\n\nfunction Paginator({ currentPage, totalPages, callback }) {\n  let pageIndices = [ currentPage ];\n\n  let after = currentPage + 1;\n  let increment = 2;\n  while(after < totalPages) {\n    pageIndices.push(after);\n    after += increment;\n    increment *= 2;\n  }\n\n  let before = currentPage - 1;\n  increment = 2;\n  while(before > 1) {\n    pageIndices.push(before);\n    before -= increment;\n    increment *= 2;\n  }\n\n  if(currentPage !== 1)\n    pageIndices.push(1);\n  if(currentPage !== totalPages && totalPages > 1)\n    pageIndices.push(totalPages);\n\n  pageIndices.sort((a, b) => a - b);\n\n  let paginatorButtons = [];\n  for(const pageIndex of pageIndices) {\n    const buttonClassName = (pageIndex === currentPage) ?\n      'Paginator-list-selected' : 'Askd-form-link';\n    const buttonOnClick = (pageIndex === currentPage) ?\n      null : () => callback(pageIndex);\n\n    paginatorButtons.push(\n      <li key={pageIndex}>\n        <button className={buttonClassName} onClick={buttonOnClick}>\n          {pageIndex}\n        </button>\n      </li>\n    );\n  }\n\n  return (\n    <div className=\"Paginator\">\n      <ul className=\"Paginator-list\">\n        { paginatorButtons }\n      </ul>\n    </div>\n  );\n}\n\nexport default Paginator;\n","import React, { Component } from 'react';\nimport UserNoteInfo from './UserNoteInfo';\nimport UserContestInfo from './UserContestInfo';\nimport UserNotesTitleDropdown from './UserNotesTitleDropdown';\nimport VirtualPaginator from '../Paginator/VirtualPaginator';\nimport Paginator from '../Paginator/Paginator';\nimport ProblemsApi from '../Api/ProblemsApi';\nimport UserAuthApi from '../Api/UserAuthApi';\nimport Utils from '../Utils';\n\nconst RecursionLevel = Object.freeze({\n  CONTEST: 0,\n  PLATFORM: 1,\n  SOLVED: 2\n});\nconst PAGINATE_SIZE = 15;\n\nfunction compareByRecent(note1, note2) {\n  if(note1.editedTime > note2.editedTime)\n    return -1;\n  return 1;\n}\n\nfunction groupByAttributes(objectList, attributes) {\n  let attributeGroups = {};\n  for(const obj of objectList) {\n    let attributeValues = [];\n    for(const attribute of attributes) {\n      attributeValues.push(obj[attribute]);\n    }\n\n    const key = attributeValues.join('#');\n    if(attributeGroups.hasOwnProperty(key)) {\n      attributeGroups[key].push(obj);\n    }\n    else {\n      attributeGroups[key] = [ obj ];\n    }\n  }\n\n  return attributeGroups;\n}\n\nclass UserNotesList extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      page: 1,\n      loggedInUsername: null\n    };\n\n    this.sortNoteItems(this.props.notes);\n    this.virtualPaginator = new VirtualPaginator(PAGINATE_SIZE, this.sortedNoteItems);\n\n    this.updatePage = this.updatePage.bind(this);\n  }\n\n  async componentDidMount() {\n    const loggedInUsername = await UserAuthApi.getUsername();\n    await Utils.setStatePromise(this, {\n      loggedInUsername: loggedInUsername\n    });\n  }\n\n  createContestObject(notes) {\n    const firstNote = notes[0];\n    let contestObject = {\n      contestCode: firstNote.contestCode,\n      contestName: firstNote.contestName,\n      platform: firstNote.platform,\n      editedTime: firstNote.editedTime,\n      notes: []\n    };\n\n    if(this.props.organizeBySolved)\n      contestObject.solved = firstNote.solved;\n    if(this.props.organizeByPlatform)\n      contestObject.platform = firstNote.platform;\n\n    for(const note of notes) {\n      contestObject.notes.push(note);\n      if(note.editedTime > contestObject.editedTime) {\n        contestObject.editedTime = note.editedTime;\n      }\n    }\n\n    return contestObject;\n  }\n\n  sortNoteItems(notes, recursionLevel = RecursionLevel.SOLVED, keyString = '') {\n    let paginatorIndices = [];\n    if(recursionLevel === RecursionLevel.CONTEST) {\n      if(this.props.organizeByContest) {\n        const contestGroups = groupByAttributes(notes, ['platform', 'contestCode']);\n        for(const key in contestGroups) {\n          let contestObject = this.createContestObject(contestGroups[key]);\n          paginatorIndices.push(this.sortedNoteItems.length);\n          this.sortedNoteItems.push(contestObject);\n        }\n      }\n      else {\n        for(const note of notes) {\n          paginatorIndices.push(this.sortedNoteItems.length);\n          this.sortedNoteItems.push(note);\n        }\n      }\n    }\n    else {\n      let organize, attributeString;\n      if(recursionLevel === RecursionLevel.SOLVED) {\n        this.sortedNoteItems = [];\n        this.dropdownShowing = {};\n        this.dropdownIndices = {};\n\n        if(this.props.sortByRecent) {\n          notes = [...notes].sort(compareByRecent);\n        }\n\n        organize = this.props.organizeBySolved;\n        attributeString = 'solved';\n      }\n      else {\n        organize = this.props.organizeByPlatform;\n        attributeString = 'platform';\n      }\n\n      if(organize) {\n        const groups = groupByAttributes(notes, [attributeString]);\n        for(const key in groups) {\n          const innerKeyString = `${keyString}#${key}`;\n          const innerIndices =\n            this.sortNoteItems(groups[key], recursionLevel - 1, innerKeyString);\n\n          this.dropdownShowing[innerKeyString] = true;\n          this.dropdownIndices[innerKeyString] = innerIndices;\n\n          for(const index of innerIndices) {\n            paginatorIndices.push(index);\n          }\n        }\n      }\n      else {\n        return this.sortNoteItems(notes, recursionLevel - 1, keyString);\n      }\n    }\n\n    return paginatorIndices;\n  }\n\n  renderNoteItems(notes, recursionLevel = RecursionLevel.SOLVED, keyString = '') {\n    let noteInfoElements = [];\n    if(recursionLevel === RecursionLevel.CONTEST) {\n      let NoteComponent =\n        this.props.organizeByContest ? UserContestInfo : UserNoteInfo;\n\n      for(let i = 0; i < notes.length; i++) {\n        noteInfoElements.push(\n          <NoteComponent key={i} info={notes[i]}\n                         loggedInUsername={this.state.loggedInUsername} />\n        );\n      }\n    }\n    else {\n      let organize, attributeString;\n      if(recursionLevel === RecursionLevel.SOLVED) {\n        organize = this.props.organizeBySolved;\n        attributeString = 'solved';\n      }\n      else {\n        organize = this.props.organizeByPlatform;\n        attributeString = 'platform';\n      }\n\n      if(organize) {\n        const groups = groupByAttributes(notes, [attributeString]);\n        for(const key in groups) {\n          const innerKeyString = `${keyString}#${key}`;\n          const innerContent =\n            this.renderNoteItems(groups[key], recursionLevel - 1, innerKeyString);\n          const title = (recursionLevel === RecursionLevel.SOLVED) ?\n            ProblemsApi.getSolvedStateText(key) : key;\n\n          const showing = this.dropdownShowing[innerKeyString];\n          const innerIndices = this.dropdownIndices[innerKeyString];\n          const toggleCallback = async () => {\n            this.virtualPaginator.toggleActiveItems(innerIndices);\n            this.dropdownShowing[innerKeyString] = !this.dropdownShowing[innerKeyString];\n\n            const totalPages = this.virtualPaginator.getPageCount();\n            if(this.state.page > totalPages) {\n              await this.updatePage(totalPages);\n            }\n\n            this.forceUpdate();\n          };\n\n          noteInfoElements.push(\n            <UserNotesTitleDropdown key={key} title={title}\n                                    innerContent={innerContent} showing={showing}\n                                    toggleCallback={toggleCallback} />\n          );\n        }\n      }\n      else {\n        return this.renderNoteItems(notes, recursionLevel - 1);\n      }\n    }\n\n    return (\n      <ul className=\"User-notes-list\">\n        { noteInfoElements }\n      </ul>\n    );\n  }\n\n  async updatePage(page) {\n    await Utils.setStatePromise(this, {\n      page: page\n    });\n  }\n\n  shouldComponentUpdate(nextProps, nextState) {\n    // Only re-sort note items on an (important) props update\n    const importantProps = [\n      'organizeBySolved',\n      'organizeByPlatform',\n      'organizeByContest',\n      'sortByRecent'\n    ];\n    const currentImportantProps = importantProps.map((x) => this.props[x]);\n    const nextImportantProps = importantProps.map((x) => nextProps[x]);\n\n    if(JSON.stringify(currentImportantProps) !== JSON.stringify(nextImportantProps)) {\n      this.props = nextProps;\n      this.sortNoteItems(this.props.notes);\n      this.virtualPaginator.setContent(this.sortedNoteItems);\n\n      if(this.state.page !== 1) {\n        this.updatePage(1);\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  render() {\n    if(this.props.notes.length === 0) {\n      return (\n        <p className=\"User-notes-nothing\">There's nothing to see here yet!</p>\n      );\n    }\n\n    const noteItems = this.virtualPaginator.getContent(this.state.page);\n    const totalPages = this.virtualPaginator.getPageCount();\n    const paginator = (\n      <Paginator currentPage={this.state.page} totalPages={totalPages}\n                 callback={this.updatePage} />\n    );\n\n    return (\n      <>\n        { paginator }\n        { this.renderNoteItems(noteItems) }\n        { paginator }\n      </>\n    );\n  }\n}\n\nexport default UserNotesList;\n","import React, { Component } from 'react';\nimport AddProblemForm from './AddProblemForm';\nimport NotesApi from '../Api/NotesApi';\nimport UserNotesList from './UserNotesList';\nimport Utils from '../Utils';\nimport '../css/UserNotes.css';\n\nclass UserNotes extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      showAddProblemForm: false,\n      organizeBySolved: false,\n      organizeByPlatform: false,\n      organizeByContest: false,\n      sortByRecent: false\n    };\n\n    this.toggleAddProblemForm = this.toggleAddProblemForm.bind(this);\n    this.toggleOrganizeBySolved = this.toggleOrganizeBySolved.bind(this);\n    this.toggleOrganizeByPlatform = this.toggleOrganizeByPlatform.bind(this);\n    this.toggleOrganizeByContest = this.toggleOrganizeByContest.bind(this);\n    this.toggleSortByRecent = this.toggleSortByRecent.bind(this);\n    this.addProblem = this.addProblem.bind(this);\n  }\n\n  async toggleAddProblemForm() {\n    await Utils.setStatePromise(this, {\n      showAddProblemForm: !this.state.showAddProblemForm\n    });\n  }\n\n  async toggleOrganizeBySolved() {\n    await Utils.setStatePromise(this, {\n      organizeBySolved: !this.state.organizeBySolved\n    });\n  }\n\n  async toggleOrganizeByPlatform() {\n    await Utils.setStatePromise(this, {\n      organizeByPlatform: !this.state.organizeByPlatform\n    });\n  }\n\n  async toggleOrganizeByContest() {\n    await Utils.setStatePromise(this, {\n      organizeByContest: !this.state.organizeByContest\n    });\n  }\n\n  async toggleSortByRecent() {\n    await Utils.setStatePromise(this, {\n      sortByRecent: !this.state.sortByRecent\n    });\n  }\n\n  async addProblem(problemSortKey, platform, formComponent) {\n    if(!problemSortKey) {\n      await this.toggleAddProblemForm();\n      return;\n    }\n\n    try {\n      const username = this.props.userInfo.username;\n      await NotesApi.addNote(username, platform, problemSortKey);\n\n      const problemUrl = problemSortKey.replace('#', '/');\n      this.props.history.push(`/notes/edit/${platform}/${problemUrl}`);\n    }\n    catch(err) {\n      await Utils.componentSetError(formComponent, err.message);\n      await formComponent.setLoading(false);\n    }\n  }\n\n  render() {\n    return (\n      <>\n        <h2 className=\"Module-heading\">Problems</h2>\n        {\n          this.state.showAddProblemForm &&\n          <AddProblemForm callback={this.addProblem} />\n        }\n        <form>\n          <div className=\"User-notes-organize\">\n            <label>\n              <b>Organize by</b>\n            </label>\n            <input type=\"checkbox\" name=\"solved\" value=\"solved\"\n                   onChange={this.toggleOrganizeBySolved} />\n            <label htmlFor=\"solved\">Solved</label>\n            <input type=\"checkbox\" name=\"platform\" value=\"platform\"\n                   onChange={this.toggleOrganizeByPlatform} />\n            <label htmlFor=\"platform\">Platform</label>\n            <input type=\"checkbox\" name=\"contest\" value=\"contest\"\n                   onChange={this.toggleOrganizeByContest} />\n            <label htmlFor=\"contest\">Contest</label>\n          </div>\n          <div className=\"User-notes-organize\">\n            <label htmlFor=\"sort\">\n              <b>Sort by</b>\n            </label>\n            <select defaultValue=\"default\" name=\"sort\"\n                    onChange={this.toggleSortByRecent}>\n              <option value=\"default\">Default</option>\n              <option value=\"recent\">Recent</option>\n            </select>\n          </div>\n        </form>\n        <div className=\"User-notes Module-space\">\n          <UserNotesList organizeBySolved={this.state.organizeBySolved}\n                         organizeByPlatform={this.state.organizeByPlatform}\n                         organizeByContest={this.state.organizeByContest}\n                         sortByRecent={this.state.sortByRecent}\n                         notes={this.props.notes} />\n          {\n            this.props.userInfo.email &&\n            <button onClick={this.toggleAddProblemForm}\n                    className=\"User-notes-add Askd-button Askd-button-circular\">\n              +\n            </button>\n          }\n        </div>\n      </>\n    );\n  }\n}\n\nexport default UserNotes;\n","import Api from './Api';\n\nclass UsersApi {\n  static async getUserInfo(username) {\n    const options = {\n      username: username\n    };\n\n    return await Api.getJson('users', options);\n  }\n\n  static async getUsers(page) {\n    const options = {\n      page: page\n    };\n\n    return await Api.getJson('users', options);\n  }\n}\n\nexport default UsersApi;\n","import React from 'react';\nimport CreateLoadingComponent from '../HOC/CreateLoadingComponent';\nimport UserInfo from './UserInfo';\nimport UserNotes from './UserNotes';\nimport UsersApi from '../Api/UsersApi';\nimport NotesApi from '../Api/NotesApi';\nimport LoadState from '../Enum/LoadState';\n\nasync function getUserData(props, params) {\n  const username = props.match.params.username;\n  const userInfo = await UsersApi.getUserInfo(username);\n  const notes = await NotesApi.getNotes(username);\n\n  return {\n    userInfo: userInfo,\n    notes: notes\n  };\n}\n\nfunction UserProfile({ otherProps, info, screen }) {\n  if(screen === LoadState.NOT_FOUND) {\n    return (\n      <div className=\"Module-description\">\n        <h2>User not found!</h2>\n      </div>\n    );\n  }\n  else {\n    return (\n      <>\n        <div className=\"Module-description\">\n          <UserInfo info={info.userInfo} />\n        </div>\n        <UserNotes userInfo={info.userInfo} notes={info.notes}\n                   history={otherProps.history} />\n      </>\n    );\n  }\n}\n\nexport default CreateLoadingComponent(\n  getUserData, null, 'UserNotFound', UserProfile\n);\n","import React, { Component } from 'react';\nimport UserAuthApi from '../Api/UserAuthApi';\nimport NotesApi from '../Api/NotesApi';\nimport Utils from '../Utils';\nimport { v4 as uuidv4 } from 'uuid';\n\nclass DeleteMenu extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      error: ''\n    };\n    this.randomCode = uuidv4();\n\n    this.close = this.close.bind(this);\n    this.deleteNote = this.deleteNote.bind(this);\n    this.setLoading = this.setLoading.bind(this);\n  }\n\n  close() {\n    this.props.exitCallback();\n  }\n\n  async deleteNote(event) {\n    event.preventDefault();\n\n    const confirmCode = event.target.confirmCode.value;\n    if(confirmCode !== this.randomCode) {\n      await Utils.componentSetError(this, \"Your confirmation code doesn't match!\");\n      return;\n    }\n\n    try {\n      const username = await UserAuthApi.getUsername();\n      const platform = this.props.platform;\n      const problemId = this.props.problemInfo.problemId;\n\n      await this.setLoading(true);\n      await NotesApi.deleteNote(username, platform, problemId);\n      this.props.history.push(`/users/${username}`);\n    }\n    catch(err) {\n      await Utils.componentSetError(this, err.message);\n      await this.setLoading(false);\n    }\n  }\n\n  async setLoading(isLoading) {\n    await Utils.setStatePromise(this, {\n      loading: isLoading\n    });\n  }\n\n  render() {\n    let submitButtonClassName = 'Askd-button';\n    if(this.state.loading) {\n      submitButtonClassName += ' Askd-form-loading';\n    }\n\n    return (\n      <div className=\"Module-blocker\">\n        <button onClick={this.close}\n                className=\"Askd-form-close Askd-button Askd-button-circular\">\n          X\n        </button>\n        <div className=\"Edit-note-delete-menu Module-popup\">\n          { this.state.error && <h2>{this.state.error}</h2> }\n          <h2>Are you sure you want to permanently delete this note?</h2>\n          <p>\n            This action cannot be undone! Please enter the following\n            code as confirmation.\n          </p>\n          <form className=\"Askd-form\" onSubmit={this.deleteNote}>\n            <label htmlFor=\"confirmCode\">{this.randomCode}</label>\n            <input autoComplete=\"off\" type=\"text\" name=\"confirmCode\"\n                   key=\"confirmCode\" id=\"confirmCode\" />\n\n            <input className={submitButtonClassName} type=\"submit\" value=\"Delete\"\n                   disabled={this.state.loading} />\n          </form>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default DeleteMenu;\n","import React, { Component } from 'react';\nimport { Prompt } from 'react-router';\nimport TextEditor from '../TextEditor/TextEditor';\nimport DeleteMenu from './DeleteMenu';\nimport SolvedState from '../Enum/SolvedState';\nimport UserAuthApi from '../Api/UserAuthApi';\nimport NotesApi from '../Api/NotesApi';\nimport Utils from '../Utils';\n\nfunction remindUserToSave(event) {\n  event.preventDefault();\n  event.returnValue = '';\n}\n\nclass EditNoteForm extends Component {\n  constructor(props) {\n    super(props);\n\n    const noteInfo = this.props.noteInfo;\n    this.title = noteInfo.title;\n    this.solved = noteInfo.solved;\n    this.content = JSON.parse(noteInfo.content);\n    this.lastSaved = new Date(noteInfo.editedTime);\n\n    this.state = {\n      published: noteInfo.published,\n      disableEditButtons: false,\n      saved: true,\n      loadingSave: false,\n      loadingPublish: false,\n      showDeleteMenu: false\n    };\n\n    this.saveNote = this.saveNote.bind(this);\n    this.togglePublishNote = this.togglePublishNote.bind(this);\n    this.toggleDeleteMenu = this.toggleDeleteMenu.bind(this);\n    this.handleTitleChange = this.handleTitleChange.bind(this);\n    this.handleSolvedChange = this.handleSolvedChange.bind(this);\n    this.handleContentChange = this.handleContentChange.bind(this);\n  }\n\n  async saveOrPublishNote(published) {\n    const username = await UserAuthApi.getUsername();\n    const platform = this.props.platform;\n    const problemId = this.props.problemInfo.problemId;\n    const title = this.title;\n    const solved = this.solved;\n    const content = JSON.stringify(this.content);\n\n    await NotesApi.editNote(username, platform, problemId, title, solved,\n                            content, published);\n\n    this.lastSaved = new Date();\n    window.onbeforeunload = null;\n\n    await Utils.setStatePromise(this, {\n      published: published,\n      disableEditButtons: false,\n      saved: true,\n      loadingSave: false,\n      loadingPublish: false\n    });\n  }\n\n  async saveNote(event) {\n    await Utils.setStatePromise(this, {\n      disableEditButtons: true,\n      loadingSave: true\n    });\n\n    await this.saveOrPublishNote(this.state.published);\n  }\n\n  async togglePublishNote(event) {\n    await Utils.setStatePromise(this, {\n      disableEditButtons: true,\n      loadingPublish: true\n    });\n\n    await this.saveOrPublishNote(!this.state.published);\n  }\n\n  async toggleDeleteMenu(event) {\n    await Utils.setStatePromise(this, {\n      showDeleteMenu: !this.state.showDeleteMenu\n    });\n  }\n\n  handleTitleChange(event) {\n    this.title = event.target.value;\n  }\n\n  handleSolvedChange(event) {\n    this.solved = event.target.value;\n  }\n\n  async handleContentChange(newContent) {\n    this.content = newContent;\n\n    if(this.state.saved) {\n      await Utils.setStatePromise(this, {\n        saved: false\n      });\n\n      window.onbeforeunload = remindUserToSave;\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  render() {\n    let savedText = this.state.saved ? 'All changes saved! - ' : 'Last saved on ';\n    savedText += this.lastSaved.toLocaleString();\n\n    const togglePublishText = this.state.published ? 'Unpublish' : 'Publish!';\n    let saveButtonClass = 'Askd-button Askd-not-fullwidth';\n    let publishButtonClass = 'Askd-button Askd-not-fullwidth';\n\n    if(this.state.loadingSave) saveButtonClass += ' Askd-form-loading';\n    if(this.state.loadingPublish) publishButtonClass += ' Askd-form-loading';\n\n    return (\n      <>\n        <Prompt when={!this.state.saved}\n                message='Are you sure you want to leave? You have unsaved changes.' />\n        {\n          this.state.showDeleteMenu &&\n          <DeleteMenu exitCallback={this.toggleDeleteMenu}\n                      platform={this.props.platform} history={this.props.history}\n                      problemInfo={this.props.problemInfo} />\n        }\n        <form className=\"Edit-note-form Askd-form\">\n          <input className=\"Edit-note-title\" name=\"title\" type=\"text\"\n                 defaultValue={this.title} placeholder=\"Title\"\n                 onChange={this.handleTitleChange} />\n\n          <select name=\"solved\" id=\"note-solved\" onChange={this.handleSolvedChange}\n                  defaultValue={this.solved}>\n            <option value={SolvedState.SOLVED.value}>Solved</option>\n            <option value={SolvedState.UPSOLVED.value}>Upsolved</option>\n            <option value={SolvedState.UPSOLVED_HELP.value}>Upsolved with help</option>\n            <option value={SolvedState.UNSOLVED.value}>Unsolved</option>\n          </select>\n\n          <TextEditor initialContent={this.content}\n                      onChange={this.handleContentChange} />\n          <p className=\"Edit-note-saved-text\">{savedText}</p>\n          <div className=\"Edit-note-bottom-buttons\">\n            <input className={saveButtonClass} type=\"button\" value=\"Save\"\n                   onClick={this.saveNote}\n                   disabled={this.state.disableEditButtons} />\n\n            <input className={publishButtonClass} type=\"button\"\n                   value={togglePublishText} onClick={this.togglePublishNote}\n                   disabled={this.state.disableEditButtons} />\n          </div>\n          <div className=\"Edit-note-delete\">\n            <button type=\"button\" className=\"Askd-form-link Askd-form-link-bottom\"\n                    onClick={this.toggleDeleteMenu}>\n              Permanently delete this note?\n            </button>\n          </div>\n        </form>\n      </>\n    );\n  }\n}\n\nexport default EditNoteForm;\n","import React, { Component } from 'react';\n\nclass ProblemInfo extends Component {\n  render() {\n    const info = this.props.info;\n\n    return (\n      <div className=\"Edit-note-problem-info\">\n        <div className=\"Module-info-box\">\n          <h4>\n            {this.props.platform} {info.problemCode} - {info.problemName}\n          </h4>\n          <p className=\"Edit-note-contest\">{info.contestName}</p>\n          <a className=\"Askd-form-link\" href={info.link} target=\"_blank\"\n             rel=\"noopener noreferrer\">\n            Problem link\n          </a>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default ProblemInfo;\n","import React from 'react';\nimport CreateLoadingComponent from '../HOC/CreateLoadingComponent';\nimport LoadState from '../Enum/LoadState';\nimport EditNoteForm from './EditNoteForm';\nimport ProblemInfo from './ProblemInfo';\nimport ProblemsApi from '../Api/ProblemsApi'\nimport NotesApi from '../Api/NotesApi';\nimport UserAuthApi from '../Api/UserAuthApi';\nimport '../css/EditNote.css';\n\nasync function getNoteAndProblemData(props, params) {\n  const username = await UserAuthApi.getUsername();\n  const platform = props.match.params.platform;\n  const contestId = props.match.params.contestId;\n  const problemCode = props.match.params.problemCode;\n  const problemId = `${contestId}#${problemCode}`;\n\n  let problemInfo = await ProblemsApi.getProblemInfo(platform, problemId);\n  problemInfo.problemId = problemId;\n\n  const noteInfo = await NotesApi.getNoteInfo(username, platform, problemId);\n  return {\n    problemInfo: problemInfo,\n    noteInfo: noteInfo\n  };\n}\n\nfunction EditNote({ otherProps, info, screen }) {\n  const platform = otherProps.match.params.platform;\n\n  if(screen === LoadState.NOT_FOUND) {\n    return (\n      <div className=\"Module-description\">\n        <h2>Note not found!</h2>\n      </div>\n    );\n  }\n  else {\n    return (\n      <>\n        <ProblemInfo info={info.problemInfo} platform={platform} />\n        <EditNoteForm problemInfo={info.problemInfo}\n                      noteInfo={info.noteInfo} platform={platform}\n                      history={otherProps.history} />\n      </>\n    );\n  }\n}\n\nexport default CreateLoadingComponent(\n  getNoteAndProblemData, null, 'NoteNotFound', EditNote\n);\n","import Api from './Api';\n\nclass LikesApi {\n  static async sendLike(username, noteAuthor, platform, problemId, likedStatus) {\n    const options = {\n      username: username,\n      noteAuthor: noteAuthor,\n      platform: platform,\n      problemId: problemId,\n      likedStatus: likedStatus\n    };\n\n    return await Api.putJson('likes/notes', options);\n  }\n}\n\nexport default LikesApi;\n","import React, { useState } from 'react';\nimport UserAuthApi from '../Api/UserAuthApi';\nimport '../css/LikeDislike.css';\n\nfunction LikeDislike({ initialScore, initialStatus, likeCallback }) {\n  let [ score, setScore ] = useState(initialScore);\n  let [ status, setStatus ] = useState(initialStatus);\n\n  let likeButtonClass = 'Like-button';\n  if(status > 0) {\n    likeButtonClass += ' Like-button-liked';\n  }\n\n  let toggleStatus = async () => {\n    const username = await UserAuthApi.getUsername();\n    if(!username) {\n      window.suggestUserRegister();\n      return;\n    }\n\n    if(status > 0) {\n      setStatus(0);\n      setScore(score - 1);\n      likeCallback(0);\n    }\n    else {\n      setStatus(1);\n      setScore(score + 1);\n      likeCallback(1);\n    }\n  };\n\n  return (\n    <div className=\"Like-dislike\">\n      <button className={likeButtonClass} onClick={toggleStatus}>\n        <span className=\"Like-dislike-score\">+{score}</span> I like this!\n      </button>\n    </div>\n  );\n}\n\nexport default LikeDislike;\n","import React from 'react';\nimport { Link } from 'react-router-dom';\nimport ProblemsApi from '../Api/ProblemsApi';\nimport LikesApi from '../Api/LikesApi';\nimport UserAuthApi from '../Api/UserAuthApi';\nimport TextEditorContent from '../TextEditor/TextEditorContent';\nimport LikeDislike from '../Misc/LikeDislike';\nimport '../css/PublicNoteInfo.css';\n\nfunction PublicNoteInfo({ info }) {\n  const content = JSON.parse(info.content);\n  const editedTimestamp = (new Date(info.editedTime)).toLocaleString();\n  const solvedClass = ProblemsApi.getSolvedStateCssClass(info.solved);\n\n  let likeCallback = async (likedStatus) => {\n    const username = await UserAuthApi.getUsername();\n    const noteAuthor = info.username;\n    const platform = info.platform;\n    const problemId = info.problemSk;\n\n    await LikesApi.sendLike(username, noteAuthor, platform, problemId, likedStatus);\n  };\n\n  return (\n    <div className=\"Public-note-info Module-space Module-padding-box\">\n      <h3 className=\"Module-space-heading\">\n        <span className={`Public-note-solved-tag User-note-info-${solvedClass}`}>\n          <span className=\"User-note-info-tag User-note-solved-indicator\" />\n        </span>\n        {info.title}\n      </h3>\n      <p className=\"Module-space-text\">\n        Written by <Link className=\"Askd-form-link\" to={`/users/${info.username}`}>\n          {info.username}\n        </Link>\n      </p>\n      <div className=\"Askd-text-editor\">\n        <TextEditorContent content={content} id='Askd-public-note' editable={false} />\n      </div>\n      <p className=\"Module-space-text\">\n        Last edited on {editedTimestamp}\n      </p>\n      <LikeDislike initialScore={info.likeCount} initialStatus={info.likedStatus}\n                   likeCallback={likeCallback} />\n    </div>\n  );\n}\n\nexport default PublicNoteInfo;\n","import React from 'react';\nimport CreateLoadingComponent from '../HOC/CreateLoadingComponent';\nimport LoadState from '../Enum/LoadState';\nimport ProblemInfo from '../EditNote/ProblemInfo';\nimport PublicNoteInfo from './PublicNoteInfo';\nimport ProblemsApi from '../Api/ProblemsApi';\nimport NotesApi from '../Api/NotesApi';\n\nasync function getNoteAndProblemData(props, params) {\n  const ownerUsername = props.match.params.ownerUsername;\n  const platform = props.match.params.platform;\n  const contestId = props.match.params.contestId;\n  const problemCode = props.match.params.problemCode;\n  const problemId = `${contestId}#${problemCode}`;\n\n  let problemInfo = await ProblemsApi.getProblemInfo(platform, problemId);\n  problemInfo.problemId = problemId;\n\n  const noteInfo = await NotesApi.getNoteInfo(ownerUsername, platform, problemId, true);\n  return {\n    problemInfo: problemInfo,\n    noteInfo: noteInfo\n  };\n}\n\nfunction PublicNote({ otherProps, info, screen }) {\n  const platform = otherProps.match.params.platform;\n\n  if(screen === LoadState.NOT_FOUND) {\n    return (\n      <div className=\"Module-description\">\n        <h2>Note is either unpublished or does not exist!</h2>\n      </div>\n    );\n  }\n  else {\n    return (\n      <>\n        <ProblemInfo info={info.problemInfo} platform={platform} />\n        <PublicNoteInfo info={info.noteInfo} />\n      </>\n    );\n  }\n}\n\nexport default CreateLoadingComponent(\n  getNoteAndProblemData, null, 'NoteNotFound', PublicNote\n);\n","import React from 'react';\nimport { Link } from 'react-router-dom';\nimport '../css/UsersTable.css';\n\nconst PAGE_SIZE = 50;\n\nfunction UsersTable({ currentPage, lastUpdated, users }) {\n  const updatedTime = (new Date(lastUpdated)).toLocaleString();\n\n  let userRows = [];\n  let index = (currentPage - 1) * PAGE_SIZE + 1;\n  for(const user of users) {\n    const contributionClassName = user.contribution > 0 ?\n      'Users-table-contributor' : '';\n\n    userRows.push(\n      <tr key={index}>\n        <td>{index}</td>\n        <td className=\"Users-table-username\">\n          <Link className=\"Askd-button Askd-button-generic\" to={`/users/${user.username}`}>\n            {user.username}\n          </Link>\n        </td>\n        <td className={contributionClassName}>{user.contribution}</td>\n      </tr>\n    );\n    index++;\n  }\n\n  return (\n    <div className=\"Users-table\">\n      <div className=\"Users-table-table\">\n        <table>\n          <tbody>\n            <tr>\n              <th>#</th>\n              <th className=\"Users-table-username\">Username</th>\n              <th>Contribution</th>\n            </tr>\n            {userRows}\n          </tbody>\n        </table>\n      </div>\n      <span className=\"Users-table-last-updated\">\n        Last updated on {updatedTime}\n      </span>\n    </div>\n  );\n}\n\nexport default UsersTable;\n","import React from 'react';\nimport CreateLoadingComponent from '../HOC/CreateLoadingComponent';\nimport Paginator from '../Paginator/Paginator';\nimport UsersTable from './UsersTable';\nimport LoadState from '../Enum/LoadState';\nimport UsersApi from '../Api/UsersApi';\n\nasync function getUsers(props, page) {\n  const usersInfo = await UsersApi.getUsers(page);\n  return {\n    usersInfo: usersInfo\n  };\n}\n\nfunction UsersList({ info, loadInfo, screen, currentParams }) {\n  const usersInfo = info.usersInfo;\n\n  if(screen === LoadState.NOT_FOUND) {\n    return (\n      <div className=\"Module-description\">\n        Page not found!\n      </div>\n    );\n  }\n  else {\n    const paginator = (\n      <Paginator currentPage={currentParams} totalPages={usersInfo.totalPages}\n                 callback={loadInfo} />\n    );\n\n    return (\n      <div className=\"Module-space\">\n        { paginator }\n        <UsersTable currentPage={currentParams} users={usersInfo.users}\n                    lastUpdated={usersInfo.lastUpdated} />\n        { paginator }\n      </div>\n    );\n  }\n}\n\nexport default CreateLoadingComponent(\n  getUsers, 1, 'PageNotFound', UsersList\n);\n","import React from 'react';\nimport { BrowserRouter, Switch, Route } from 'react-router-dom';\nimport Header from './Header/Header';\nimport Home from './Home/Home';\nimport UserProfile from './UserProfile/UserProfile';\nimport EditNote from './EditNote/EditNote';\nimport PublicNote from './PublicNote/PublicNote';\nimport UsersList from './UsersList/UsersList';\n\nimport './css/App.css';\nimport './css/Module.css';\nimport './css/Form.css';\n\nfunction App() {\n  return (\n    <BrowserRouter>\n      <div className=\"App\">\n        <Header />\n        <Switch>\n          <Route exact path=\"/\" component={Home} />\n          <Route exact path=\"/home\" component={Home} />\n          <Route exact path=\"/users\" component={UsersList} />\n          <Route exact path=\"/users/:username\" component={UserProfile} />\n          <Route exact path=\"/notes/edit/:platform/:contestId/:problemCode\"\n                 component={EditNote} />\n          <Route exact path=\"/notes/:ownerUsername/:platform/:contestId/:problemCode\"\n                 component={PublicNote} />\n        </Switch>\n      </div>\n    </BrowserRouter>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport Amplify from 'aws-amplify';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport amplify_config from './amplify_config';\n\nAmplify.configure(amplify_config);\n\ndocument.body.addEventListener('mousedown', (event) => {\n  document.body.classList.add('Global-mouse-click');\n});\n\ndocument.body.addEventListener('keydown', (event) => {\n  if(event.keyCode === 9) {\n    document.body.classList.remove('Global-mouse-click');\n  }\n});\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}