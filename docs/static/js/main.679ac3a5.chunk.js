(this["webpackJsonpaskdfjlas.github.io"]=this["webpackJsonpaskdfjlas.github.io"]||[]).push([[0],{116:function(e){e.exports=JSON.parse('{"beta":{"Auth":{"region":"us-east-1","userPoolId":"us-east-1_YQGmZ3d3H","userPoolWebClientId":"7ntajq8ii4nne0s2o55cvsqlfe"}},"prod":{"Auth":{"region":"us-east-1","userPoolId":"us-east-1_J60dlDigu","userPoolWebClientId":"760agodsmv6jl2mt8js015f8lo"}}}')},161:function(e,t,n){},162:function(e,t,n){},167:function(e,t,n){},168:function(e,t,n){},169:function(e,t,n){},182:function(e,t,n){},183:function(e,t,n){},184:function(e,t,n){},185:function(e,t,n){},186:function(e,t,n){},187:function(e,t,n){},188:function(e,t,n){},189:function(e,t,n){},190:function(e,t,n){},191:function(e,t,n){},192:function(e,t,n){},193:function(e,t,n){},194:function(e,t,n){},196:function(e,t,n){},197:function(e,t,n){},198:function(e,t,n){},199:function(e,t,n){},200:function(e,t,n){},256:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),s=n(109),o=n.n(s),c=n(60),i=n(12),l=n(13),u=n(1),m=n.n(u),d=n(3),p=n(6),f=n(7),h=n(5),b=n(9),v=n(8),g=n(289),k=n(110);g.a.addDefaultLocale(k);var E=new g.a("en-US"),x=function(){function e(){Object(p.a)(this,e)}return Object(f.a)(e,null,[{key:"setStatePromise",value:function(){var e=Object(d.a)(m.a.mark((function e(t,n){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,a){!1!==t.mounted&&t.setState(n,(function(){e()})),e()})));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"isEmpty",value:function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}},{key:"componentSetError",value:function(){var t=Object(d.a)(m.a.mark((function t(n,a){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n.setError){t.next=5;break}return t.next=3,n.setError(a);case 3:t.next=7;break;case 5:return t.next=7,e.setStatePromise(n,{error:"Error: ".concat(a)});case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"componentSetSuccess",value:function(){var t=Object(d.a)(m.a.mark((function t(n,a){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n.setSuccess){t.next=5;break}return t.next=3,n.setSuccess(a);case 3:t.next=7;break;case 5:return t.next=7,e.setStatePromise(n,{error:"",success:a});case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"convertFileToBase64",value:function(e){return new Promise((function(t,n){var a=new FileReader;a.readAsDataURL(e),a.onload=function(){t(a.result)},a.onerror=function(e){return n(e)}}))}},{key:"removePrefixZeroes",value:function(e){for(var t=0,n=0;n<e.length&&"0"===e[n];n++)t++;return e.substring(t,e.length)}},{key:"getTimeAgoString",value:function(e){var t=new Date(e);return E.format(t)}},{key:"isImageLinkValid",value:function(){var e=Object(d.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var a=new Image;a.onload=function(){return e(!0)},a.onerror=function(){return e(!1)},a.src=t})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"renderMathJax",value:function(e){window.MathJax&&window.MathJax.typeset(e)}},{key:"whatStageIsThis",value:function(){return"cp-notes.com"===window.location.hostname?"prod":"beta"}}]),e}(),y=function(){function e(){Object(p.a)(this,e)}return Object(f.a)(e,null,[{key:"checkPasswords",value:function(){var e=Object(d.a)(m.a.mark((function e(t,n,a){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n===a){e.next=4;break}return e.next=3,x.componentSetError(t,"Your passwords don't match!");case 3:return e.abrupt("return",!1);case 4:if(!(n.length<6)){e.next=8;break}return e.next=7,x.componentSetError(t,"Your password is too short!");case 7:return e.abrupt("return",!1);case 8:return e.abrupt("return",!0);case 9:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}()}]),e}(),w=n(126),O=function(){function e(){Object(p.a)(this,e)}return Object(f.a)(e,null,[{key:"getProfile",value:function(){var e=Object(d.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w.a.currentAuthenticatedUser();case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}()},{key:"register",value:function(){var e=Object(d.a)(m.a.mark((function e(t,n,a){var r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.signUp({username:t,password:a,attributes:{email:n}});case 2:return r=e.sent,e.abrupt("return",r.codeDeliveryDetails.Destination);case 4:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"verifyEmail",value:function(){var e=Object(d.a)(m.a.mark((function e(t,n){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.confirmSignUp(t,n);case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"resendVerificationEmail",value:function(){var e=Object(d.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.resendSignUp(t);case 2:return n=e.sent,e.abrupt("return",n.CodeDeliveryDetails.Destination);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"forgotPassword",value:function(){var e=Object(d.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.forgotPassword(t);case 2:return n=e.sent,e.abrupt("return",n.CodeDeliveryDetails.Destination);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"resetPassword",value:function(){var e=Object(d.a)(m.a.mark((function e(t,n,a){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.forgotPasswordSubmit(t,n,a);case 2:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"login",value:function(){var e=Object(d.a)(m.a.mark((function e(t,n){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.signIn(t,n);case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"logout",value:function(){var e=Object(d.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.signOut();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getUsername",value:function(){var t=Object(d.a)(m.a.mark((function t(){var n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getProfile();case 2:if(n=t.sent){t.next=5;break}return t.abrupt("return",null);case 5:return t.abrupt("return",n.username);case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()},{key:"getAccessToken",value:function(){var t=Object(d.a)(m.a.mark((function t(){var n,a,r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getProfile();case 2:if(n=t.sent){t.next=5;break}return t.abrupt("return",null);case 5:return a=n.getSignInUserSession(),r=a.getAccessToken(),t.abrupt("return",r.getJwtToken());case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()}]),e}(),C=Object.freeze({LOGIN:0,RECOVERY_USERNAME:1,RECOVERY_PASSWORD:2,RECOVERY_SUCCESS:3,REGISTER:4,REGISTER_VERIFY:5,REGISTER_SUCCESS:6}),N=(n(161),"PreSignUp failed with error"),I=function(e){Object(b.a)(n,e);var t=Object(v.a)(n);function n(e){var a;Object(p.a)(this,n),a=t.call(this,e);var r=e.unverifiedAccountUsername?C.REGISTER_VERIFY:C.REGISTER;return a.state={error:"",success:"",username:e.unverifiedAccountUsername,destination:e.unverifiedAccountDestination,screen:r,loading:!1},a.close=a.close.bind(Object(h.a)(a)),a.register=a.register.bind(Object(h.a)(a)),a.verifyEmail=a.verifyEmail.bind(Object(h.a)(a)),a.resendVerificationEmail=a.resendVerificationEmail.bind(Object(h.a)(a)),a.setLoading=a.setLoading.bind(Object(h.a)(a)),a}return Object(f.a)(n,[{key:"close",value:function(){this.props.exitCallback()}},{key:"setError",value:function(){var e=Object(d.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.startsWith(N)&&(t=t.substring(N.length,t.length-1)),e.next=3,x.setStatePromise(this,{error:"Error: ".concat(t),success:""});case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"register",value:function(){var e=Object(d.a)(m.a.mark((function e(t){var n,a,r,s,o,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),n=t.target,a=n.username.value,r=n.email.value,s=n.password.value,o=n.confirmPassword.value,a&&r&&s&&o){e.next=10;break}return e.next=9,this.setError("Please fill out all of the fields.");case 9:return e.abrupt("return");case 10:if(!(a.length<3||a.length>20)){e.next=14;break}return e.next=13,this.setError("Your username must be between ".concat(3," ")+"and ".concat(20," characters!"));case 13:return e.abrupt("return");case 14:return e.next=16,y.checkPasswords(this,s,o);case 16:if(e.sent){e.next=19;break}return e.abrupt("return");case 19:return e.next=21,this.setLoading(!0);case 21:return e.prev=21,e.next=24,O.register(a,r,s);case 24:c=e.sent,x.setStatePromise(this,{error:"",username:a,destination:c,screen:C.REGISTER_VERIFY}),e.next=32;break;case 28:return e.prev=28,e.t0=e.catch(21),e.next=32,this.setError(e.t0.message);case 32:return e.next=34,this.setLoading(!1);case 34:case"end":return e.stop()}}),e,this,[[21,28]])})));return function(t){return e.apply(this,arguments)}}()},{key:"verifyEmail",value:function(){var e=Object(d.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=t.target.code.value,e.next=4,this.setLoading(!0);case 4:return e.prev=4,e.next=7,O.verifyEmail(this.state.username,n);case 7:x.setStatePromise(this,{error:"",success:"",screen:C.REGISTER_SUCCESS}),e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(4),e.next=14,this.setError(e.t0.message);case 14:return e.next=16,this.setLoading(!1);case 16:case"end":return e.stop()}}),e,this,[[4,10]])})));return function(t){return e.apply(this,arguments)}}()},{key:"resendVerificationEmail",value:function(){var e=Object(d.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.resendVerificationEmail(this.state.username);case 3:return e.next=5,x.componentSetSuccess(this,"Another email has been sent!");case 5:e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(0),e.next=11,this.setError(e.t0.message);case 11:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"setLoading",value:function(){var e=Object(d.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.setStatePromise(this,{loading:t});case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"render",value:function(){var e="Askd-button";this.state.loading&&(e+=" Askd-form-loading");var t,n=r.a.createElement("div",{className:"Register-form Module-popup"},this.state.error&&r.a.createElement("h2",null,this.state.error),r.a.createElement("h2",null,"Create an account!"),r.a.createElement("form",{className:"Askd-form",onSubmit:this.register},r.a.createElement("label",{htmlFor:"register-username"},"Username"),r.a.createElement("input",{autoComplete:"off",type:"text",name:"username",id:"register-username"}),r.a.createElement("label",{htmlFor:"register-email"},"Email"),r.a.createElement("input",{autoComplete:"off",type:"text",name:"email",id:"register-email"}),r.a.createElement("label",{htmlFor:"register-password"},"Password"),r.a.createElement("input",{autoComplete:"off",type:"password",name:"password",id:"register-password"}),r.a.createElement("label",{htmlFor:"register-confirm-password"},"Confirm password"),r.a.createElement("input",{autoComplete:"off",type:"password",name:"confirmPassword",id:"register-confirm-password"}),r.a.createElement("input",{className:e,type:"submit",value:"Register",disabled:this.state.loading}))),a=r.a.createElement("div",{className:"Register-form Module-popup"},this.state.error&&r.a.createElement("h2",null,this.state.error),this.state.success&&r.a.createElement("h2",null,this.state.success),r.a.createElement("h2",null,"Verify your email!"),r.a.createElement("p",null,"You should've received an email at ",this.state.destination," with a verification code. If it isn't convenient for you to verify your account now, you may do so later by logging in."),r.a.createElement("form",{className:"Askd-form",onSubmit:this.verifyEmail},r.a.createElement("label",{htmlFor:"verification-code"},"Verification code"),r.a.createElement("input",{autoComplete:"off",type:"text",name:"code",key:"verification-code",id:"verification-code"}),r.a.createElement("button",{type:"button",onClick:this.resendVerificationEmail,className:"Askd-form-link Askd-form-link-bottom"},"Didn't get the email? Click here to resend"),r.a.createElement("input",{className:e,type:"submit",value:"Submit",disabled:this.state.loading}))),s=r.a.createElement("div",{className:"Register-form Module-popup"},r.a.createElement("h2",null,"Verification success!"),r.a.createElement("p",{className:"Module-popup-last"},"Your email was successfully verified! Click the 'X' button in the top-right corner to return to the site, and you'll be able to login."));switch(this.state.screen){case C.REGISTER:t=n;break;case C.REGISTER_VERIFY:t=a;break;case C.REGISTER_SUCCESS:t=s}return r.a.createElement("div",{className:"Module-blocker"},r.a.createElement("button",{onClick:this.close,className:"Askd-form-close Askd-button Askd-button-circular"}),t)}}]),n}(a.Component),j=function(e){Object(b.a)(n,e);var t=Object(v.a)(n);function n(e){var a;return Object(p.a)(this,n),(a=t.call(this,e)).state={error:"",username:null,destination:null,loading:!1,screen:e.screen||C.LOGIN},a.close=a.close.bind(Object(h.a)(a)),a.login=a.login.bind(Object(h.a)(a)),a.enablePasswordRecovery=a.enablePasswordRecovery.bind(Object(h.a)(a)),a.forgotPassword=a.forgotPassword.bind(Object(h.a)(a)),a.resetPassword=a.resetPassword.bind(Object(h.a)(a)),a.resendVerificationEmail=a.resendVerificationEmail.bind(Object(h.a)(a)),a.setLoading=a.setLoading.bind(Object(h.a)(a)),a}return Object(f.a)(n,[{key:"close",value:function(){this.props.exitCallback(!1)}},{key:"login",value:function(){var e=Object(d.a)(m.a.mark((function e(t){var n,a,r,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),n=t.target,a=n.username.value,r=n.password.value,a&&r){e.next=8;break}return e.next=7,x.componentSetError(this,"Please fill out all of the fields.");case 7:return e.abrupt("return");case 8:return e.next=10,this.setLoading(!0);case 10:return e.prev=10,e.next=13,O.login(a,r);case 13:this.props.exitCallback(!0),e.next=28;break;case 16:if(e.prev=16,e.t0=e.catch(10),"UserNotConfirmedException"!==e.t0.code){e.next=26;break}return e.next=21,O.resendVerificationEmail(a);case 21:return s=e.sent,e.next=24,this.props.emailVerificationCallback(a,s);case 24:e.next=28;break;case 26:return e.next=28,x.componentSetError(this,e.t0.message);case 28:return e.next=30,this.setLoading(!1);case 30:case"end":return e.stop()}}),e,this,[[10,16]])})));return function(t){return e.apply(this,arguments)}}()},{key:"enablePasswordRecovery",value:function(){var e=Object(d.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.setStatePromise(this,{error:"",screen:C.RECOVERY_USERNAME});case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"forgotPassword",value:function(){var e=Object(d.a)(m.a.mark((function e(t){var n,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),n=t.target.username.value){e.next=6;break}return e.next=5,x.componentsSetError(this,"Please input your username.");case 5:return e.abrupt("return");case 6:return e.next=8,this.setLoading(!0);case 8:return e.prev=8,e.next=11,O.forgotPassword(n);case 11:return a=e.sent,e.next=14,x.setStatePromise(this,{error:"",username:n,destination:a,screen:C.RECOVERY_PASSWORD});case 14:e.next=20;break;case 16:return e.prev=16,e.t0=e.catch(8),e.next=20,x.componentSetError(this,e.t0.message);case 20:return e.next=22,this.setLoading(!1);case 22:case"end":return e.stop()}}),e,this,[[8,16]])})));return function(t){return e.apply(this,arguments)}}()},{key:"resetPassword",value:function(){var e=Object(d.a)(m.a.mark((function e(t){var n,a,r,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),n=t.target,a=n.code.value,r=n.password.value,s=n.confirmPassword.value,a&&r&&s){e.next=8;break}return x.componentSetError(this,"Please fill out all of the fields."),e.abrupt("return");case 8:return e.next=10,y.checkPasswords(this,r,s);case 10:if(e.sent){e.next=13;break}return e.abrupt("return");case 13:return e.next=15,this.setLoading(!0);case 15:return e.prev=15,e.next=18,O.resetPassword(this.state.username,a,r);case 18:return e.next=20,x.setStatePromise(this,{error:"",success:"",screen:C.RECOVERY_SUCCESS});case 20:e.next=26;break;case 22:return e.prev=22,e.t0=e.catch(15),e.next=26,x.componentSetError(this,e.t0.message);case 26:return e.next=28,this.setLoading(!1);case 28:case"end":return e.stop()}}),e,this,[[15,22]])})));return function(t){return e.apply(this,arguments)}}()},{key:"resendVerificationEmail",value:function(){var e=Object(d.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.forgotPassword(this.state.username);case 3:return e.next=5,x.componentSetSuccess(this,"Another email has been sent!");case 5:e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(0),e.next=11,x.componentSetError(this,e.t0.message);case 11:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"setLoading",value:function(){var e=Object(d.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.setStatePromise(this,{loading:t});case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"render",value:function(){var e="Askd-button";this.state.loading&&(e+=" Askd-form-loading");var t,n=r.a.createElement("div",{className:"Register-form Module-popup"},this.state.error&&r.a.createElement("h2",null,this.state.error),r.a.createElement("h2",null,"Login to your account!"),r.a.createElement("form",{className:"Askd-form",onSubmit:this.login},r.a.createElement("label",{htmlFor:"login-username"},"Username or email"),r.a.createElement("input",{autoComplete:"off",type:"text",name:"username",key:"login-username",id:"login-username"}),r.a.createElement("label",{htmlFor:"login-password"},"Password"),r.a.createElement("input",{autoComplete:"off",type:"password",name:"password",key:"login-password",id:"login-password"}),r.a.createElement("button",{type:"button",onClick:this.enablePasswordRecovery,className:"Askd-form-link Askd-form-link-bottom"},"Forgot your password?"),r.a.createElement("input",{className:e,type:"submit",value:"Login",disabled:this.state.loading}))),a=r.a.createElement("div",{className:"Register-form Module-popup"},this.state.error&&r.a.createElement("h2",null,this.state.error),r.a.createElement("h2",null,"Reset your password"),r.a.createElement("p",null,"Please provide your username or email, so that you can reset your password via an emailed confirmation code."),r.a.createElement("form",{className:"Askd-form",onSubmit:this.forgotPassword},r.a.createElement("label",{htmlFor:"reset-username"},"Username or email"),r.a.createElement("input",{autoComplete:"off",type:"text",name:"username",key:"reset-username",id:"reset-username"}),r.a.createElement("input",{className:e,type:"submit",value:"Submit",disabled:this.state.loading}))),s=r.a.createElement("div",{className:"Register-form Module-popup"},this.state.error&&r.a.createElement("h2",null,this.state.error),this.state.success&&r.a.createElement("h2",null,this.state.success),r.a.createElement("h2",null,"Reset your password"),r.a.createElement("p",null,"You should've received an email at ",this.state.destination," with a verification code."),r.a.createElement("form",{className:"Askd-form",onSubmit:this.resetPassword},r.a.createElement("label",{htmlFor:"reset-code"},"Code"),r.a.createElement("input",{autoComplete:"off",type:"text",name:"code",key:"reset-code",id:"reset-code"}),r.a.createElement("label",{htmlFor:"reset-password"},"Password"),r.a.createElement("input",{autoComplete:"off",type:"password",name:"password",key:"reset-password",id:"reset-password"}),r.a.createElement("label",{htmlFor:"reset-confirm-password"},"Confirm password"),r.a.createElement("input",{autoComplete:"off",type:"password",name:"confirmPassword",key:"reset-confirm-password",id:"reset-confirm-password"}),r.a.createElement("button",{type:"button",onClick:this.resendVerificationEmail,className:"Askd-form-link Askd-form-link-bottom"},"Didn't get the email? Click here to resend"),r.a.createElement("input",{className:e,type:"submit",value:"Submit",disabled:this.state.loading}))),o=r.a.createElement("div",{className:"Register-form Module-popup"},r.a.createElement("h2",null,"Password reset success!"),r.a.createElement("p",null,"Your password has been reset successfully. You'll now be able to login again."));switch(this.state.screen){case C.LOGIN:t=n;break;case C.RECOVERY_USERNAME:t=a;break;case C.RECOVERY_PASSWORD:t=s;break;case C.RECOVERY_SUCCESS:t=o}return r.a.createElement("div",{className:"Module-blocker"},r.a.createElement("button",{onClick:this.close,className:"Askd-form-close Askd-button Askd-button-circular"}),t)}}]),n}(a.Component),S=(n(162),function(e){Object(b.a)(n,e);var t=Object(v.a)(n);function n(e){var a;return Object(p.a)(this,n),(a=t.call(this,e)).logout=a.logout.bind(Object(h.a)(a)),a}return Object(f.a)(n,[{key:"logout",value:function(){var e=Object(d.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.logout();case 2:return e.next=4,this.props.logoutCallback();case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("div",{className:"User-menu"},r.a.createElement("ol",null,r.a.createElement("li",null,r.a.createElement(i.b,{className:"Header-menu-button",onClick:this.props.closeCallback,to:"/users/".concat(this.props.username)},"Your profile")),r.a.createElement("div",{className:"User-menu-divider"}),r.a.createElement("li",{className:"User-menu-not-link"},r.a.createElement(i.b,{className:"Header-menu-button",onClick:this.props.closeCallback,to:"/settings"},"Settings")),r.a.createElement("li",{className:"User-menu-not-link"},r.a.createElement("button",{className:"Header-menu-button",onClick:this.logout},"Logout"))))}}]),n}(a.Component)),P=function(e){Object(b.a)(n,e);var t=Object(v.a)(n);function n(e){var a;return Object(p.a)(this,n),(a=t.call(this,e)).state={username:null,showRegisterForm:!1,showLoginForm:!1,showUserMenu:!1,unverifiedAccountUsername:null,unverifiedAccountDestination:null},a.refreshUsername=a.refreshUsername.bind(Object(h.a)(a)),a.toggleRegisterForm=a.toggleRegisterForm.bind(Object(h.a)(a)),a.toggleLoginForm=a.toggleLoginForm.bind(Object(h.a)(a)),a.toggleUserMenu=a.toggleUserMenu.bind(Object(h.a)(a)),a.hideUserMenu=a.hideUserMenu.bind(Object(h.a)(a)),a.afterLogin=a.afterLogin.bind(Object(h.a)(a)),a.unverifiedAccount=a.unverifiedAccount.bind(Object(h.a)(a)),window.suggestUserRegister=a.toggleRegisterForm,a}return Object(f.a)(n,[{key:"refreshUsername",value:function(){var e=Object(d.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.getUsername();case 2:return t=e.sent,e.next=5,x.setStatePromise(this,{username:t,showUserMenu:!1,unverifiedAccountUsername:null});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=Object(d.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.refreshUsername();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toggleRegisterForm",value:function(){var e=Object(d.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.state.showRegisterForm){e.next=3;break}return e.next=3,x.setStatePromise(this,{unverifiedAccountUsername:null,unverifiedAccountDestination:null});case 3:return e.next=5,x.setStatePromise(this,{showRegisterForm:!this.state.showRegisterForm});case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"toggleLoginForm",value:function(){var e=Object(d.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.setStatePromise(this,{showLoginForm:!this.state.showLoginForm});case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"toggleUserMenu",value:function(){var e=Object(d.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.setStatePromise(this,{showUserMenu:!this.state.showUserMenu});case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"hideUserMenu",value:function(){var e=Object(d.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=t.relatedTarget)||!n.classList.contains("Header-menu-button")){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,x.setStatePromise(this,{showUserMenu:!1});case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"afterLogin",value:function(){var e=Object(d.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.toggleLoginForm();case 2:if(!t){e.next=5;break}return e.next=5,this.refreshUsername();case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"unverifiedAccount",value:function(){var e=Object(d.a)(m.a.mark((function e(t,n){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.setStatePromise(this,{showLoginForm:!1,showRegisterForm:!0,unverifiedAccountUsername:t,unverifiedAccountDestination:n});case 2:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"render",value:function(){var e=r.a.createElement("div",{className:"Header-top-right"},r.a.createElement("button",{className:"Header-menu-button",onClick:this.toggleLoginForm},"Login"),r.a.createElement("span",{className:"Header-divider"}),r.a.createElement("button",{className:"Header-menu-button",onClick:this.toggleRegisterForm},"Create an account")),t=r.a.createElement("div",{className:"Header-logged-in",tabIndex:"-1",onBlur:this.hideUserMenu},r.a.createElement("div",{className:"Header-top-right"},r.a.createElement("button",{className:"Header-menu-button",onClick:this.toggleUserMenu},this.state.username)),r.a.createElement("div",{className:"Header-user-menu"},this.state.showUserMenu&&r.a.createElement(S,{username:this.state.username,closeCallback:this.toggleUserMenu,logoutCallback:this.refreshUsername}))),n=this.state.username?t:e;return r.a.createElement(r.a.Fragment,null,this.state.showRegisterForm&&r.a.createElement(I,{exitCallback:this.toggleRegisterForm,unverifiedAccountUsername:this.state.unverifiedAccountUsername,unverifiedAccountDestination:this.state.unverifiedAccountDestination}),this.state.showLoginForm&&r.a.createElement(j,{exitCallback:this.afterLogin,emailVerificationCallback:this.unverifiedAccount}),n)}}]),n}(a.Component);n(167);var A=function(){var e="cp-notes!";"beta"===x.whatStageIsThis()&&(e+=" beta");var t=Object(l.g)().pathname,n="/"===t||"/home"===t,a=n?"Header":"Header-small";return r.a.createElement("div",{className:a},n&&r.a.createElement("h1",null,e),r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(i.b,{to:"/home"},"Home")),r.a.createElement("li",null,r.a.createElement(i.b,{to:"/users"},"Users")),r.a.createElement("li",null,r.a.createElement(i.b,{to:"/notes"},"Notes"))),r.a.createElement(P,null))};var U=function(e){var t=e.info;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",{className:"Module-heading"},t.title),r.a.createElement("span",{className:"Cp-notes-home-post-date"},t.date),r.a.createElement("div",{className:"Cp-notes-home-post-content"},t.content))},T=n.p+"static/media/user_notes_unorganized.673faef2.png",M=n.p+"static/media/user_notes_organized.dc4db41b.png",R=n.p+"static/media/public_note.ecb72e27.png",B=n.p+"static/media/notes_search.1fe98aef.png",L=[{title:"Welcome!",date:"04-16-21",prodOnly:!0,content:r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{className:"Module-paragraph"},"Hello there, and welcome to cp-notes.com! I'm currently making some finishing touches to the site. How did you find this though :p? If you wouldn't mind, please let me know by messaging me on Codeforces (my username is askd)."),r.a.createElement("p",{className:"Module-paragraph"},"Thanks for taking the time to visit! This site is intended to be a place for competitive programmers to share notes about their most interesting problems! Here's a list of some of the things you can do:"),r.a.createElement("div",{className:"Cp-notes-home-post-image"},r.a.createElement("div",{className:"Cp-notes-home-post-image-area"},r.a.createElement("div",null,r.a.createElement("img",{src:T,alt:"User profile, no organization"})),r.a.createElement("div",null,r.a.createElement("img",{src:M,alt:"User profile, organized by solved"}))),r.a.createElement("p",null,"Maintain an organizable profile of solved and unsolved problems from 6 different platforms")),r.a.createElement("div",{className:"Cp-notes-home-post-image"},r.a.createElement("div",{className:"Cp-notes-home-post-image-area"},r.a.createElement("div",null,r.a.createElement("img",{src:R,alt:"Published note page"}))),r.a.createElement("p",null,"Share notes with others and receive feedback")),r.a.createElement("div",{className:"Cp-notes-home-post-image"},r.a.createElement("div",{className:"Cp-notes-home-post-image-area"},r.a.createElement("div",null,r.a.createElement("img",{src:B,alt:"Notes search page"}))),r.a.createElement("p",null,"Search and find notes written by other users")),r.a.createElement("p",{className:"Module-paragraph"},"As a side-effect of this project, I've also produced a rich text editor written in React, using HTML's ",r.a.createElement("i",null,"lovely")," contenteditable. Definitely a little rough around the edges, but the inline math mode is quite unique from what I've seen - you can demo it"," ",r.a.createElement(i.b,{className:"Askd-form-link",to:"/demo"},"here"),"!"))},{title:"Welcome!",date:"04-16-21",betaOnly:!0,content:r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{className:"Module-paragraph"},"Hello there, and welcome to the beta site of"," ",r.a.createElement("a",{className:"Askd-form-link",href:"https://cp-notes.com"},"cp-notes.com"),"! You've probably arrived here after looking at the name of the Github repository. This site is meant for me to test things without interfering with the production site. You can still make an account here and do all of the same things, but everything will be stored in databases separate from the production site, so you're not really supposed to use this. Why is it public, you might ask? I don't know, I think keeping it visible is kind of neat (and also results in less work for me)."),r.a.createElement("p",{className:"Module-paragraph"},"Anyways, thanks for taking the time to visit! This site is intended to be a place for competitive programmers to share notes about their most interesting problems! Here's a list of some of the things you can do:"),r.a.createElement("div",{className:"Cp-notes-home-post-image"},r.a.createElement("div",{className:"Cp-notes-home-post-image-area"},r.a.createElement("div",null,r.a.createElement("img",{src:T,alt:"User profile, no organization"})),r.a.createElement("div",null,r.a.createElement("img",{src:M,alt:"User profile, organized by solved"}))),r.a.createElement("p",null,"Maintain an organizable profile of solved and unsolved problems from 6 different platforms")),r.a.createElement("div",{className:"Cp-notes-home-post-image"},r.a.createElement("div",{className:"Cp-notes-home-post-image-area"},r.a.createElement("div",null,r.a.createElement("img",{src:R,alt:"Published note page"}))),r.a.createElement("p",null,"Share notes with others and receive feedback")),r.a.createElement("div",{className:"Cp-notes-home-post-image"},r.a.createElement("div",{className:"Cp-notes-home-post-image-area"},r.a.createElement("div",null,r.a.createElement("img",{src:B,alt:"Notes search page"}))),r.a.createElement("p",null,"Search and find notes written by other users")),r.a.createElement("p",{className:"Module-paragraph"},"As a side-effect of this project, I've also produced a rich text editor written in React, using HTML's ",r.a.createElement("i",null,"lovely")," contenteditable. Definitely a little rough around the edges, but the inline math mode is quite unique from what I've seen - you can demo it"," ",r.a.createElement(i.b,{className:"Askd-form-link",to:"/demo"},"here"),"!"))}];n(168);var D=function(){for(var e=[],t=0;t<L.length;t++)L[t].betaOnly&&"beta"!==x.whatStageIsThis()||L[t].prodOnly&&"prod"!==x.whatStageIsThis()||e.push(r.a.createElement("li",{className:"Module-outer-space Cp-notes-home-post",key:t},r.a.createElement(U,{info:L[t]})));return r.a.createElement("ol",{className:"Cp-notes-home-list"},e)};var F=function(e){var t=e.history;if(window.location.href.includes("?")){var n=window.location.href.split("?").splice(1).join("").split("#").join("/");t.replace(n)}return r.a.createElement(D,null)},z=n(4),G=Object.freeze({LOADING:0,DONE:1,NOT_FOUND:2});var V=function(e,t,n,s){return function(o){var c=Object(a.useRef)(!0),i=Object(a.useState)(t),u=Object(z.a)(i,2),p=u[0],f=u[1],h=Object(a.useState)(null),b=Object(z.a)(h,2),v=b[0],g=b[1],k=Object(a.useState)(G.LOADING),E=Object(z.a)(k,2),x=E[0],y=E[1],w=function(){var t=Object(d.a)(m.a.mark((function t(a){var r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return y(G.LOADING),t.prev=1,t.next=4,e(o,a);case 4:r=t.sent,c.current&&(g(r),f(a),y(G.DONE)),t.next=15;break;case 8:if(t.prev=8,t.t0=t.catch(1),t.t0.name!==n){t.next=14;break}c.current&&y(G.NOT_FOUND),t.next=15;break;case 14:throw t.t0;case 15:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}(),O=Object(l.g)();return Object(a.useEffect)((function(){return c.current=!0,w(t),function(){c.current=!1}}),[o.staticKey,O]),r.a.createElement(s,{otherProps:o,loadInfo:w,info:v,screen:x,currentParams:p})}};n(169);var H=function(){return r.a.createElement("div",{className:"Loading-spinner"})},J=n(27),_=n.n(J),Y=Object.freeze({API_ENDPOINT:{beta:"https://qqmeusmrfk.execute-api.us-east-1.amazonaws.com/prod/",prod:"https://5ktb1hi8c7.execute-api.us-east-1.amazonaws.com/prod/"}[x.whatStageIsThis()]}),W=function(){function e(){Object(p.a)(this,e)}return Object(f.a)(e,null,[{key:"createApiError",value:function(e,t){var n=Error(t);return n.name=e,n}},{key:"manageResponseError",value:function(){var t=Object(d.a)(m.a.mark((function t(n){var a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(400!==n.status){t.next=7;break}return t.next=3,n.json();case 3:throw a=t.sent,e.createApiError(a.name,a.message);case 7:if(200===n.status){t.next=9;break}throw Error("Request failed!");case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},{key:"sendRequestBody",value:function(){var t=Object(d.a)(m.a.mark((function t(n,a,r){var s,o;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,O.getAccessToken();case 2:return s=t.sent,t.next=5,fetch(Y.API_ENDPOINT+n,{method:r,body:JSON.stringify(a),headers:{Authorization:s}});case 5:return o=t.sent,t.next=8,e.manageResponseError(o);case 8:return t.next=10,o.json();case 10:return t.abrupt("return",t.sent);case 11:case"end":return t.stop()}}),t)})));return function(e,n,a){return t.apply(this,arguments)}}()},{key:"getJson",value:function(){var t=Object(d.a)(m.a.mark((function t(n,a){var r,s,o;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r="".concat(n,"?").concat(_.a.stringify(a)),t.next=3,O.getAccessToken();case 3:return s=t.sent,t.next=6,fetch(Y.API_ENDPOINT+r,{headers:{Authorization:s}});case 6:return o=t.sent,t.next=9,e.manageResponseError(o);case 9:return t.next=11,o.json();case 11:return t.abrupt("return",t.sent);case 12:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"postJson",value:function(){var t=Object(d.a)(m.a.mark((function t(n,a){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.sendRequestBody(n,a,"POST");case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"putJson",value:function(){var t=Object(d.a)(m.a.mark((function t(n,a){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.sendRequestBody(n,a,"PUT");case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"deleteJson",value:function(){var t=Object(d.a)(m.a.mark((function t(n,a){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.sendRequestBody(n,a,"DELETE");case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}(),K={},q=0,X=function(){function e(){Object(p.a)(this,e)}return Object(f.a)(e,null,[{key:"getUserInfo",value:function(){var e=Object(d.a)(m.a.mark((function e(t,n){var a,r,s,o;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n||!(t in K)){e.next=8;break}if(a=K[t],!(Date.now()-a.timestamp>36e5)){e.next=7;break}delete K[t],q--,e.next=8;break;case 7:return e.abrupt("return",a);case 8:return r={username:t,basicInfoOnly:n},e.next=11,W.getJson("users",r);case 11:if(s=e.sent,t in K||q++,K[t]={username:t,avatarData:s.avatarData,cfUsername:s.cfUsername,cfRank:s.cfRank,cfRating:s.cfRating,timestamp:Date.now()},!(q>100)){e.next=23;break}e.t0=m.a.keys(K);case 16:if((e.t1=e.t0()).done){e.next=22;break}return o=e.t1.value,delete K[o],e.abrupt("break",22);case 22:q--;case 23:return e.abrupt("return",s);case 24:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getUsers",value:function(){var e=Object(d.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={page:t},e.next=3,W.getJson("users",n);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getSearchUsers",value:function(){var e=Object(d.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={searchTerm:t},e.next=3,W.getJson("users",n);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateUserInfo",value:function(){var e=Object(d.a)(m.a.mark((function e(t,n){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={username:t,avatarData:n},e.next=3,W.putJson("users",a);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"beginCfVerification",value:function(){var e=Object(d.a)(m.a.mark((function e(t,n){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={username:t,authCfUsername:n},e.next=3,W.putJson("users/link",a);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"endCfVerification",value:function(){var e=Object(d.a)(m.a.mark((function e(t,n,a){var r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={username:t,authCfUsername:n,authId:a},e.next=3,W.putJson("users/link",r);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}()}]),e}();n(182);var Z=function(e){var t=e.username,n=e.rank,a=e.linkToCf;n=n?n.split(" ").join("-"):"newbie";var s,o="Username Username-".concat(n);if("legendary-grandmaster"===n){var c=t[0],l="Username-first-letter-".concat(n),u=t.substring(1,t.length);s=r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:l},c),u)}else s=r.a.createElement(r.a.Fragment,null,t);return a?r.a.createElement("a",{className:o,href:"https://codeforces.com/profile/".concat(t),target:"_blank",rel:"noopener noreferrer"},s):r.a.createElement(i.b,{className:o,to:"/users/".concat(t)},s)};n(183);var Q=function(e){var t=e.info,n=Object(a.useState)(!1),s=Object(z.a)(n,2),o=s[0],c=s[1],i=Object(a.useState)(t.avatarData),l=Object(z.a)(i,2),u=l[0],p=l[1],f=Object(a.useState)(""),h=Object(z.a)(f,2),b=h[0],v=h[1],g=function(){var e=Object(d.a)(m.a.mark((function e(n){var a,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.target.files[0],e.next=3,x.convertFileToBase64(a);case 3:if(r=e.sent,"image/png"===a.type||"image/jpeg"===a.type){e.next=7;break}return v("Error: You may only choose .png or .jpeg images!"),e.abrupt("return");case 7:return e.prev=7,c(!0),v(""),e.next=12,X.updateUserInfo(t.username,r);case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(7),v("Error: "+e.t0.message);case 17:c(!1),p(r);case 19:case"end":return e.stop()}}),e,null,[[7,14]])})));return function(t){return e.apply(this,arguments)}}(),k=t.contribution>0?"Users-table-contributor":"",E=r.a.createElement(r.a.Fragment,null,r.a.createElement("img",{src:u,alt:"Avatar"}),t.email&&r.a.createElement(r.a.Fragment,null,r.a.createElement("label",{htmlFor:"User-avatar-upload",tabIndex:"0"},"Change avatar"),r.a.createElement("input",{id:"User-avatar-upload",name:"avatar",type:"file",accept:"image/jpeg, image/png",onChange:g}))),y=o?r.a.createElement(H,null):E;return r.a.createElement("div",{className:"Module-outer-space"},r.a.createElement("h2",{className:"Module-heading Username"},r.a.createElement(Z,{username:t.username,rank:t.cfRank})),r.a.createElement("div",{className:"User-info"},r.a.createElement("ol",{className:"User-info-info"},t.email&&r.a.createElement("li",null,r.a.createElement("span",{className:"icon-envelope"}),"Email: ",t.email," (only visible to you)"),r.a.createElement("li",{className:"User-info-info-contribution"},r.a.createElement("span",{className:"icon-thumb_up_alt"}),"Contribution:",r.a.createElement("span",{className:k},t.contribution)),r.a.createElement("li",null,r.a.createElement("span",{className:"icon-note-text"}),"Total notes: ".concat(t.totalNotes)),t.cfUsername&&r.a.createElement("li",null,r.a.createElement("span",{className:"icon-account_box"}),"Codeforces handle:"," ",r.a.createElement(Z,{username:t.cfUsername,rank:t.cfRank,linkToCf:!0})," ",r.a.createElement("b",null,"(",t.cfRating,")")),b&&r.a.createElement("li",{className:"User-info-info-error"},b)),r.a.createElement("div",{className:"User-info-avatar-outer"},r.a.createElement("div",{className:"User-info-avatar"},r.a.createElement("div",{className:"User-info-avatar-box"},y)))))},$=Object.freeze({SOLVED:{value:0,text:"Solved",css:"solved"},UPSOLVED:{value:1,text:"Upsolved",css:"upsolved"},UPSOLVED_HELP:{value:2,text:"Upsolved with help",css:"upsolved-help"},UNSOLVED:{value:3,text:"Unsolved",css:"unsolved"}}),ee=function(){function e(){Object(p.a)(this,e)}return Object(f.a)(e,null,[{key:"getProblemDisplayNameWithoutPlatform",value:function(e){if("CodeChef"===e.platform)return"".concat(e.contestCode," ").concat(e.problemCode," - ").concat(e.problemName);if("TopCoder"===e.platform){var t=3-Math.ceil(e.level/3),n=(e.level-1)%3+1,a="Division ".concat(t," Level ").concat(n);return"".concat(a," - ").concat(e.problemName)}return"".concat(e.problemCode," - ").concat(e.problemName)}},{key:"getProblemDisplayName",value:function(t){var n=e.getProblemDisplayNameWithoutPlatform(t);return"".concat(t.platform," ").concat(n)}},{key:"getContestDisplayName",value:function(e){var t=e.contestName.toLowerCase(),n=e.platform.toLowerCase();return t.includes(n)?e.contestName:"".concat(e.platform," - ").concat(e.contestName)}},{key:"getProblemLetter",value:function(e){if("Project Euler"===e.platform){var t=e.problemSk.split("#")[1];return x.removePrefixZeroes(t)}return e.problemSk.split("#")[1]}},{key:"getContests",value:function(){var e=Object(d.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={platform:t},e.next=3,W.getJson("contests",n);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getProblems",value:function(){var e=Object(d.a)(m.a.mark((function e(t,n){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={platform:t,contestId:n},e.next=3,W.getJson("problems",a);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getProblemInfo",value:function(){var e=Object(d.a)(m.a.mark((function e(t,n){var a,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={platform:t,problemId:n},e.next=3,W.getJson("problems",a);case 3:return(r=e.sent).problemId=n,r.platform=t,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getSolvedStateText",value:function(e){for(var t in e=parseInt(e),$)if($[t].value===e)return $[t].text}},{key:"getSolvedStateCssClass",value:function(e){for(var t in e=parseInt(e),$)if($[t].value===e)return $[t].css}}]),e}(),te=n(10),ne=(n(184),function(e){Object(b.a)(n,e);var t=Object(v.a)(n);function n(e){var a;return Object(p.a)(this,n),(a=t.call(this,e)).state={loading:!1,searchTerm:"",previousValidSearchTerm:"",showOptions:!1,lastChangedTime:0,lastLoadTime:0,options:[],filteredOptions:[]},a.handleChange=a.handleChange.bind(Object(h.a)(a)),a.handleBlur=a.handleBlur.bind(Object(h.a)(a)),a.handleFocus=a.handleFocus.bind(Object(h.a)(a)),a.handleOptionSelectWithKeys=a.handleOptionSelectWithKeys.bind(Object(h.a)(a)),a}return Object(f.a)(n,[{key:"getOptionString",value:function(e){var t,n=[],a=Object(te.a)(this.props.keys);try{for(a.s();!(t=a.n()).done;){var r=t.value;n.push(e[r])}}catch(s){a.e(s)}finally{a.f()}return n.join(" - ")}},{key:"filterOptions",value:function(){var e=Object(d.a)(m.a.mark((function e(){var t,n,a,r,s,o,c,i;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[],n=this.state.searchTerm.toLowerCase(),a=Object(te.a)(this.state.options),e.prev=3,a.s();case 5:if((r=a.n()).done){e.next=33;break}if(s=r.value,15!==t.length){e.next=9;break}return e.abrupt("break",33);case 9:if(!this.getOptionString(s).toLowerCase().includes(n)){e.next=13;break}return t.push(s),e.abrupt("continue",31);case 13:o=Object(te.a)(this.props.keys),e.prev=14,o.s();case 16:if((c=o.n()).done){e.next=23;break}if(i=c.value,!s[i].toLowerCase().includes(n)){e.next=21;break}return t.push(s),e.abrupt("break",23);case 21:e.next=16;break;case 23:e.next=28;break;case 25:e.prev=25,e.t0=e.catch(14),o.e(e.t0);case 28:return e.prev=28,o.f(),e.finish(28);case 31:e.next=5;break;case 33:e.next=38;break;case 35:e.prev=35,e.t1=e.catch(3),a.e(e.t1);case 38:return e.prev=38,a.f(),e.finish(38);case 41:return e.next=43,x.setStatePromise(this,{filteredOptions:t});case 43:case"end":return e.stop()}}),e,this,[[3,35,38,41],[14,25,28,31]])})));return function(){return e.apply(this,arguments)}}()},{key:"networkLoadOptions",value:function(){var e=Object(d.a)(m.a.mark((function e(){var t,n,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!1!==this.mounted){e.next=2;break}return e.abrupt("return");case 2:return t=Date.now(),e.next=5,x.setStatePromise(this,{loading:!0,lastLoadTime:t});case 5:return n=this.state.searchTerm,e.next=8,this.props.search(this.state.searchTerm);case 8:if(a=e.sent,n!==this.state.searchTerm){e.next=12;break}return e.next=12,x.setStatePromise(this,{filteredOptions:a});case 12:if(this.state.lastLoadTime!==t){e.next=15;break}return e.next=15,x.setStatePromise(this,{loading:!1});case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=Object(d.a)(m.a.mark((function e(){var t,n,a,r,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.props.network||!this.props.search){e.next=35;break}if(!this.props.initialSearchSortKey){e.next=31;break}return e.next=4,x.setStatePromise(this,{searchTerm:"",loading:!0});case 4:return e.next=6,this.props.search();case 6:t=e.sent,n=Object(te.a)(t),e.prev=8,n.s();case 10:if((a=n.n()).done){e.next=19;break}if((r=a.value).sk!==this.props.initialSearchSortKey){e.next=17;break}return s=this.getOptionString(r),e.next=16,x.setStatePromise(this,{searchTerm:s,previousValidSearchTerm:s,loading:!1,options:t});case 16:return e.abrupt("break",19);case 17:e.next=10;break;case 19:e.next=24;break;case 21:e.prev=21,e.t0=e.catch(8),n.e(e.t0);case 24:return e.prev=24,n.f(),e.finish(24);case 27:return e.next=29,this.filterOptions();case 29:e.next=33;break;case 31:return e.next=33,this.componentDidUpdate({});case 33:e.next=40;break;case 35:if(!this.props.initialSearchTerm){e.next=40;break}return e.next=38,x.setStatePromise(this,{searchTerm:this.props.initialSearchTerm});case 38:return e.next=40,this.networkLoadOptions();case 40:case"end":return e.stop()}}),e,this,[[8,21,24,27]])})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=Object(d.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.staticKey||this.props.staticKey){e.next=4;break}return e.next=3,x.setStatePromise(this,{searchTerm:""});case 3:return e.abrupt("return");case 4:if(this.props.initialSearchTerm===t.initialSearchTerm){e.next=7;break}return e.next=7,x.setStatePromise(this,{searchTerm:this.props.initialSearchTerm});case 7:if(this.props.staticKey!==t.staticKey){e.next=9;break}return e.abrupt("return");case 9:return e.next=11,x.setStatePromise(this,{searchTerm:"",loading:!0});case 11:return e.next=13,this.props.search();case 13:return n=e.sent,e.next=16,x.setStatePromise(this,{loading:!1,previousValidSearchTerm:"",options:n,showOptions:!1});case 16:return e.next=18,this.filterOptions();case 18:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleChange",value:function(){var e=Object(d.a)(m.a.mark((function e(t){var n,a=this;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.props.network){e.next=12;break}return n=Date.now(),e.next=4,x.setStatePromise(this,{searchTerm:t.target.value,lastChangedTime:n});case 4:if(!(this.state.searchTerm.length>0)){e.next=8;break}window.setTimeout((function(){a.state.lastChangedTime===n&&a.networkLoadOptions()}),250),e.next=10;break;case 8:return e.next=10,x.setStatePromise(this,{filteredOptions:[]});case 10:e.next=16;break;case 12:return e.next=14,x.setStatePromise(this,{searchTerm:t.target.value});case 14:return e.next=16,this.filterOptions();case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleBlur",value:function(){var e=Object(d.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=t.relatedTarget)||n.id!=="Select-options-".concat(this.props.name)){e.next=3;break}return e.abrupt("return");case 3:if(!this.props.network){e.next=8;break}return e.next=6,x.setStatePromise(this,{showOptions:!1});case 6:e.next=10;break;case 8:return e.next=10,x.setStatePromise(this,{showOptions:!1,searchTerm:this.state.previousValidSearchTerm});case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleFocus",value:function(){var e=Object(d.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.setStatePromise(this,{showOptions:!0});case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleOptionSelectWithKeys",value:function(){var e=Object(d.a)(m.a.mark((function e(t,n){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.setStatePromise(this,{searchTerm:n,previousValidSearchTerm:n,showOptions:!1});case 2:return e.next=4,this.filterOptions();case 4:this.props.callback(t);case 5:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"render",value:function(){var e,t=this,n=[],a=Object(te.a)(this.state.filteredOptions);try{var s=function(){var a=e.value;if(t.props.keys){var s=t.getOptionString(a),o=a[t.props.displayKey],c=a.sk;n.push(r.a.createElement("li",{onClick:function(){return t.handleOptionSelectWithKeys(c,o)},key:c},s))}else{var i=function(){var e=Object(d.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.setStatePromise(t,{searchTerm:a,showOptions:!1});case 2:return t.props.callback(a),e.next=5,t.networkLoadOptions();case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();n.push(r.a.createElement("li",{onClick:i,key:a},a))}};for(a.s();!(e=a.n()).done;)s()}catch(c){a.e(c)}finally{a.f()}var o=!this.props.network&&(!this.props.search||this.state.loading);return r.a.createElement("div",{onBlur:this.handleBlur,className:"Search-select"},r.a.createElement("input",{className:this.state.loading?"Askd-form-loading":"",onChange:this.handleChange,autoComplete:"off",type:"text",value:this.state.searchTerm,onFocus:this.handleFocus,name:this.props.name,id:this.props.id,disabled:o,placeholder:this.props.placeholder}),n.length>0&&this.state.showOptions&&r.a.createElement("ol",{id:"Select-options-".concat(this.props.name),tabIndex:"-1",className:"Search-select-options"},n))}}]),n}(a.Component));var ae=function(e){var t=e.initialPlatform,n=e.initialContestId,s=e.initialProblemId,o=e.initialSkipContestSearch,c=e.changeCallback,i=Object(a.useState)(t),l=Object(z.a)(i,2),u=l[0],m=l[1],d=Object(a.useState)(n),p=Object(z.a)(d,2),f=p[0],h=p[1],b=Object(a.useState)(o),v=Object(z.a)(b,2),g=v[0],k=v[1],E=null,x=null;u&&!g&&(E=function(){return ee.getContests(u)},x=u);var y=null,w=null;u&&f?(y=function(){return ee.getProblems(u,f)},w=u+f):u&&g&&(y=function(){return ee.getProblems(u)},w=u);var O="Project Euler"===u?["name"]:["contestCode","name"],C="TopCoder"===u?["name"]:["problemCode","name"],N=u||"",I=g?"Want to filter by contest?":"Want to skip filtering by contest?";return Object(a.useEffect)((function(){null!==t&&m(t),null!==n&&h(n)}),[t,n]),r.a.createElement("div",{className:"Search-problem-select"},r.a.createElement("label",{htmlFor:"cp-platform"},"Platform"),r.a.createElement("select",{value:N,onChange:function(e){m(e.target.value),h(null),c(e.target.value,null,null)},name:"platform",id:"cp-platform"},r.a.createElement("option",{disabled:!0,value:""}),r.a.createElement("option",{value:"CodeForces"},"CodeForces"),r.a.createElement("option",{value:"CodeChef"},"CodeChef"),r.a.createElement("option",{value:"AtCoder"},"AtCoder"),r.a.createElement("option",{value:"TopCoder"},"TopCoder"),r.a.createElement("option",{value:"Project Euler"},"Project Euler"),r.a.createElement("option",{value:"ICPC"},"ICPC (Kattis)")),r.a.createElement("label",{htmlFor:"cp-contest"},"Contest"),r.a.createElement(ne,{name:"contest",id:"cp-contest",search:E,keys:O,callback:function(e){h(e),c(u,e,null)},displayKey:"name",staticKey:x,initialSearchSortKey:n}),r.a.createElement("button",{onClick:function(){k(!g),h(null)},type:"button",className:"Askd-form-link Askd-form-link-separator"},I),r.a.createElement("label",{htmlFor:"cp-title"},"Problem"),r.a.createElement(ne,{name:"title",id:"cp-title",search:y,keys:C,callback:function(e){c(u,f,e)},displayKey:"name",staticKey:w,initialSearchSortKey:s}))},re=(n(185),function(e){Object(b.a)(n,e);var t=Object(v.a)(n);function n(e){var a;return Object(p.a)(this,n),(a=t.call(this,e)).state={error:"",loading:!1},a.platform=null,a.contestId=null,a.problemId=null,a.close=a.close.bind(Object(h.a)(a)),a.problemChangeCallback=a.problemChangeCallback.bind(Object(h.a)(a)),a.addProblem=a.addProblem.bind(Object(h.a)(a)),a.setLoading=a.setLoading.bind(Object(h.a)(a)),a}return Object(f.a)(n,[{key:"close",value:function(){this.props.callback(null,null,null)}},{key:"problemChangeCallback",value:function(e,t,n){var a=[e,t,n];this.platform=a[0],this.contestId=a[1],this.problemId=a[2]}},{key:"addProblem",value:function(){var e=Object(d.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),this.problemId){e.next=5;break}return e.next=4,x.componentSetError(this,"Please search and select a problem.");case 4:return e.abrupt("return");case 5:return e.next=7,this.setLoading(!0);case 7:this.props.callback(this.problemId,this.platform,this);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setLoading",value:function(){var e=Object(d.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.setStatePromise(this,{loading:t});case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e="Askd-button";return this.state.loading&&(e+=" Askd-form-loading"),r.a.createElement("div",{className:"Module-blocker"},r.a.createElement("button",{onClick:this.close,className:"Askd-form-close Askd-button Askd-button-circular"}),r.a.createElement("div",{className:"Add-problem-form Module-popup"},this.state.error&&r.a.createElement("h2",null,this.state.error),r.a.createElement("h2",null,"Add a problem!"),r.a.createElement("form",{className:"Askd-form",onSubmit:this.addProblem},r.a.createElement(ae,{changeCallback:this.problemChangeCallback}),r.a.createElement("input",{className:e,type:"submit",value:"Add Problem",disabled:this.state.loading}))))}}]),n}(a.Component)),se=null,oe=null,ce=function(){function e(){Object(p.a)(this,e)}return Object(f.a)(e,null,[{key:"getNoteEditLink",value:function(e){var t=e.problemSk.replace("#","/");return"/notes/edit/".concat(e.platform,"/").concat(t)}},{key:"getNotePublishedLink",value:function(e){var t=e.problemSk.replace("#","/");return"/notes/".concat(e.username,"/").concat(e.platform,"/").concat(t)}},{key:"getNoteDisplayName",value:function(e){var t=ee.getContestDisplayName(e),n=ee.getProblemDisplayNameWithoutPlatform(e);return"".concat(t," ").concat(n)}},{key:"getNotes",value:function(){var e=Object(d.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={username:t},e.next=3,W.getJson("notes",n);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getMostLikedNotes",value:function(){var t=Object(d.a)(m.a.mark((function t(n,a,r,s,o){var c,i,l,u,d,p,f,h,b,v,g,k;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=42;break}return t.next=3,e.getNotes(n);case 3:(c=t.sent).notes.sort((function(e,t){return t.likeCount-e.likeCount})),i=[],l=Object(te.a)(c.notes),t.prev=7,l.s();case 9:if((u=l.n()).done){t.next=22;break}if((d=u.value).published){t.next=13;break}return t.abrupt("continue",20);case 13:if(!a||d.platform===a){t.next=15;break}return t.abrupt("continue",20);case 15:if(!r||d.contestCode===r){t.next=17;break}return t.abrupt("continue",20);case 17:if(!s||d.problemSk===s){t.next=19;break}return t.abrupt("continue",20);case 19:i.push(d);case 20:t.next=9;break;case 22:t.next=27;break;case 24:t.prev=24,t.t0=t.catch(7),l.e(t.t0);case 27:return t.prev=27,l.f(),t.finish(27);case 30:if(p=Math.ceil(i.length/50),!(o>Math.max(p,1))){t.next=35;break}throw(f=Error()).name="PageNotFound",f;case 35:for(h=[],b=50*(o-1),v=Math.min(b+50,i.length),g=b;g<v;g++)h.push(i[g]);return t.abrupt("return",{notes:h,userRanks:c.userRanks,totalPages:Math.max(p,1)});case 42:return k={username:n,platform:a,contestId:r,problemId:s,page:o},t.next=45,W.getJson("notes",k);case 45:return t.abrupt("return",t.sent);case 46:case"end":return t.stop()}}),t,null,[[7,24,27,30]])})));return function(e,n,a,r,s){return t.apply(this,arguments)}}()},{key:"getMostRecentNotes",value:function(){var e=Object(d.a)(m.a.mark((function e(t){var n,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(1===t&&Date.now()-se<12e4)){e.next=2;break}return e.abrupt("return",oe);case 2:return n={page:t,recent:!0},e.next=5,W.getJson("notes",n);case 5:return a=e.sent,1===t&&(oe=a,se=Date.now()),e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getNoteInfo",value:function(){var e=Object(d.a)(m.a.mark((function e(t,n,a,r){var s,o;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s={username:t,platform:n,problemId:a,forcePublished:r},e.next=3,W.getJson("notes",s);case 3:return(o=e.sent).problemInfo.platform=n,o.problemInfo.problemId=a,e.abrupt("return",o);case 7:case"end":return e.stop()}}),e)})));return function(t,n,a,r){return e.apply(this,arguments)}}()},{key:"addNote",value:function(){var e=Object(d.a)(m.a.mark((function e(t,n,a){var r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={username:t,platform:n,problemId:a},e.next=3,W.postJson("notes",r);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"editNote",value:function(){var e=Object(d.a)(m.a.mark((function e(t,n,a,r,s,o,c){var i;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i={username:t,platform:n,problemId:a,title:r,solved:s,content:JSON.stringify(o),published:c},e.next=3,W.putJson("notes",i);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,n,a,r,s,o,c){return e.apply(this,arguments)}}()},{key:"deleteNote",value:function(){var e=Object(d.a)(m.a.mark((function e(t,n,a){var r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={username:t,platform:n,problemId:a},e.next=3,W.deleteJson("notes",r);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}()}]),e}(),ie=n(127),le=function(e){Object(b.a)(n,e);var t=Object(v.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return Object(f.a)(n,[{key:"render",value:function(){var e=this.props.info,t=ee.getSolvedStateCssClass(e.solved),n=ce.getNoteEditLink(e),a=ce.getNotePublishedLink(e),s=e.published?"published":"unpublished",o=ee.getProblemDisplayName(e),c=new Date(e.editedTime).toLocaleDateString(),l=e.username,u=this.props.mostLikedMode?" - "+e.title:e.title;return r.a.createElement("li",{className:"User-note-info User-note-info-".concat(t)},r.a.createElement("ul",{className:"User-note-info-links"},this.props.loggedInUsername===l&&r.a.createElement("li",null,r.a.createElement(i.b,{className:"Askd-form-link",to:n},"Edit")),e.published&&r.a.createElement("li",null,r.a.createElement(i.b,{className:"Askd-form-link",to:a},"View"))),r.a.createElement("h5",null,e.published&&e.likeCount>0&&r.a.createElement("span",{className:"Like-dislike-score"},r.a.createElement("span",{className:"icon-thumb_up_alt"}),e.likeCount),o),r.a.createElement("h6",{className:"User-note-info-title"},this.props.mostLikedMode&&r.a.createElement(Z,{username:l,rank:this.props.authorRank}),u),r.a.createElement("h6",{className:"User-note-info-timestamp"},c),r.a.createElement("ul",{className:"User-note-info-tags"},r.a.createElement("li",{className:"User-note-info-tag User-note-solved-indicator"}),r.a.createElement("li",{className:"User-note-info-tag User-note-tag-".concat(s)})))}}]),n}(a.Component),ue=function(e){Object(b.a)(n,e);var t=Object(v.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return Object(f.a)(n,[{key:"render",value:function(){for(var e=this.props.info,t=[],n=0;n<e.notes.length;n++){var a=e.notes[n],s=ee.getProblemLetter(a),o=a.problemSk.replace("#","/"),c=a.username,l="User-note-contest-code";s.length>=3&&(l+="-small");var u=ee.getSolvedStateCssClass(a.solved);t.push(r.a.createElement("li",{key:n,className:"User-note-contest-note User-note-contest-".concat(u)},r.a.createElement("ul",{className:"User-note-contest-links"},this.props.loggedInUsername===c&&r.a.createElement("li",null,r.a.createElement(i.b,{className:"Askd-form-link",to:"/notes/edit/".concat(a.platform,"/").concat(o)},"Edit")),a.published&&r.a.createElement("li",null,r.a.createElement(i.b,{className:"Askd-form-link",to:"/notes/".concat(c,"/").concat(a.platform,"/").concat(o)},"View"))),r.a.createElement("span",{className:l},s)))}var m=ee.getContestDisplayName(e),d=new Date(e.editedTime).toLocaleDateString();return r.a.createElement("li",{className:"User-note-info"},r.a.createElement("h5",null,m),r.a.createElement("h6",{className:"User-note-contest-timestamp"},d),r.a.createElement("ul",{className:"User-note-contest-notes"},t))}}]),n}(a.Component);var me=function(e){var t=e.title,n=e.innerContent,a=e.showing,s=e.colorClass,o=e.toggleCallback,c=a?"Hide":"Show";s||(s="default");var i="User-notes-title-dropdown-heading "+"User-notes-title-dropdown-heading-".concat(s);return r.a.createElement("li",{className:"User-notes-title-dropdown"},r.a.createElement("button",{className:"User-notes-title-dropdown-showhide",onClick:o},c),r.a.createElement("h4",{className:i},t),a&&n)},de=function(){function e(t,n){Object(p.a)(this,e),this.pageSize=t,this.setContent(n)}return Object(f.a)(e,[{key:"setContent",value:function(e){this.content=[],this.activeItems=e.length;for(var t=0;t<e.length;t++){var n=e[t];n.paginatorActive=!0,this.content.push(n)}}},{key:"toggleActiveItems",value:function(e){var t,n=Object(te.a)(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,r=this.content[a].paginatorActive;this.content[a].paginatorActive=!r,r?this.activeItems--:this.activeItems++}}catch(s){n.e(s)}finally{n.f()}}},{key:"getContent",value:function(e){var t,n=1,a=0,r=[],s=Object(te.a)(this.content);try{for(s.s();!(t=s.n()).done;){var o=t.value;if(r.push(o),o.paginatorActive&&++a===this.pageSize){if(n===e)return r;r=[],a=0,n++}}}catch(c){s.e(c)}finally{s.f()}if(n===e)return r;throw Error("Page index out of range!")}},{key:"getPageCount",value:function(){var e,t=0,n=0,a=0,r=Object(te.a)(this.content);try{for(r.s();!(e=r.n()).done;){var s=e.value;0===n&&t++,n++,s.paginatorActive&&a++,a===this.pageSize&&(a=0,n=0)}}catch(o){r.e(o)}finally{r.f()}return t}}]),e}();n(186);var pe=function(e){for(var t=e.currentPage,n=e.totalPages,a=e.bottom,s=e.callback,o=[t],c=t+1,i=2;c<n;)o.push(c),c+=i,i*=2;var l=t-1;for(i=2;l>1;)o.push(l),l-=i,i*=2;1!==t&&o.push(1),t!==n&&n>1&&o.push(n),o.sort((function(e,t){return e-t}));for(var u=[],m=function(){var e=p[d],n=e===t?"Paginator-list-selected":"Paginator-list-free",a=e===t?null:function(){return s(e)};u.push(r.a.createElement("li",{key:e},r.a.createElement("button",{className:n,onClick:a},e)))},d=0,p=o;d<p.length;d++)m();var f="Paginator";return a&&(f+=" Paginator-bottom"),r.a.createElement("div",{className:f},r.a.createElement("ul",{className:"Paginator-list"},u))},fe=Object.freeze({CONTEST:0,PLATFORM:1,SOLVED:2});function he(e,t){return e.editedTime>t.editedTime?-1:1}function be(e,t){var n,a={},r=Object(te.a)(e);try{for(r.s();!(n=r.n()).done;){var s,o=n.value,c=[],i=Object(te.a)(t);try{for(i.s();!(s=i.n()).done;){var l=s.value;c.push(o[l])}}catch(m){i.e(m)}finally{i.f()}var u=c.join("#");a.hasOwnProperty(u)?a[u].push(o):a[u]=[o]}}catch(m){r.e(m)}finally{r.f()}return a}var ve=function(e){Object(b.a)(n,e);var t=Object(v.a)(n);function n(e){var a;return Object(p.a)(this,n),(a=t.call(this,e)).state={page:1,loggedInUsername:null},a.sortNoteItems(a.props.notes),a.virtualPaginator=new de(15,a.sortedNoteItems),a.updatePage=a.updatePage.bind(Object(h.a)(a)),a}return Object(f.a)(n,[{key:"componentDidMount",value:function(){var e=Object(d.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.getUsername();case 2:return t=e.sent,e.next=5,x.setStatePromise(this,{loggedInUsername:t});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createContestObject",value:function(e){var t=e[0],n={contestCode:t.contestCode,contestName:t.contestName,platform:t.platform,editedTime:t.editedTime,notes:[]};this.props.organizeBySolved&&(n.solved=t.solved),this.props.organizeByPlatform&&(n.platform=t.platform);var a,r=Object(te.a)(e);try{for(r.s();!(a=r.n()).done;){var s=a.value;n.notes.push(s),s.editedTime>n.editedTime&&(n.editedTime=s.editedTime)}}catch(o){r.e(o)}finally{r.f()}return n}},{key:"sortNoteItems",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:fe.SOLVED,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=[];if(t===fe.CONTEST)if(this.props.organizeByContest){var r=be(e,["platform","contestCode"]);for(var s in r){var o=this.createContestObject(r[s]);a.push(this.sortedNoteItems.length),this.sortedNoteItems.push(o)}}else{var c,i=Object(te.a)(e);try{for(i.s();!(c=i.n()).done;){var l=c.value;a.push(this.sortedNoteItems.length),this.sortedNoteItems.push(l)}}catch(k){i.e(k)}finally{i.f()}}else{var u,m;if(t===fe.SOLVED?(this.sortedNoteItems=[],this.dropdownShowing={},this.dropdownIndices={},this.props.sortByRecent&&(e=Object(ie.a)(e).sort(he)),u=this.props.organizeBySolved,m="solved"):(u=this.props.organizeByPlatform,m="platform"),!u)return this.sortNoteItems(e,t-1,n);var d=be(e,[m]);for(var p in d){var f="".concat(n,"#").concat(p),h=this.sortNoteItems(d[p],t-1,f);this.dropdownShowing[f]=!0,this.dropdownIndices[f]=h;var b,v=Object(te.a)(h);try{for(v.s();!(b=v.n()).done;){var g=b.value;a.push(g)}}catch(k){v.e(k)}finally{v.f()}}}return a}},{key:"renderNoteItems",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:fe.SOLVED,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",s=[];if(n===fe.CONTEST)for(var o=this.props.organizeByContest?ue:le,c=0;c<e.length;c++)s.push(r.a.createElement(o,{key:c,info:e[c],loggedInUsername:this.state.loggedInUsername}));else{var i,l;if(n===fe.SOLVED?(i=this.props.organizeBySolved,l="solved"):(i=this.props.organizeByPlatform,l="platform"),!i)return this.renderNoteItems(e,n-1);var u=be(e,[l]),p=function(e){var o="".concat(a,"#").concat(e),c=t.renderNoteItems(u[e],n-1,o),i=n===fe.SOLVED?ee.getSolvedStateText(e):e,p=t.dropdownShowing[o],f=t.dropdownIndices[o],h=function(){var e=Object(d.a)(m.a.mark((function e(){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.virtualPaginator.toggleActiveItems(f),t.dropdownShowing[o]=!t.dropdownShowing[o],n=t.virtualPaginator.getPageCount(),!(t.state.page>n)){e.next=6;break}return e.next=6,t.updatePage(n);case 6:t.forceUpdate();case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),b=null;"solved"===l&&(b=ee.getSolvedStateCssClass(e)),s.push(r.a.createElement(me,{key:e,title:i,innerContent:c,showing:p,toggleCallback:h,colorClass:b}))};for(var f in u)p(f)}return r.a.createElement("ul",{className:"User-notes-list"},s)}},{key:"updatePage",value:function(){var e=Object(d.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.setStatePromise(this,{page:t});case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"shouldComponentUpdate",value:function(e,t){var n=this,a=["organizeBySolved","organizeByPlatform","organizeByContest","sortByRecent"],r=a.map((function(e){return n.props[e]})),s=a.map((function(t){return e[t]}));return JSON.stringify(r)===JSON.stringify(s)||(this.props=e,this.sortNoteItems(this.props.notes),this.virtualPaginator.setContent(this.sortedNoteItems),1===this.state.page)||(this.updatePage(1),!1)}},{key:"render",value:function(){var e=this;if(0===this.props.notes.length)return r.a.createElement("p",{className:"User-notes-nothing"},"There's nothing to see here yet!");var t=this.virtualPaginator.getContent(this.state.page),n=this.virtualPaginator.getPageCount(),a=function(t){return r.a.createElement(pe,{currentPage:e.state.page,totalPages:n,callback:e.updatePage,bottom:t})};return r.a.createElement(r.a.Fragment,null,a(!1),this.renderNoteItems(t),a(!0))}}]),n}(a.Component),ge=(n(187),function(e){Object(b.a)(n,e);var t=Object(v.a)(n);function n(e){var a;return Object(p.a)(this,n),(a=t.call(this,e)).state={showAddProblemForm:!1,organizeBySolved:!1,organizeByPlatform:!1,organizeByContest:!1,sortByRecent:!1},a.toggleAddProblemForm=a.toggleAddProblemForm.bind(Object(h.a)(a)),a.toggleOrganizeBySolved=a.toggleOrganizeBySolved.bind(Object(h.a)(a)),a.toggleOrganizeByPlatform=a.toggleOrganizeByPlatform.bind(Object(h.a)(a)),a.toggleOrganizeByContest=a.toggleOrganizeByContest.bind(Object(h.a)(a)),a.toggleSortByRecent=a.toggleSortByRecent.bind(Object(h.a)(a)),a.addProblem=a.addProblem.bind(Object(h.a)(a)),a}return Object(f.a)(n,[{key:"toggleAddProblemForm",value:function(){var e=Object(d.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.setStatePromise(this,{showAddProblemForm:!this.state.showAddProblemForm});case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toggleOrganizeBySolved",value:function(){var e=Object(d.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.setStatePromise(this,{organizeBySolved:!this.state.organizeBySolved});case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toggleOrganizeByPlatform",value:function(){var e=Object(d.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.setStatePromise(this,{organizeByPlatform:!this.state.organizeByPlatform});case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toggleOrganizeByContest",value:function(){var e=Object(d.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.setStatePromise(this,{organizeByContest:!this.state.organizeByContest});case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toggleSortByRecent",value:function(){var e=Object(d.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.setStatePromise(this,{sortByRecent:!this.state.sortByRecent});case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addProblem",value:function(){var e=Object(d.a)(m.a.mark((function e(t,n,a){var r,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=4;break}return e.next=3,this.toggleAddProblemForm();case 3:return e.abrupt("return");case 4:return e.prev=4,r=this.props.userInfo.username,e.next=8,ce.addNote(r,n,t);case 8:s=t.replace("#","/"),this.props.history.push("/notes/edit/".concat(n,"/").concat(s)),e.next=18;break;case 12:return e.prev=12,e.t0=e.catch(4),e.next=16,x.componentSetError(a,e.t0.message);case 16:return e.next=18,a.setLoading(!1);case 18:case"end":return e.stop()}}),e,this,[[4,12]])})));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,this.state.showAddProblemForm&&r.a.createElement(re,{callback:this.addProblem}),r.a.createElement("div",{className:"User-notes-outer Module-outer-space"},r.a.createElement("h2",{className:"Module-heading"},"Notes"),r.a.createElement("form",null,r.a.createElement("div",{className:"User-notes-organize"},r.a.createElement("label",null,r.a.createElement("b",null,"Organize by")),r.a.createElement("input",{type:"checkbox",name:"solved",value:"solved",onChange:this.toggleOrganizeBySolved}),r.a.createElement("label",{htmlFor:"solved"},"Solved"),r.a.createElement("input",{type:"checkbox",name:"platform",value:"platform",onChange:this.toggleOrganizeByPlatform}),r.a.createElement("label",{htmlFor:"platform"},"Platform"),r.a.createElement("input",{type:"checkbox",name:"contest",value:"contest",onChange:this.toggleOrganizeByContest}),r.a.createElement("label",{htmlFor:"contest"},"Contest")),r.a.createElement("div",{className:"User-notes-organize"},r.a.createElement("label",{htmlFor:"sort"},r.a.createElement("b",null,"Sort by")),r.a.createElement("select",{defaultValue:"default",name:"sort",onChange:this.toggleSortByRecent},r.a.createElement("option",{value:"default"},"Default"),r.a.createElement("option",{value:"recent"},"Recent")))),r.a.createElement("div",{className:"User-notes Module-space"},r.a.createElement(ve,{organizeBySolved:this.state.organizeBySolved,organizeByPlatform:this.state.organizeByPlatform,organizeByContest:this.state.organizeByContest,sortByRecent:this.state.sortByRecent,notes:this.props.notes}),this.props.userInfo.email&&r.a.createElement("button",{onClick:this.toggleAddProblemForm,className:"User-notes-add Askd-button Askd-button-circular"},r.a.createElement("span",{className:"icon-plus"})))))}}]),n}(a.Component));function ke(){return(ke=Object(d.a)(m.a.mark((function e(t,n){var a,r,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.match.params.username,e.next=3,X.getUserInfo(a);case 3:return r=e.sent,e.next=6,ce.getNotes(a);case 6:return s=e.sent,r.totalNotes=s.notes.length,r.username=a,e.abrupt("return",{userInfo:r,notes:s.notes});case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ee=V((function(e,t){return ke.apply(this,arguments)}),null,"UserNotFound",(function(e){var t=e.otherProps,n=e.info,a=e.screen;return a===G.NOT_FOUND?r.a.createElement("div",{className:"Module-description"},r.a.createElement("h2",null,"User not found!")):a===G.LOADING?r.a.createElement(H,null):r.a.createElement(r.a.Fragment,null,r.a.createElement(Q,{info:n.userInfo}),r.a.createElement(ge,{userInfo:n.userInfo,notes:n.notes,history:t.history}))})),xe=Object.freeze({MATH:1,BOLD:2,ITALIC:4,UNDERLINE:8,STRIKETHROUGH:16,IMAGE:32}),ye=function(){function e(){Object(p.a)(this,e)}return Object(f.a)(e,null,[{key:"toolbarMergeBit",value:function(e,t,n){return e===xe.MATH?t?e:0:(n&xe.MATH&&(n^=xe.MATH),n^e)}},{key:"editorMergeBit",value:function(e,t,n){return n&xe.IMAGE?n:e===xe.MATH?t?e:(n&e&&(n^=e),n):(n&xe.MATH&&(n=0),t?n|e:(n&e&&(n^=e),n))}},{key:"getClassName",value:function(e){var t="";for(var n in xe)e&xe[n]&&(t+="Askd-te-".concat(n," "));return t}}]),e}();var we=function(){function e(t){Object(p.a)(this,e),this.id=t}return Object(f.a)(e,[{key:"getInfo",value:function(){var e=window.getSelection(),t=e.anchorNode.parentElement,n=e.focusNode.parentElement,a=t,r=n,s=this.getContainingMathBlock(t),o=this.getContainingMathBlock(n);s&&(t=s),o&&(n=o);var c,i,l,u,m=t.getAttribute("index"),d=n.getAttribute("index"),p=t.getAttribute("position"),f=n.getAttribute("position"),h="Askd-te-CARET"===t.getAttribute("id");if(null===m||null===d)return{rangeSelect:!1,index:0,position:0,insideCaretBlock:!1,editorSelected:!0};if(a.classList.contains("Askd-te-MATHJAX")&&0===e.anchorOffset&&(p=0),r.classList.contains("Askd-te-MATHJAX")&&0===e.focusOffset&&(f=0),null===p&&(p=e.anchorOffset),null===f&&(f=e.focusOffset),m=Number(m),p=Number(p),d=Number(d),f=Number(f),m===d&&p===f)return{rangeSelect:!1,index:m,position:p,insideCaretBlock:h,editorSelected:!0};if(i=p,u=f,!((c=m)===(l=d)?i<u:c<l)){var b=[d,m];m=b[0],d=b[1];var v=[f,p];p=v[0],f=v[1]}return{rangeSelect:!0,leftIndex:m,leftPosition:p,rightIndex:d,rightPosition:f,editorSelected:!0}}},{key:"setInfo",value:function(e,t){e.rangeSelect?(this.removeCaretBlock(),this.setRangePosition(e.leftIndex,e.leftPosition,e.rightIndex,e.rightPosition)):e.insideCaretBlock?(this.addCaretBlock(e.index,e.position,t),this.setPosition(-1,1)):(this.removeCaretBlock(),this.setPosition(e.index,e.position))}},{key:"setPosition",value:function(e,t){var n,a=(n=e>=0?document.getElementById(this.id+e):document.getElementById("Askd-te-CARET")).childNodes[0];a||(a=document.createTextNode(""),n.appendChild(a));var r=document.createRange();r.setStart(a,t),r.collapse(!0);var s=window.getSelection();s.removeAllRanges(),s.addRange(r)}},{key:"setRangePosition",value:function(e,t,n,a){var r=document.getElementById(this.id+e),s=document.getElementById(this.id+n),o=r.childNodes[0],c=s.childNodes[0],i=document.createRange();i.setStart(o,t),i.setEnd(c,a);var l=window.getSelection();l.removeAllRanges(),l.addRange(i)}},{key:"addCaretBlock",value:function(e,t,n){this.removeCaretBlock();var a=document.createElement("div");a.setAttribute("id","Askd-te-CARET"),a.setAttribute("index",e),a.setAttribute("position",t),a.setAttribute("class",ye.getClassName(n)),a.innerHTML=String.fromCharCode(8203);var r=document.getElementById(this.id+(e+1));r.parentElement.insertBefore(a,r)}},{key:"removeCaretBlock",value:function(){var e=document.getElementById("Askd-te-CARET");return!!e&&(e.parentElement.removeChild(e),!0)}},{key:"getContainingMathBlock",value:function(e){for(;e;){if(e.classList.contains("Askd-te-MATHJAX"))return e;e=e.parentElement}return null}}]),e}(),Oe=function(e){Object(b.a)(n,e);var t=Object(v.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return Object(f.a)(n,[{key:"render",value:function(){var e=this,t=(this.props.mask&xe.BOLD)>0,n=(this.props.mask&xe.ITALIC)>0,a=(this.props.mask&xe.UNDERLINE)>0,s=(this.props.mask&xe.STRIKETHROUGH)>0,o=(this.props.mask&xe.MATH)>0,c=function(t){return function(n){n.preventDefault(),e.props.callback(t)}};return r.a.createElement("div",{className:"Askd-text-editor-toolbar"},r.a.createElement("ul",null,r.a.createElement("li",{className:"Askd-tb-selected-".concat(t)},r.a.createElement("button",{type:"button",className:"Askd-tb-icon Askd-tb-BOLD",onPointerDown:c(xe.BOLD)})),r.a.createElement("li",{className:"Askd-tb-selected-".concat(n)},r.a.createElement("button",{type:"button",className:"Askd-tb-icon Askd-tb-ITALIC",onPointerDown:c(xe.ITALIC)})),r.a.createElement("li",{className:"Askd-tb-selected-".concat(a)},r.a.createElement("button",{type:"button",className:"Askd-tb-icon Askd-tb-UNDERLINE",onPointerDown:c(xe.UNDERLINE)})),r.a.createElement("li",{className:"Askd-tb-selected-".concat(s)},r.a.createElement("button",{type:"button",className:"Askd-tb-icon Askd-tb-STRIKETHROUGH",onPointerDown:c(xe.STRIKETHROUGH)})),r.a.createElement("li",{className:"Askd-tb-selected-".concat(o)},r.a.createElement("button",{type:"button",className:"Askd-tb-icon Askd-tb-MATH",onPointerDown:c(xe.MATH)})),r.a.createElement("li",{className:"Askd-tb-selected-false"},r.a.createElement("button",{type:"button",className:"Askd-tb-icon Askd-tb-IMAGE",onPointerDown:c(xe.IMAGE)}))))}}]),n}(a.Component);function Ce(e){var t,n=0,a=Object(te.a)(e);try{for(a.s();!(t=a.n()).done;){var r=t.value;Number(r),n++}}catch(s){a.e(s)}finally{a.f()}return n}var Ne=function(){function e(t){if(Object(p.a)(this,e),this.characters=[],this.caretBlockIndex=null,this.caretBlockPosition=null,t){var n,a=Object(te.a)(t);try{for(a.s();!(n=a.n()).done;){var r,s=n.value,o=s.m,c=s.l,i=s.s,l=Object(te.a)(s.c);try{for(l.s();!(r=l.n()).done;){var u=r.value;this.characters.push(this.createBlock(u,o,c,i))}}catch(m){l.e(m)}finally{l.f()}}}catch(m){a.e(m)}finally{a.f()}this.characters.splice(this.characters.length-1)}this.updateBlocks()}return Object(f.a)(e,[{key:"getIndexAndPosition",value:function(e){for(var t=0,n=0;n<this.blocks.length;n++){var a=Ce(this.blocks[n].c),r=t+a;if(e<=r)for(var s=0,o=t;o<=r;o++){if(e===o)return[n,s];s+=this.characters[o].c.length}t+=a}return[null,null]}},{key:"getGlobalIndex",value:function(e,t){for(var n=this.blockStarts[e],a=0;a<t&&n<this.characters.length;)a+=this.characters[n].c.length,n++;return a<=t?n:n-1}},{key:"getCorrectedIndexAndPosition",value:function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;null===a&&(a=this.getGlobalIndex(e,t));var r=this.getIndexAndPosition(a);if(n&&a<this.characters.length){var s=this.getGlobalIndex(r[0]+1,0);if(a===s)return[r[0]+1,0]}return r}},{key:"getCharacterMask",value:function(e,t,n){var a=this.getGlobalIndex(e,t);return 0===a?this.characters.length>0?this.characters[0].m:0:n?(a=Math.min(a,this.characters.length-1),this.characters[a].m):this.characters[a-1].m}},{key:"insert",value:function(e,t,n,a){var r,s=this.getGlobalIndex(e,t),o=this.characters.splice(s),c=Object(te.a)(n);try{for(c.s();!(r=c.n()).done;){var i=r.value;this.characters.push({m:a,c:i})}}catch(p){c.e(p)}finally{c.f()}var l,u=this.characters.length,m=Object(te.a)(o);try{for(m.s();!(l=m.n()).done;){var d=l.value;this.characters.push(d)}}catch(p){m.e(p)}finally{m.f()}return this.caretBlockIndex=null,this.caretBlockPosition=null,this.updateBlocks(),this.getIndexAndPosition(u)}},{key:"delete",value:function(e,t,n,a){var r=this.getGlobalIndex(e,t),s=this.getGlobalIndex(n,a)-r;if(r<0)return[0,0];this.characters.splice(r,s);var o=r;return this.caretBlockIndex=null,this.caretBlockPosition=null,this.updateBlocks(),this.getIndexAndPosition(o)}},{key:"rangeMaskUpdate",value:function(e,t,n,a,r,s){for(var o=this.getGlobalIndex(e,t),c=this.getGlobalIndex(n,a),i=o;i<c;i++)this.characters[i].m=ye.editorMergeBit(r,s,this.characters[i].m);this.caretBlockIndex=null,this.caretBlockPosition=null,this.updateBlocks();var l=this.getIndexAndPosition(o),u=Object(z.a)(l,2),m=u[0],d=u[1],p=this.getIndexAndPosition(c),f=Object(z.a)(p,2);return[m,d,f[0],f[1]]}},{key:"updateImage",value:function(e,t,n){var a=this.getGlobalIndex(e,0);this.characters[a].m&xe.IMAGE&&(t&&(this.characters[a].l=t),n&&(this.characters[a].s=n)),this.updateBlocks()}},{key:"addCaretBlock",value:function(e,t){this.caretBlockIndex=e,this.caretBlockPosition=t,this.updateBlocks()}},{key:"removeCaretBlock",value:function(e){if(null!==this.caretBlockIndex)if(this.caretBlockIndex=null,this.caretBlockPosition=null,e)if(e.rangeSelect){var t=this.getGlobalIndex(e.leftIndex,e.leftPosition),n=this.getGlobalIndex(e.rightIndex,e.rightPosition);this.updateBlocks();var a=this.getCorrectedIndexAndPosition(null,null,!1,t),r=Object(z.a)(a,2);e.leftIndex=r[0],e.leftPosition=r[1];var s=this.getCorrectedIndexAndPosition(null,null,!0,n),o=Object(z.a)(s,2);e.rightIndex=o[0],e.rightPosition=o[1]}else{var c=this.getGlobalIndex(e.index,e.position);this.updateBlocks();var i=this.getCorrectedIndexAndPosition(null,null,!1,c),l=Object(z.a)(i,2);e.index=l[0],e.position=l[1]}else this.updateBlocks()}},{key:"isEmpty",value:function(){return 0===this.characters.length}},{key:"atBlockNewlineEnd",value:function(e,t){if(this.isEmpty())return!0;var n=this.blocks[e].c;return n.length===t&&n[t-1]===String.fromCharCode(10)}},{key:"createBlock",value:function(e,t,n,a){var r={m:t,c:e};return n&&(r.l=n),a&&(r.s=a),r}},{key:"updateBlocks",value:function(){var e=this;this.blocks=[],this.blockStarts=[];var t=this.characters.length>0?this.characters[0].m:0,n=null,a=null,r=[],s=0;this.characters.forEach((function(o,c){o.m===xe.MATH&&o.c===String.fromCharCode(10)&&(o.c=" ");var i=e.blocks.length===e.caretBlockIndex&&s===e.caretBlockPosition,l=o.m===xe.IMAGE;o.m!==t||i||l?(e.blocks.push(e.createBlock(r.join(""),t,n,a)),e.blockStarts.push(c-r.length),s=o.c.length,t=o.m,n=o.l,a=o.s,r=[o.c]):(r.push(o.c),n=o.l,a=o.s,s+=o.c.length)})),this.blocks.push(this.createBlock(r.join(""),t,n,a)),this.blockStarts.push(this.characters.length-r.length),this.blocks.push({m:0,c:String.fromCharCode(10)}),this.blockStarts.push(this.characters.length)}},{key:"getContent",value:function(){return this.blocks}}]),e}();var Ie=function(e){var t=e.id,n=e.index,s=e.content,o=e.rendered,c=o?"\\("+s+"\\)":s,i=o?"Askd-te-MATHJAX":"Askd-te-MATH",l=o?s.length:null,u=Object(a.useMemo)((function(){return{id:t,rendered:o,blockLength:s.length}}),[t,o,s.length]);return Object(a.useEffect)((function(){if(u.rendered){x.renderMathJax(["#".concat(u.id)]);var e=document.getElementById(u.id);e.children[0].removeAttribute("tabIndex"),e.innerHTML=String.fromCharCode(8203)+e.innerHTML+String.fromCharCode(8203)}}),[u]),r.a.createElement("div",{className:i,id:t,index:n,position:l},c)};var je=function(e){var t=e.id,n=e.index,s=e.caretSelected,o=e.editable,c=e.initialLink,i=e.initialSize,l=e.handleBlockUpdate,u=Object(a.useState)(!1),p=Object(z.a)(u,2),f=p[0],h=p[1],b=Object(a.useState)(c||""),v=Object(z.a)(b,2),g=v[0],k=v[1],E=Object(a.useState)(c||null),y=Object(z.a)(E,2),w=y[0],O=y[1],C=Object(a.useState)(i||836),N=Object(z.a)(C,2),I=N[0],j=N[1],S=Object(a.useRef)(0),P=r.a.createRef();Object(a.useEffect)((function(){k(c||""),O(c||null)}),[c]),Object(a.useEffect)((function(){j(i)}),[i]);var A=function(e){f||(l({disableSelectionChange:!0}),P.current.classList.add("Askd-te-IMAGE-focused"),h(!0))},U=function(e){e.currentTarget.contains(e.relatedTarget)?e.preventDefault():(l({disableSelectionChange:!1}),P.current.classList.remove("Askd-te-IMAGE-focused"),h(!1))},T=function(){var e=Object(d.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.target.value,k(a),e.next=4,x.isImageLinkValid(a);case 4:if(e.sent&&!(Date.now()<S.current)){e.next=7;break}return e.abrupt("return");case 7:l({imageUpdate:{index:n,link:a}}),w||j(836),O(a),S.current=Date.now();case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),M=function(){var e=Object(d.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.target.value,l({imageUpdate:{index:n,size:a}}),j(a);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return o||(A=null,U=null),r.a.createElement("div",{className:"Askd-te-IMAGE",id:t,index:n,tabIndex:"0",contentEditable:!1,onFocus:A,onBlur:U,ref:P,style:{width:I*I/1e4+"%"}},r.a.createElement("span",{className:"Askd-te-IMAGE-ignore"},"!"),s&&r.a.createElement("div",{className:"Askd-te-IMAGE-blue"}),w&&r.a.createElement("img",{src:w,alt:"Text editor block"}),!w&&r.a.createElement("div",{className:"Askd-te-IMAGE-placeholder"},r.a.createElement("span",{className:"icon-photo"})),f&&r.a.createElement("div",{className:"Askd-form Askd-te-IMAGE-toolbar"},r.a.createElement("label",{htmlFor:"Askd-te-IMAGE-link"},"Link"),r.a.createElement("input",{type:"text",name:"Askd-te-IMAGE-link",onChange:T,value:g}),r.a.createElement("label",{htmlFor:"Askd-te-IMAGE-size"},"Size"),r.a.createElement("input",{type:"range",name:"Askd-te-IMAGE-size",min:200,max:1e3,value:I,onChange:M,disabled:!w})))},Se=function(e){Object(b.a)(n,e);var t=Object(v.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return Object(f.a)(n,[{key:"render",value:function(){var e=this.props.block,t=this.props.id,n=this.props.selected,a=this.props.index,s=this.props.editable,o=e.c,c=t+a;return e.m===xe.MATH?r.a.createElement(Ie,{id:c,rendered:!n,content:o,index:a}):e.m===xe.IMAGE?r.a.createElement(je,{id:c,index:a,caretSelected:n,editable:s,initialLink:e.l,initialSize:e.s,handleBlockUpdate:this.props.handleBlockUpdate}):r.a.createElement("div",{className:ye.getClassName(e.m),id:c,index:a},o)}}]),n}(a.Component);var Pe=function(e){var t=e.content,n=e.id,a=e.editable,s=e.caretInfo,o=e.handleBlur,c=e.handleFocus,i=e.handleBlockUpdate,l=[];t.forEach((function(e,t){var o=!1;a&&s.editorSelected&&(s.rangeSelect&&(o=e.m&xe.IMAGE?s.leftIndex<t&&t<=s.rightIndex:s.leftIndex<=t&&t<=s.rightIndex),s.rangeSelect||s.index!==t||s.insideCaretBlock||(o=!0)),l.push(r.a.createElement(Se,{block:e,id:n,index:t,key:t,selected:o,editable:a,handleBlockUpdate:i}))}));var u="Askd-text-editor-text";return u+=a?" Askd-text-editor-editable":" Askd-text-editor-uneditable",r.a.createElement("div",{className:u,id:n,contentEditable:a,suppressContentEditableWarning:"true",spellCheck:"false",onBlur:o,onFocus:c},l)},Ae=function(e,t){var n,a=[],r=Object(te.a)(e.childNodes);try{for(r.s();!(n=r.n()).done;){var s=n.value;s.nodeType!==Node.TEXT_NODE&&"BR"!==s.nodeName&&"SPAN"!==s.nodeName||a.push(s)}}catch(p){r.e(p)}finally{r.f()}for(var o=0,c=a;o<c.length;o++){var i=c[o];e.removeChild(i)}for(var l=0;l<t.length;l++){var u=e.children[l],m=u.classList.contains("Askd-te-MATHJAX"),d=u.classList.contains("Askd-te-IMAGE");m||d||u.innerHTML!==t[l].c&&(u.childNodes[0].nodeValue=t[l].c)}},Ue=function(e){e.textEditor.addEventListener("keydown",function(){var t=Object(d.a)(m.a.mark((function t(n){var a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.caretInfo.editorSelected){t.next=2;break}return t.abrupt("return");case 2:if(a=(e.state.editorMask&xe.MATH)>0,"Delete"!==n.key){t.next=7;break}n.preventDefault(),t.next=20;break;case 7:if("Backspace"!==n.key||e.composing){t.next=13;break}return t.next=10,e.delete();case 10:n.preventDefault(),t.next=20;break;case 13:if("Enter"!==n.key||e.composing||a){t.next=19;break}return t.next=16,e.insert(String.fromCharCode(10));case 16:n.preventDefault(),t.next=20;break;case 19:"Enter"===n.key&&n.preventDefault();case 20:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),e.textEditor.addEventListener("beforeinput",function(){var t=Object(d.a)(m.a.mark((function t(n){var a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("insertFromDrop"===n.inputType&&n.preventDefault(),!n.isComposing&&!e.composing&&e.caretInfo.editorSelected){t.next=3;break}return t.abrupt("return");case 3:if(n.preventDefault(),"insertReplacementText"!==n.inputType){t.next=11;break}return e.caretInfo.rangeSelect=!0,a=n.dataTransfer.getData("text"),t.next=9,e.insert(a);case 9:t.next=14;break;case 11:if(!n.data){t.next=14;break}return t.next=14,e.insert(n.data);case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),e.textEditor.addEventListener("input",function(){var t=Object(d.a)(m.a.mark((function t(n){var a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n.isComposing&&!e.composing&&e.caretInfo.editorSelected){t.next=2;break}return t.abrupt("return");case 2:if("insertReplacementText"!==n.inputType){t.next=10;break}return Ae(e.textEditor,e.state.content),e.caretInfo.rangeSelect=!0,a=n.dataTransfer.getData("text"),t.next=8,e.insert(a);case 8:t.next=14;break;case 10:if(!n.data){t.next=14;break}return Ae(e.textEditor,e.state.content),t.next=14,e.insert(n.data,!0);case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),e.textEditor.addEventListener("paste",function(){var t=Object(d.a)(m.a.mark((function t(n){var a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.caretInfo.editorSelected){t.next=2;break}return t.abrupt("return");case 2:return n.preventDefault(),a=n.clipboardData.getData("Text"),t.next=6,e.insert(a);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),e.textEditor.addEventListener("compositionstart",function(){var t=Object(d.a)(m.a.mark((function t(n){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.caretInfo.editorSelected){t.next=2;break}return t.abrupt("return");case 2:if(!e.caretInfo.rangeSelect){t.next=5;break}return t.next=5,e.delete();case 5:e.composing=!0,e.compositionIndex=e.caretInfo.index,e.compositionPosition=e.caretInfo.position;case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),e.textEditor.addEventListener("compositionend",function(){var t=Object(d.a)(m.a.mark((function t(n){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.composing&&e.caretInfo.editorSelected){t.next=2;break}return t.abrupt("return");case 2:return e.composing=!1,t.next=5,e.compositionInsert(n.data);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());var t=function(t){if(!e.composing&&!e.disableSelectionChange){var n=!1;try{var a=window.getSelection().anchorNode;if(e.textEditor.contains(a)){var r=e.caret.getInfo();for(var s in r)r.hasOwnProperty(s)&&e.caretInfo[s]!==r[s]&&(n=!0)}}catch(o){}n&&e.selectionChanged()}};document.addEventListener("selectionchange",t);return[t,function(t){e.caretInfo.editorSelected&&(e.caretInfo.editorSelected=!1,e.caretInfo.insideCaretBlock?(e.caretInfo.insideCaretBlock=!1,e.caret.removeCaretBlock(),e.virtualTextEditor.removeCaretBlock(),e.updateContent()):e.forceUpdate())}]},Te=n(290),Me=(n(188),function(e){Object(b.a)(n,e);var t=Object(v.a)(n);function n(e){var a;return Object(p.a)(this,n),(a=t.call(this,e)).id="Askd-text-editor-".concat(Object(Te.a)()),a.virtualTextEditor=new Ne(a.props.initialContent),a.caret=new we(a.id),a.contentChanged=!1,a.caretInfo={rangeSelect:!1,index:0,position:0,editorSelected:!1,insideCaretBlock:!1},a.composing=!1,a.compositionIndex=null,a.compositionPosition=null,a.state={content:a.virtualTextEditor.getContent(),editorMask:0},a.toolbarUpdate=a.toolbarUpdate.bind(Object(h.a)(a)),a.blockUpdate=a.blockUpdate.bind(Object(h.a)(a)),a}return Object(f.a)(n,[{key:"delete",value:function(){var e=Object(d.a)(m.a.mark((function e(){var t,n,a,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.caretInfo.rangeSelect?(a=this.virtualTextEditor.delete(this.caretInfo.leftIndex,this.caretInfo.leftPosition,this.caretInfo.rightIndex,this.caretInfo.rightPosition),r=Object(z.a)(a,2),this.caretInfo.index=r[0],this.caretInfo.position=r[1]):(t=this.virtualTextEditor.delete(this.caretInfo.index,this.caretInfo.position-1,this.caretInfo.index,this.caretInfo.position),n=Object(z.a)(t,2),this.caretInfo.index=n[0],this.caretInfo.position=n[1]),this.caretInfo.rangeSelect=!1,e.next=4,this.insertionUpdate();case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"insert",value:function(){var e=Object(d.a)(m.a.mark((function e(t,n){var a,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n||this.updateCaretInfo(),!this.caretInfo.rangeSelect){e.next=4;break}return e.next=4,this.delete();case 4:return a=this.virtualTextEditor.insert(this.caretInfo.index,this.caretInfo.position,t,this.state.editorMask),r=Object(z.a)(a,2),this.caretInfo.index=r[0],this.caretInfo.position=r[1],this.caretInfo.rangeSelect=!1,e.next=11,this.insertionUpdate();case 11:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"compositionInsert",value:function(){var e=Object(d.a)(m.a.mark((function e(t){var n,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.virtualTextEditor.insert(this.compositionIndex,this.compositionPosition,t,this.state.editorMask),a=Object(z.a)(n,2),this.caretInfo.index=a[0],this.caretInfo.position=a[1],this.caretInfo.rangeSelect=!1,e.next=7,this.insertionUpdate();case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"imageInsert",value:function(){var e=Object(d.a)(m.a.mark((function e(){var t,n,a,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.caretInfo.rangeSelect){e.next=11;break}return t=this.virtualTextEditor.insert(this.caretInfo.index,this.caretInfo.position,String.fromCharCode(10),this.state.editorMask),n=Object(z.a)(t,2),this.caretInfo.index=n[0],this.caretInfo.position=n[1],a=this.virtualTextEditor.insert(this.caretInfo.index,this.caretInfo.position,"!",xe.IMAGE),r=Object(z.a)(a,2),this.caretInfo.index=r[0],this.caretInfo.position=r[1],e.next=11,this.insertionUpdate();case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"rangeMaskUpdate",value:function(){var e=Object(d.a)(m.a.mark((function e(t,n){var a,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.caretInfo.rangeSelect){e.next=2;break}return e.abrupt("return");case 2:return a=this.virtualTextEditor.rangeMaskUpdate(this.caretInfo.leftIndex,this.caretInfo.leftPosition,this.caretInfo.rightIndex,this.caretInfo.rightPosition,t,n),r=Object(z.a)(a,4),this.caretInfo.leftIndex=r[0],this.caretInfo.leftPosition=r[1],this.caretInfo.rightIndex=r[2],this.caretInfo.rightPosition=r[3],e.next=10,this.insertionUpdate();case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"insertionUpdate",value:function(){var e=Object(d.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.contentChanged=!0,this.caret.removeCaretBlock(),this.caretInfo.insideCaretBlock=!1,e.next=5,this.checkCaretNextToImage();case 5:return e.next=7,this.updateContent();case 7:return this.caret.setInfo(this.caretInfo,this.state.editorMask),e.next=10,this.selectionChanged();case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateContent",value:function(){var e=Object(d.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.setStatePromise(this,{content:this.virtualTextEditor.getContent()});case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateMask",value:function(){var e=Object(d.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.setStatePromise(this,{editorMask:t});case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"toolbarUpdate",value:function(){var e=Object(d.a)(m.a.mark((function e(t){var n,a,r,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==xe.IMAGE){e.next=3;break}return this.imageInsert(),e.abrupt("return");case 3:if(this.caretInfo.editorSelected=!0,n=0===(this.state.editorMask&t),a=ye.toolbarMergeBit(t,n,this.state.editorMask),this.caretInfo.rangeSelect){e.next=25;break}if(r=this.virtualTextEditor.getCharacterMask(this.caretInfo.index,this.caretInfo.position,!1),s=this.caretInfo.insideCaretBlock,this.caretInfo.insideCaretBlock=a!==r||this.virtualTextEditor.atBlockNewlineEnd(this.caretInfo.index,this.caretInfo.position),!this.caretInfo.insideCaretBlock){e.next=16;break}return this.virtualTextEditor.addCaretBlock(this.caretInfo.index,this.caretInfo.position),e.next=14,this.updateContent();case 14:e.next=20;break;case 16:if(!s){e.next=20;break}return this.virtualTextEditor.removeCaretBlock(),e.next=20,this.updateContent();case 20:return e.next=22,this.updateMask(a);case 22:this.caret.setInfo(this.caretInfo,this.state.editorMask),e.next=27;break;case 25:return e.next=27,this.rangeMaskUpdate(t,n);case 27:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"blockUpdate",value:function(){var e=Object(d.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!0===t.disableSelectionChange?this.disableSelectionChange=!0:!1===t.disableSelectionChange&&(this.disableSelectionChange=!1),!t.imageUpdate){e.next=6;break}return this.virtualTextEditor.updateImage(t.imageUpdate.index,t.imageUpdate.link,t.imageUpdate.size),this.props.onChange&&this.props.onChange(this.virtualTextEditor.getContent()),e.next=6,this.updateContent();case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"checkCaretNextToImage",value:function(){var e=Object(d.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.caretInfo.rangeSelect){e.next=8;break}if(!(this.virtualTextEditor.getCharacterMask(this.caretInfo.index,this.caretInfo.position,!1)&xe.IMAGE)){e.next=8;break}return this.caretInfo.insideCaretBlock=!0,this.virtualTextEditor.addCaretBlock(this.caretInfo.index,this.caretInfo.position,0),e.next=7,this.updateContent();case 7:this.caret.setInfo(this.caretInfo,0);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"selectionChanged",value:function(){var e=Object(d.a)(m.a.mark((function e(){var t,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.caretInfo.insideCaretBlock,this.updateCaretInfo(),!t){e.next=8;break}return this.virtualTextEditor.removeCaretBlock(this.caretInfo),this.caret.removeCaretBlock(),e.next=7,this.updateContent();case 7:this.caret.setInfo(this.caretInfo,this.state.editorMask);case 8:if(!((n=this.caretInfo.rangeSelect?this.virtualTextEditor.getCharacterMask(this.caretInfo.leftIndex,this.caretInfo.leftPosition,!0):this.virtualTextEditor.getCharacterMask(this.caretInfo.index,this.caretInfo.position,!1))&xe.IMAGE)){e.next=13;break}return n=0,e.next=13,this.checkCaretNextToImage();case 13:return e.next=15,this.updateMask(n);case 15:this.caretInfo.rangeSelect||this.caret.setInfo(this.caretInfo,this.state.editorMask);case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateCaretInfo",value:function(){var e=this.caret.getInfo();if(this.caretInfo.editorSelected=!0,e.rangeSelect){var t=this.virtualTextEditor.getCorrectedIndexAndPosition(e.leftIndex,e.leftPosition,!1),n=Object(z.a)(t,2);this.caretInfo.leftIndex=n[0],this.caretInfo.leftPosition=n[1];var a=this.virtualTextEditor.getCorrectedIndexAndPosition(e.rightIndex,e.rightPosition,!0),r=Object(z.a)(a,2);this.caretInfo.rightIndex=r[0],this.caretInfo.rightPosition=r[1],this.caretInfo.rangeSelect=!0,this.caretInfo.insideCaretBlock=!1}else{var s=this.virtualTextEditor.getCorrectedIndexAndPosition(e.index,e.position,!1),o=Object(z.a)(s,2);this.caretInfo.index=o[0],this.caretInfo.position=o[1],this.virtualTextEditor.atBlockNewlineEnd(this.caretInfo.index,this.caretInfo.position)&&(e.insideCaretBlock=!0),this.caretInfo.rangeSelect=!1,this.caretInfo.insideCaretBlock=e.insideCaretBlock}}},{key:"componentDidMount",value:function(){this.textEditor=document.getElementById(this.id),this.outerTextEditor=document.getElementById(this.id+"!");var e=Ue(this),t=Object(z.a)(e,2);this.handleSelectionChange=t[0],this.handleBlur=t[1],this.props.focusOnMount&&this.textEditor.focus()}},{key:"componentDidUpdate",value:function(){this.contentChanged&&(Ae(this.textEditor,this.state.content),this.props.onChange&&this.props.onChange(this.state.content),this.contentChanged=!1)}},{key:"componentWillUnmount",value:function(){this.mounted=!1,document.removeEventListener("selectionchange",this.handleSelectionChange)}},{key:"render",value:function(){return r.a.createElement("div",{className:"Askd-text-editor",id:this.id+"!"},r.a.createElement(Oe,{mask:this.state.editorMask,callback:this.toolbarUpdate}),r.a.createElement(Pe,{content:this.state.content,id:this.id,editable:!0,handleBlur:this.handleBlur,handleFocus:this.handleSelectionChange,handleBlockUpdate:this.blockUpdate,caretInfo:this.caretInfo}))}}]),n}(a.Component)),Re=["dijkstra","aho-corasick","dynamic programming","fast matrix exponentiation","sieve of eratosthenes","fenwick tree","fast fourier transform","disjoint set union","square root decomposition","burnside's lemma","ford-fulkerson maximum flow","topological sort","0-1 breadth-first-search"],Be=function(e){Object(b.a)(n,e);var t=Object(v.a)(n);function n(e){var a;Object(p.a)(this,n),(a=t.call(this,e)).state={error:""};var r=Math.floor(Re.length*Math.random());return a.randomCode=Re[r],a.close=a.close.bind(Object(h.a)(a)),a.delete=a.delete.bind(Object(h.a)(a)),a.setLoading=a.setLoading.bind(Object(h.a)(a)),a}return Object(f.a)(n,[{key:"close",value:function(){this.props.exitCallback()}},{key:"delete",value:function(){var e=Object(d.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),t.target.confirmCode.value===this.randomCode){e.next=6;break}return e.next=5,x.componentSetError(this,"Your confirmation code doesn't match!");case 5:return e.abrupt("return");case 6:return e.prev=6,e.next=9,this.setLoading(!0);case 9:return e.next=11,this.props.deleteCallback();case 11:e.next=19;break;case 13:return e.prev=13,e.t0=e.catch(6),e.next=17,x.componentSetError(this,e.t0.message);case 17:return e.next=19,this.setLoading(!1);case 19:case"end":return e.stop()}}),e,this,[[6,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"setLoading",value:function(){var e=Object(d.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.setStatePromise(this,{loading:t});case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e="Askd-button";return this.state.loading&&(e+=" Askd-form-loading"),r.a.createElement("div",{className:"Module-blocker"},r.a.createElement("button",{onClick:this.close,className:"Askd-form-close Askd-button Askd-button-circular"}),r.a.createElement("div",{className:"Edit-note-delete-menu Module-popup"},this.state.error&&r.a.createElement("h2",null,this.state.error),r.a.createElement("h2",null,"Are you sure you want to permanently delete this"," "+this.props.entityName,"?"),r.a.createElement("p",null,"This action cannot be undone! Please enter the following text as confirmation."),r.a.createElement("form",{className:"Askd-form",onSubmit:this.delete},r.a.createElement("label",{htmlFor:"confirmCode"},this.randomCode),r.a.createElement("input",{autoComplete:"off",type:"text",name:"confirmCode",key:"confirmCode",id:"confirmCode"}),r.a.createElement("input",{className:e,type:"submit",value:"Delete",disabled:this.state.loading}))))}}]),n}(a.Component);function Le(e){e.preventDefault(),e.returnValue=""}var De=function(e){Object(b.a)(n,e);var t=Object(v.a)(n);function n(e){var a;Object(p.a)(this,n);var r=(a=t.call(this,e)).props.noteInfo;a.title=r.title,a.solved=r.solved,a.content=JSON.parse(r.content),a.lastSaved=new Date(r.editedTime);var s=r.username,o=a.props.platform,c=r.problemInfo.problemId.split("#").join("/");return a.publishedUrl="/notes/".concat(s,"/").concat(o,"/").concat(c),a.state={published:r.published,disableEditButtons:!1,saved:!0,loadingSave:!1,loadingPublish:!1,showDeleteMenu:!1},a.saveNote=a.saveNote.bind(Object(h.a)(a)),a.deleteNote=a.deleteNote.bind(Object(h.a)(a)),a.togglePublishNote=a.togglePublishNote.bind(Object(h.a)(a)),a.toggleDeleteMenu=a.toggleDeleteMenu.bind(Object(h.a)(a)),a.handleTitleChange=a.handleTitleChange.bind(Object(h.a)(a)),a.handleSolvedChange=a.handleSolvedChange.bind(Object(h.a)(a)),a.handleContentChange=a.handleContentChange.bind(Object(h.a)(a)),a}return Object(f.a)(n,[{key:"saveOrPublishNote",value:function(){var e=Object(d.a)(m.a.mark((function e(t){var n,a,r,s,o,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.props.noteInfo.username,a=this.props.platform,r=this.props.noteInfo.problemInfo.problemId,s=this.title,o=this.solved,c=this.content,e.next=8,ce.editNote(n,a,r,s,o,c,t);case 8:return this.lastSaved=new Date,window.onbeforeunload=null,e.next=12,x.setStatePromise(this,{published:t,disableEditButtons:!1,saved:!0,loadingSave:!1,loadingPublish:!1});case 12:t&&this.props.history.push(this.publishedUrl);case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"saveNote",value:function(){var e=Object(d.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.setStatePromise(this,{disableEditButtons:!0,loadingSave:!0});case 2:return e.next=4,this.saveOrPublishNote(this.state.published);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"deleteNote",value:function(){var e=Object(d.a)(m.a.mark((function e(){var t,n,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.noteInfo.username,n=this.props.platform,a=this.props.noteInfo.problemInfo.problemId,e.next=5,ce.deleteNote(t,n,a);case 5:this.props.history.push("/users/".concat(t));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"togglePublishNote",value:function(){var e=Object(d.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.setStatePromise(this,{disableEditButtons:!0,loadingPublish:!0});case 2:return e.next=4,this.saveOrPublishNote(!this.state.published);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"toggleDeleteMenu",value:function(){var e=Object(d.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.setStatePromise(this,{showDeleteMenu:!this.state.showDeleteMenu});case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleTitleChange",value:function(e){this.title=e.target.value}},{key:"handleSolvedChange",value:function(e){this.solved=e.target.value}},{key:"handleContentChange",value:function(){var e=Object(d.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.content=t,!this.state.saved){e.next=5;break}return e.next=4,x.setStatePromise(this,{saved:!1});case 4:window.onbeforeunload=Le;case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"render",value:function(){var e=this.state.saved?"All changes saved! - ":"Last saved on ";e+=this.lastSaved.toLocaleString();var t=this.state.published?"Unpublish":"Publish!",n="Askd-button Askd-not-fullwidth",a="Askd-button Askd-not-fullwidth";return this.state.loadingSave&&(n+=" Askd-form-loading"),this.state.loadingPublish&&(a+=" Askd-form-loading"),r.a.createElement(r.a.Fragment,null,r.a.createElement(l.a,{when:!this.state.saved,message:"Are you sure you want to leave? You have unsaved changes."}),this.state.showDeleteMenu&&r.a.createElement(Be,{exitCallback:this.toggleDeleteMenu,deleteCallback:this.deleteNote,entityName:"note"}),r.a.createElement("form",{className:"Edit-note-form Askd-form Module-outer-space"},r.a.createElement("input",{className:"Edit-note-title",name:"title",type:"text",defaultValue:this.title,placeholder:"Title",onChange:this.handleTitleChange}),r.a.createElement("select",{name:"solved",id:"note-solved",onChange:this.handleSolvedChange,defaultValue:this.solved},r.a.createElement("option",{value:$.SOLVED.value},"Solved"),r.a.createElement("option",{value:$.UPSOLVED.value},"Upsolved"),r.a.createElement("option",{value:$.UPSOLVED_HELP.value},"Upsolved with help"),r.a.createElement("option",{value:$.UNSOLVED.value},"Unsolved")),r.a.createElement(Me,{initialContent:this.content,onChange:this.handleContentChange}),this.state.published&&r.a.createElement(i.b,{className:"Edit-note-published-link Askd-form-link",to:this.publishedUrl},"See published page"),r.a.createElement("p",{className:"Edit-note-saved-text"},e),r.a.createElement("div",{className:"Edit-note-bottom-buttons"},r.a.createElement("input",{className:n,type:"button",value:"Save",onClick:this.saveNote,disabled:this.state.disableEditButtons}),r.a.createElement("input",{className:a,type:"button",value:t,onClick:this.togglePublishNote,disabled:this.state.disableEditButtons})),r.a.createElement("div",{className:"Edit-note-delete"},r.a.createElement("button",{type:"button",className:"Askd-form-link Askd-form-link-bottom",onClick:this.toggleDeleteMenu},"Permanently delete this note?"))))}}]),n}(a.Component),Fe=function(e){Object(b.a)(n,e);var t=Object(v.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return Object(f.a)(n,[{key:"render",value:function(){var e=this.props.info,t=ee.getProblemDisplayName(e);return r.a.createElement("div",{className:"Edit-note-problem-info"},r.a.createElement("div",{className:"Module-info-box Module-outer-space"},r.a.createElement("h4",null,t),r.a.createElement("p",{className:"Edit-note-contest"},e.contestName),r.a.createElement("a",{className:"Askd-form-link",href:e.link,target:"_blank",rel:"noopener noreferrer"},"Problem link")))}}]),n}(a.Component);n(189);function ze(){return(ze=Object(d.a)(m.a.mark((function e(t,n){var a,r,s,o,c,i;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.getUsername();case 2:return a=e.sent,r=t.match.params.platform,s=t.match.params.contestId,o=t.match.params.problemCode,c="".concat(s,"#").concat(o),e.next=9,ce.getNoteInfo(a,r,c);case 9:return i=e.sent,e.abrupt("return",{noteInfo:i});case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ge=V((function(e,t){return ze.apply(this,arguments)}),null,"NoteNotFound",(function(e){var t=e.otherProps,n=e.info,a=e.screen,s=t.match.params.platform;return a===G.NOT_FOUND?r.a.createElement("div",{className:"Module-description"},r.a.createElement("h2",null,"Note not found!")):a===G.LOADING?r.a.createElement(H,null):r.a.createElement(r.a.Fragment,null,r.a.createElement(Fe,{info:n.noteInfo.problemInfo,platform:s}),r.a.createElement(De,{noteInfo:n.noteInfo,platform:s,history:t.history}))})),Ve=function(){function e(){Object(p.a)(this,e)}return Object(f.a)(e,null,[{key:"sendLike",value:function(){var e=Object(d.a)(m.a.mark((function e(t,n,a,r,s){var o;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o={username:t,noteAuthor:n,platform:a,problemId:r,likedStatus:s},e.next=3,W.putJson("likes/notes",o);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,n,a,r,s){return e.apply(this,arguments)}}()}]),e}();n(190);var He=function(e){var t=e.initialScore,n=e.initialStatus,s=e.likeCallback,o=Object(a.useState)(t),c=Object(z.a)(o,2),i=c[0],l=c[1],u=Object(a.useState)(n),p=Object(z.a)(u,2),f=p[0],h=p[1],b="Like-button";f>0&&(b+=" Like-button-liked");var v=function(){var e=Object(d.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.getUsername();case 2:if(e.sent){e.next=6;break}return window.suggestUserRegister(),e.abrupt("return");case 6:f>0?(h(0),l(i-1),s(0)):(h(1),l(i+1),s(1));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"Like-dislike"},r.a.createElement("button",{className:b,onClick:v},r.a.createElement("span",{className:"icon-thumb_up_alt"}),r.a.createElement("span",{className:"Like-dislike-score"},i)))};n(191);var Je=function(e){var t=e.loggedInUsername,n=e.info,a=JSON.parse(n.content),s=new Date(n.editedTime).toLocaleString(),o=ee.getSolvedStateCssClass(n.solved),c=n.username,l=n.platform,u=n.problemSk,p=u.split("#").join("/"),f="/notes/edit/".concat(l,"/").concat(p),h=function(){var e=Object(d.a)(m.a.mark((function e(n){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ve.sendLike(t,c,l,u,n);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"Public-note-info Module-outer-space"},r.a.createElement("h3",{className:"Module-space-heading"},r.a.createElement("span",{className:"Public-note-solved-tag User-note-info-".concat(o)},r.a.createElement("span",{className:"User-note-info-tag User-note-solved-indicator"})),n.title),t===c&&r.a.createElement(i.b,{className:"Public-note-info-edit Askd-form-link",to:f},"Edit"),r.a.createElement("div",{className:"Module-space-text"},"Written by ",r.a.createElement(Z,{username:n.username,rank:n.authorCfRank})),r.a.createElement("div",{className:"Askd-text-editor"},r.a.createElement(Pe,{content:a,id:"Askd-public-note",editable:!1})),r.a.createElement("p",{className:"Module-space-text"},"Last edited on ",s),r.a.createElement(He,{initialScore:n.likeCount,initialStatus:n.likedStatus,likeCallback:h}))},_e=function(){function e(){Object(p.a)(this,e)}return Object(f.a)(e,null,[{key:"getNoteComments",value:function(){var e=Object(d.a)(m.a.mark((function e(t,n,a){var r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={noteAuthor:t,platform:n,problemId:a},e.next=3,W.getJson("comments",r);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"addNoteComment",value:function(){var e=Object(d.a)(m.a.mark((function e(t,n,a,r,s,o,c){var i;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i={username:t,noteAuthor:n,platform:a,problemId:r,rootReplyId:s,replyId:o,content:JSON.stringify(c)},e.next=3,W.postJson("comments",i);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,n,a,r,s,o,c){return e.apply(this,arguments)}}()},{key:"editComment",value:function(){var e=Object(d.a)(m.a.mark((function e(t,n){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={commentId:t,content:JSON.stringify(n)},e.next=3,W.putJson("comments",a);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"deleteComment",value:function(){var e=Object(d.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={commentId:t},e.next=3,W.deleteJson("comments",n);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Ye=n(46);var We=function(e){var t=e.cancelCallback,n=e.addCallback,s=e.initialContent,o=e.updateCallback,c=Object(a.useState)(s),i=Object(z.a)(c,2),l=i[0],u=i[1],p=Object(a.useState)(!1),f=Object(z.a)(p,2),h=f[0],b=f[1],v=function(){var e=Object(d.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b(!0),e.prev=1,e.next=4,n(l);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),b(!1);case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(){return e.apply(this,arguments)}}(),g=!l||0===l[0].c.length;return r.a.createElement("div",{className:"Comment-section-add"},r.a.createElement(Me,{focusOnMount:!0,initialContent:l,onChange:function(e){u(e),o&&o(e)}}),r.a.createElement("div",{className:"Askd-form"},r.a.createElement("input",{type:"button",value:"Cancel",className:"Askd-button Askd-not-fullwidth",onClick:t}),r.a.createElement("input",{type:"button",value:"Comment",disabled:g||h,className:"Askd-button Askd-not-fullwidth",onClick:v})))};var Ke=function(e){var t=e.info,n=e.replyUsername,s=e.subscribeToUserInfo,o=e.subscribeToReplyInfo,c=e.replyCallback,i=e.editCallback,l=e.deleteCallback,u=e.loggedInUsername,p=t.commentId,f=t.content?JSON.parse(t.content):null,h=Object(a.useState)(null),b=Object(z.a)(h,2),v=b[0],g=b[1],k=Object(a.useState)(null),E=Object(z.a)(k,2),y=E[0],w=E[1],O=Object(a.useState)(null),C=Object(z.a)(O,2),N=C[0],I=C[1],j=Object(a.useState)(!1),S=Object(z.a)(j,2),P=S[0],A=S[1],U=Object(a.useState)(!1),T=Object(z.a)(U,2),M=T[0],R=T[1],B=Object(a.useRef)(f),L=function(e){g(e.avatarData),w(e.cfRank)};Object(a.useEffect)((function(){s&&s(L),o&&o((function(e){return I(e.cfRank)}))}),[s,o]);var D,F=function(){var e=Object(d.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i(p,B.current);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),G=function(){var e=Object(d.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l(p);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),V=t.username,H="Z".concat(p,"Z");D=t.editedTime?"Edited "+x.getTimeAgoString(t.editedTime):x.getTimeAgoString(t.creationTime);var J="Module-outer-space Comment-section-comment";return u===V&&(J+=" Comment-section-own-comment"),P?r.a.createElement(We,{cancelCallback:function(){A(!1)},addCallback:F,initialContent:B.current,updateCallback:function(e){B.current=e}}):r.a.createElement("div",{id:p,className:J},M&&r.a.createElement(Be,{exitCallback:function(){R(!1)},deleteCallback:G,entityName:"comment"}),n&&r.a.createElement("span",{className:"Comment-section-reply-username"},r.a.createElement(Z,{username:n,rank:N}),r.a.createElement("span",{className:"icon-reply"})),v&&r.a.createElement("img",{className:"Comment-section-avatar",src:v,alt:"avatar"}),r.a.createElement("div",{className:"Comment-section-comment-body"},r.a.createElement(Z,{username:t.username,rank:y}),r.a.createElement("span",{className:"Comment-section-timestamp"},D),f&&r.a.createElement(Pe,{id:H,content:f,editable:!1}),!f&&r.a.createElement("div",{className:"Comment-section-deleted"},"This comment has been deleted"),r.a.createElement("div",{className:"Comment-section-comment-buttons"},r.a.createElement("button",{className:"Comment-section-reply-button Askd-button",onClick:c},"Reply")),u===V&&t.content&&r.a.createElement("div",{className:"Comment-section-personal-buttons"},r.a.createElement("button",{className:"Askd-form-link",onClick:function(){A(!0)}},"Edit"),r.a.createElement("button",{className:"Askd-form-link",onClick:function(){R(!0)}},"Delete"))))};var qe=function(e){for(var t=e.info,n=e.addInfoSubscriptions,s=e.replyCallback,o=e.editCallback,c=e.deleteCallback,i=e.loggedInUsername,l=Object(a.useState)(!1),u=Object(z.a)(l,2),p=u[0],f=u[1],h=Object(a.useState)(null),b=Object(z.a)(h,2),v=b[0],g=b[1],k=Object(a.useState)(null),E=Object(z.a)(k,2),x=E[0],y=E[1],w=Object(a.useRef)({content:null,replyId:null}),C=function(){var e=Object(d.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s(w.current.content,t.commentId,w.current.replyId);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),N=function(e,t,n){return Object(d.a)(m.a.mark((function a(){return m.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,O.getUsername();case 2:if(a.sent){a.next=6;break}return window.suggestUserRegister(),a.abrupt("return");case 6:w.current.replyId=e,g(t),f(!0),n((function(t){w.current.replyId===e&&y(t.cfRank)}));case 10:case"end":return a.stop()}}),a)})))},I=[],j=Object(Ye.a)({},t.commentId,t.username),S=0;S<t.replies.length;S++){var P=t.replies[S],A=j[P.replyId],U=n[P.username],T=n[A],M=N(P.commentId,P.username,U);I.push(r.a.createElement("li",{key:S,className:"Comment-section-reply-comment"},r.a.createElement(Ke,{info:P,replyUsername:A,subscribeToUserInfo:U,subscribeToReplyInfo:T,replyCallback:M,editCallback:o,deleteCallback:c,loggedInUsername:i}))),j[P.commentId]=P.username}var R=r.a.createElement("div",{className:"Comment-section-reply-form"},r.a.createElement("span",{className:"Comment-section-reply-username"},r.a.createElement(Z,{username:v,rank:x}),r.a.createElement("span",{className:"icon-reply"})),r.a.createElement("li",{className:"Comment-section-reply-comment"},r.a.createElement(We,{cancelCallback:function(){f(!1)},updateCallback:function(e){w.current.content=e},addCallback:C,initialContent:w.current.content}))),B=n[t.username],L=N(t.commentId,t.username,B);return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ke,{info:t,subscribeToUserInfo:B,replyCallback:L,editCallback:o,deleteCallback:c,loggedInUsername:i}),r.a.createElement("ol",{className:"Comment-section-replies"},I,p&&R))};var Xe=function(e){var t=e.addCallback,n=Object(a.useState)(!1),s=Object(z.a)(n,2),o=s[0],c=s[1],i=Object(a.useRef)(null),l=r.a.createRef(),u=function(){var e=Object(d.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.getUsername();case 2:e.sent?c(!0):(l.current.blur(),window.suggestUserRegister());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return o?r.a.createElement(We,{cancelCallback:function(e){c(!1)},addCallback:t,initialContent:i.current,updateCallback:function(e){i.current=e}}):r.a.createElement("div",{className:"Comment-section-add"},r.a.createElement("input",{className:"Comment-section-add-placeholder",type:"text",placeholder:"Write a comment...",onFocus:u,ref:l}))};n(192);function Ze(e){var t=e.match.params.ownerUsername,n=e.match.params.platform,a=e.match.params.contestId,r=e.match.params.problemCode;return[t,n,"".concat(a,"#").concat(r)]}function Qe(){return(Qe=Object(d.a)(m.a.mark((function e(t,n){var a,r,s,o,c,i,l;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Ze(t),r=Object(z.a)(a,3),s=r[0],o=r[1],c=r[2],e.next=3,_e.getNoteComments(s,o,c);case 3:return i=e.sent,e.next=6,O.getUsername();case 6:return l=e.sent,e.abrupt("return",{comments:i,loggedInUsername:l});case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $e(){return($e=Object(d.a)(m.a.mark((function e(t,n,a,r){var s,o,c,i,l,u;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.getUsername();case 2:return s=e.sent,o=Ze(t),c=Object(z.a)(o,3),i=c[0],l=c[1],u=c[2],e.next=6,_e.addNoteComment(s,i,l,u,a,r,n);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var et=function(e,t){return V(e,null,null,(function(e){var n=e.otherProps,s=e.info,o=e.screen,c=Object(a.useRef)(!0),i=Object(a.useRef)({}),l=Object(a.useRef)({}),u=Object(a.useRef)({});Object(a.useEffect)((function(){return c.current=!0,function(){c.current=!1}})),Object(a.useEffect)((function(){var e=_.a.parse(window.location.search);if(e.linkedComment){var t=document.getElementById(e.linkedComment);t&&t.scrollIntoView()}})),Object(a.useEffect)((function(){if(s){i.current={},l.current={},u.current={};var e,t=function(){var e=Object(d.a)(m.a.mark((function e(t){var n,a,r,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,X.getUserInfo(t,!0);case 2:n=e.sent,i.current[t]=n,a=Object(te.a)(l.current[t]);try{for(a.s();!(r=a.n()).done;)s=r.value,c.current&&s(n)}catch(o){a.e(o)}finally{a.f()}case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n=function(e){i.current[e]=null,l.current[e]=[],u.current[e]=function(t){i.current[e]&&c.current?t(i.current[e]):l.current[e].push(t)},t(e)},a=Object(te.a)(s.comments);try{for(a.s();!(e=a.n()).done;){var r=e.value;i.current.hasOwnProperty(r.username)||n(r.username);var o,p=Object(te.a)(r.replies);try{for(p.s();!(o=p.n()).done;){var f=o.value;i.current.hasOwnProperty(f.username)||n(f.username)}}catch(h){p.e(h)}finally{p.f()}}}catch(h){a.e(h)}finally{a.f()}}}),[s]);var p=function(e){var t=window.location.pathname;n.history.replace("".concat(t,"?linkedComment=").concat(e))},f=function(){var e=Object(d.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.getUsername();case 2:if(e.sent){e.next=6;break}return window.suggestUserRegister(),e.abrupt("return",!1);case 6:return e.abrupt("return",!0);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=Object(d.a)(m.a.mark((function e(a){var r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f();case 2:if(e.sent){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,t(n,a,null,null);case 7:r=e.sent,p(r);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b=function(){var e=Object(d.a)(m.a.mark((function e(a,r,s){var o;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f();case 2:if(e.sent){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,t(n,a,r,s);case 7:o=e.sent,p(o);case 9:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),v=function(){var e=Object(d.a)(m.a.mark((function e(t,n){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f();case 2:if(e.sent){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,_e.editComment(t,n);case 7:p(t);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),g=function(){var e=Object(d.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_e.deleteComment(t);case 2:p(t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();if(o===G.LOADING||n.doNotShow)return null;var k,E=s.comments;if(0===E.length)k=r.a.createElement("p",{className:"User-notes-nothing"},"There are no comments yet!");else{for(var x=[],y=0;y<E.length;y++){var w=E[y];x.push(r.a.createElement("li",{key:y,className:"Comment-section-root-comment"},r.a.createElement(qe,{info:w,replyCallback:b,editCallback:v,deleteCallback:g,loggedInUsername:s.loggedInUsername,addInfoSubscriptions:u.current})))}k=r.a.createElement("ol",{className:"Comment-section-comments"},x)}return r.a.createElement("div",{className:"Module-outer-space Comment-section"},r.a.createElement("h3",{className:"Module-heading"},"Comments"),r.a.createElement(Xe,{addCallback:h}),k)}))}((function(e,t){return Qe.apply(this,arguments)}),(function(e,t,n,a){return $e.apply(this,arguments)}));function tt(){return(tt=Object(d.a)(m.a.mark((function e(t,n){var a,r,s,o,c,i,l;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.match.params.ownerUsername,r=t.match.params.platform,s=t.match.params.contestId,o=t.match.params.problemCode,c="".concat(s,"#").concat(o),e.next=7,ce.getNoteInfo(a,r,c,!0);case 7:return i=e.sent,e.next=10,O.getUsername();case 10:return l=e.sent,e.abrupt("return",{noteInfo:i,loggedInUsername:l});case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var nt=V((function(e,t){return tt.apply(this,arguments)}),null,"NoteNotFound",(function(e){var t=e.otherProps,n=e.info,a=e.screen,s=t.match.params.platform,o=!(a===G.DONE),c=r.a.createElement(et,{match:t.match,doNotShow:o,history:t.history,key:"comments"});return a===G.NOT_FOUND?r.a.createElement("div",{className:"Module-description"},r.a.createElement("h2",null,"Note is either unpublished or does not exist!")):a===G.LOADING?r.a.createElement(r.a.Fragment,null,r.a.createElement(H,null),c):r.a.createElement(r.a.Fragment,null,r.a.createElement(Fe,{info:n.noteInfo.problemInfo,platform:s}),r.a.createElement(Je,{loggedInUsername:n.loggedInUsername,info:n.noteInfo}),c)}));var at=function(e){var t=e.callback,n=e.initialUsername,a=e.attachLabel,s=a?null:"Search by username";return r.a.createElement("div",{className:"Askd-form Users-table-search"},a&&r.a.createElement("label",{htmlFor:"username"},"Username"),r.a.createElement(ne,{name:"username",id:"cp-username-search",search:X.getSearchUsers,staticKey:"username",network:!0,placeholder:s,initialSearchTerm:n,callback:t}))};n(193);var rt=function(e){var t,n=e.currentPage,a=e.lastUpdated,s=e.users,o=new Date(a).toLocaleString(),c=[],i=50*(n-1)+1,l=Object(te.a)(s);try{for(l.s();!(t=l.n()).done;){var u=t.value,m=u.contribution>0?"Users-table-contributor":"";m+=" Users-table-contribution",c.push(r.a.createElement("tr",{key:i},r.a.createElement("td",null,i),r.a.createElement("td",{className:"Users-table-username"},r.a.createElement(Z,{username:u.username,rank:u.cfRank})),r.a.createElement("td",{className:m},u.contribution))),i++}}catch(d){l.e(d)}finally{l.f()}return r.a.createElement("div",{className:"Users-table"},r.a.createElement("div",{className:"Users-table-table"},r.a.createElement("div",{className:"Users-table-table-table"},r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"#"),r.a.createElement("th",{className:"Users-table-username"},"Username"),r.a.createElement("th",{className:"Users-table-contribution"},"Contribution"))),r.a.createElement("tbody",null,c)))),r.a.createElement("span",{className:"Users-table-last-updated"},"Last updated on ",o))};function st(){return(st=Object(d.a)(m.a.mark((function e(t,n){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,X.getUsers(n);case 2:return a=e.sent,e.abrupt("return",{usersInfo:a});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ot=V((function(e,t){return st.apply(this,arguments)}),1,"PageNotFound",(function(e){var t=e.otherProps,n=e.info,a=e.loadInfo,s=e.screen,o=e.currentParams,c=function(e){t.history.push("/users/".concat(e))},i=n?n.usersInfo:null;if(s===G.NOT_FOUND)return r.a.createElement("div",{className:"Module-description"},"Page not found!");if(s===G.LOADING)return r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",{className:"Module-heading"},"Top contributors"),r.a.createElement(at,{callback:c}),r.a.createElement("div",{className:"Module-space"},r.a.createElement(H,null)));var l=r.a.createElement(pe,{currentPage:o,totalPages:i.totalPages,callback:a});return r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",{className:"Module-heading"},"Top contributors"),r.a.createElement(at,{callback:c}),r.a.createElement("div",{className:"Module-space"},l,r.a.createElement(rt,{currentPage:o,users:i.users,lastUpdated:i.lastUpdated}),l))})),ct=n(64);function it(){return(it=Object(d.a)(m.a.mark((function e(t,n){var a,r,s,o,c,i,l;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.username,r=t.platform,s=t.contestId,o=t.problemId,c=t.page,!t.sortByRecent){e.next=12;break}return e.next=9,ce.getMostRecentNotes(c);case 9:i=e.sent,e.next=15;break;case 12:return e.next=14,ce.getMostLikedNotes(a,r,s,o,c);case 14:i=e.sent;case 15:return e.next=17,O.getUsername();case 17:return l=e.sent,e.abrupt("return",Object(ct.a)(Object(ct.a)({},i),{},{loggedInUsername:l}));case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var lt=V((function(e,t){return it.apply(this,arguments)}),null,"PageNotFound",(function(e){var t,n=e.otherProps,a=e.info,s=e.screen;if(s===G.NOT_FOUND)t=r.a.createElement("p",{className:"User-notes-nothing"},"Page not found!");else if(s===G.LOADING)t=r.a.createElement(H,null);else{for(var o=r.a.createElement(pe,{currentPage:n.page,totalPages:a.totalPages,callback:n.pageChangeCallback}),c=[],i=0;i<a.notes.length;i++){var l=a.notes[i],u=a.userRanks[l.username];c.push(r.a.createElement(le,{key:i,info:l,mostLikedMode:!0,authorRank:u,loggedInUsername:a.loggedInUsername}))}t=0===c.length?r.a.createElement("p",{className:"User-notes-nothing"},"There are no published notes for that search!"):r.a.createElement(r.a.Fragment,null,o,r.a.createElement("ul",{className:"User-notes-list"},c),o)}return r.a.createElement("div",{className:"User-notes Module-space"},t)}));n(194);var ut=function(e){var t=e.history,n=_.a.parse(window.location.search),s=Number(n.page)||1;s>0||(s=1);var o=n.username||"",c=n.platform||"",i=n.contestId||"",l=n.problemId||"",u=n.recent,m=function(e){for(var a in e)null===e[a]?delete n[a]:n[a]=e[a];var r=_.a.stringify(n);t.push("/notes?".concat(r))},d=Object(a.useState)(!1),p=Object(z.a)(d,2),f=p[0],h=p[1];u&&f&&h(!1);var b=u?"Most recent notes":"Most liked notes",v=f?"Hide this":"Want to filter by username, platform, contest, or problem?",g=!!l&&!i;return r.a.createElement("div",{className:"Notes-search"},r.a.createElement("h2",{className:"Module-heading"},b),r.a.createElement("button",{onClick:function(){h(!f)},disabled:u,className:"Notes-search-filter Askd-form-link"},v),r.a.createElement("div",{className:"Notes-search-sort"},r.a.createElement("label",{htmlFor:"search-sort"},"Sort by"),r.a.createElement("select",{value:u?"Recent":"Likes",name:"search-sort",onChange:function(e){var t=e.target.value;m("Recent"===t?{username:null,platform:null,contestId:null,problemId:null,page:null,recent:1}:{page:null,recent:null})}},r.a.createElement("option",{value:"Likes"},"Most Liked"),r.a.createElement("option",{value:"Recent"},"Recent"))),f&&r.a.createElement("div",{className:"Module-outer-space"},r.a.createElement("form",{className:"Askd-form"},r.a.createElement(at,{callback:function(e){m({username:e,page:null})},initialUsername:o,attachLabel:!0}),r.a.createElement(ae,{initialPlatform:c,initialContestId:i,initialProblemId:l,initialSkipContestSearch:g,changeCallback:function(e,t,n){m({platform:e,contestId:t,problemId:n,page:null})}}),r.a.createElement("button",{onClick:function(e){e.preventDefault(),m({page:null,username:null,platform:null,contestId:null,problemId:null})},className:"Askd-form-link Notes-search-reset"},"Reset all filters"))),r.a.createElement(lt,{username:o,platform:c,contestId:i,problemId:l,page:s,sortByRecent:u,pageChangeCallback:function(e){1===e&&(e=null),m({page:e})}}))};function mt(){return(mt=Object(d.a)(m.a.mark((function e(t,n){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ce.getMostRecentNotes(1);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var dt=V((function(e,t){return mt.apply(this,arguments)}),null,null,(function(e){e.otherProps,e.loadInfo;var t,n=e.info;if(e.screen,n){for(var a=[],s=0;s<n.notes.length;s++){var o=n.notes[s],c=ce.getNotePublishedLink(o),l=ce.getNoteDisplayName(o),u=o.editedTime!==o.activityTime,m=n.userRanks[o.username];a.push(r.a.createElement("li",{key:s},r.a.createElement(Z,{username:o.username,rank:m})," ",r.a.createElement("span",{className:"icon-long-arrow-right"})," ",r.a.createElement(i.b,{className:"Askd-form-link",to:c},l)," ",!u&&r.a.createElement("span",{className:"icon-note-text"}),u&&r.a.createElement("span",{className:"icon-comments"})))}a.push(r.a.createElement("li",{key:"more"},r.a.createElement(i.b,{className:"Username",to:"/notes?recent=1"},"More..."))),t=r.a.createElement("div",{className:"Module-recent-notes-list"},r.a.createElement("ol",null,a))}else t=r.a.createElement(H,null);return r.a.createElement("div",{className:"Module-recent-notes"},r.a.createElement("div",{className:"Module-recent-actions"},r.a.createElement("h4",null,"Recent actions")),r.a.createElement("div",{className:"Module-recent-notes-divider"}),t)})),pt=n(115),ft=n.n(pt);n(196);var ht=function(e){var t=e.text,n=r.a.createRef();return r.a.createElement("div",{className:"Clipboard-copy",onClick:function(){n.current.classList.add("Clipboard-copy-clicked"),window.setTimeout((function(){n.current.classList.remove("Clipboard-copy-clicked")}),500),ft()(t)}},t,r.a.createElement("div",{ref:n},"Copied!"))},bt="Codeforces might be down. Please try again later.";var vt=function(e){var t=e.userInfo,n=e.history,s=Object(a.useState)(""),o=Object(z.a)(s,2),c=o[0],i=o[1],l=Object(a.useState)(""),u=Object(z.a)(l,2),p=u[0],f=u[1],h=Object(a.useState)(null),b=Object(z.a)(h,2),v=b[0],g=b[1],k=Object(a.useState)(!1),E=Object(z.a)(k,2),x=E[0],y=E[1],w=Object(a.useState)(null),O=Object(z.a)(w,2),C=O[0],N=O[1],I=function(){var e=Object(d.a)(m.a.mark((function e(n){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),y(!0),N(null),e.prev=3,e.next=6,X.beginCfVerification(t.username,c);case 6:a=e.sent,g(a),f(c),e.next=26;break;case 11:if(e.prev=11,e.t0=e.catch(3),"UserNotFound"!==e.t0.name){e.next=17;break}N("Account ".concat(c," not found on Codeforces!")),e.next=26;break;case 17:if("CodeforcesDown"!==e.t0.name){e.next=21;break}N(bt),e.next=26;break;case 21:if("AlreadyLinked"!==e.t0.name){e.next=25;break}N(e.t0.message),e.next=26;break;case 25:throw e.t0;case 26:y(!1);case 27:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=Object(d.a)(m.a.mark((function e(a){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),y(!0),N(null),e.prev=3,e.next=6,X.endCfVerification(t.username,p,v);case 6:n.replace(n.location),e.next=20;break;case 9:if(e.prev=9,e.t0=e.catch(3),"VerificationFailed"!==e.t0.name&&"VerificationOverridden"!==e.t0.name){e.next=15;break}N(e.t0.message),e.next=20;break;case 15:if("CodeforcesDown"!==e.t0.name){e.next=19;break}N(bt),e.next=20;break;case 19:throw e.t0;case 20:y(!1);case 21:case"end":return e.stop()}}),e,null,[[3,9]])})));return function(t){return e.apply(this,arguments)}}(),S="I am authorizing cp-notes to use my identity: ".concat(v);return r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{className:"Module-paragraph"},r.a.createElement("i",null,"You haven't linked your Codeforces account yet!")),r.a.createElement("form",{className:"Askd-form",onSubmit:I},r.a.createElement("label",{htmlFor:"cfUsername"},"Codeforces username"),r.a.createElement("input",{type:"text",name:"cfUsername",value:c,onChange:function(e){i(e.target.value)}}),r.a.createElement("input",{type:"submit",className:"Askd-button Askd-not-fullwidth",value:"Link your account",disabled:x})),v&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"User-settings-cf-verify"},r.a.createElement("p",{className:"Module-paragraph"},"Account ",p," found! Please change the (English) last name on your Codeforces profile to be the following (you may do so"," ",r.a.createElement("a",{href:"https://codeforces.com/settings/social",target:"_blank",rel:"noopener noreferrer",className:"Askd-form-link"},"here"),"):"),r.a.createElement(ht,{text:S})),r.a.createElement("form",{className:"Askd-form",onSubmit:j},r.a.createElement("input",{type:"submit",className:"Askd-button Askd-not-fullwidth",value:"Verify!",disabled:x}))),C&&r.a.createElement("p",{className:"User-info-info-error"},"Error: ",C))};n(197);function gt(){return(gt=Object(d.a)(m.a.mark((function e(){var t,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.getUsername();case 2:if(t=e.sent,n=null,!t){e.next=8;break}return e.next=7,X.getUserInfo(t);case 7:n=e.sent;case 8:return e.abrupt("return",{userInfo:n});case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var kt=V((function(){return gt.apply(this,arguments)}),null,null,(function(e){var t,n=e.otherProps,a=e.info;if(e.screen===G.LOADING)t=r.a.createElement(H,null);else if(a.userInfo){var s,o=a.userInfo;s=a.userInfo.cfUsername?r.a.createElement("p",{className:"Module-paragraph"},"You've linked the following account:"," ",r.a.createElement(Z,{username:o.cfUsername,rank:o.cfRank,linkToCf:!0})," ",r.a.createElement("b",null,"(",o.cfRating,")")):r.a.createElement(vt,{userInfo:o,history:n.history}),t=r.a.createElement("div",{className:"Module-outer-space User-settings-cf"},r.a.createElement("h3",{className:"Module-heading"},"Codeforces account"),s)}else t=r.a.createElement("p",{className:"Module-paragraph"},"You must log in first to view your settings!");return r.a.createElement("div",{className:"User-settings"},r.a.createElement("h2",{className:"Module-heading"},"Settings"),t)}));var Et=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",{className:"Module-heading"},"Text editor demo"),r.a.createElement("div",{className:"Askd-text-editor-demo"},r.a.createElement(Me,null)))};n(198),n(199),n(200);var xt=function(){return r.a.createElement(i.a,null,r.a.createElement("div",{className:"App"},r.a.createElement(A,null),r.a.createElement("div",{className:"Module-wrapper"},r.a.createElement("div",{className:"Module-content-left"},r.a.createElement(l.d,null,r.a.createElement(l.b,{exact:!0,path:"/",component:F}),r.a.createElement(l.b,{exact:!0,path:"/home",component:F}),r.a.createElement(l.b,{exact:!0,path:"/users",component:ot}),r.a.createElement(l.b,{exact:!0,path:"/notes",component:ut}),r.a.createElement(l.b,{exact:!0,path:"/settings",component:kt}),r.a.createElement(l.b,{exact:!0,path:"/users/:username",component:Ee}),r.a.createElement(l.b,{exact:!0,path:"/notes/edit/:platform/:contestId/:problemCode",component:Ge}),r.a.createElement(l.b,{exact:!0,path:"/notes/:ownerUsername/:platform/:contestId/:problemCode",component:nt}),r.a.createElement(l.b,{exact:!0,path:"/demo",component:Et}))),r.a.createElement(dt,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var yt=n(116);c.default.configure(yt[x.whatStageIsThis()]),document.body.addEventListener("mousedown",(function(e){document.body.classList.add("Global-mouse-click")})),document.body.addEventListener("keydown",(function(e){9===e.keyCode&&document.body.classList.remove("Global-mouse-click")})),o.a.render(r.a.createElement(xt,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[256,1,2]]]);
//# sourceMappingURL=main.679ac3a5.chunk.js.map