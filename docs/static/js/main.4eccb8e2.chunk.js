(this["webpackJsonpaskdfjlas.github.io"]=this["webpackJsonpaskdfjlas.github.io"]||[]).push([[0],{105:function(e){e.exports=JSON.parse('{"Auth":{"region":"us-east-1","userPoolId":"us-east-1_YQGmZ3d3H","userPoolWebClientId":"7ntajq8ii4nne0s2o55cvsqlfe"}}')},144:function(e,t,n){},145:function(e,t,n){},150:function(e,t,n){},151:function(e,t,n){},152:function(e,t,n){},165:function(e,t,n){},166:function(e,t,n){},167:function(e,t,n){},168:function(e,t,n){},169:function(e,t,n){},170:function(e,t,n){},193:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),s=n(99),o=n.n(s),i=n(69),c=n(27),u=n(13),l=n(3),p=n.n(l),h=n(4),m=n(7),f=n(8),d=n(6),v=n(10),b=n(9),k=function(){function e(){Object(m.a)(this,e)}return Object(f.a)(e,null,[{key:"setStatePromise",value:function(){var e=Object(h.a)(p.a.mark((function e(t,n){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,r){!1!==t.mounted&&t.setState(n,(function(){e()})),e()})));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"isEmpty",value:function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}},{key:"componentSetError",value:function(){var t=Object(h.a)(p.a.mark((function t(n,r){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n.setError){t.next=5;break}return t.next=3,n.setError(r);case 3:t.next=7;break;case 5:return t.next=7,e.setStatePromise(n,{error:"Error: ".concat(r)});case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"componentSetSuccess",value:function(){var t=Object(h.a)(p.a.mark((function t(n,r){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n.setSuccess){t.next=5;break}return t.next=3,n.setSuccess(r);case 3:t.next=7;break;case 5:return t.next=7,e.setStatePromise(n,{error:"",success:r});case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"renderMathJax",value:function(){var e=Object(h.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.MathJax){e.next=3;break}return e.next=3,window.MathJax.typesetPromise();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),e}(),g=function(){function e(){Object(m.a)(this,e)}return Object(f.a)(e,null,[{key:"checkPasswords",value:function(){var e=Object(h.a)(p.a.mark((function e(t,n,r){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n===r){e.next=4;break}return e.next=3,k.componentSetError(t,"Your passwords don't match!");case 3:return e.abrupt("return",!1);case 4:if(!(n.length<6)){e.next=8;break}return e.next=7,k.componentSetError(t,"Your password is too short!");case 7:return e.abrupt("return",!1);case 8:return e.abrupt("return",!0);case 9:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()}]),e}(),y=n(109),x=function(){function e(){Object(m.a)(this,e)}return Object(f.a)(e,null,[{key:"getProfile",value:function(){var e=Object(h.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.a.currentAuthenticatedUser();case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}()},{key:"register",value:function(){var e=Object(h.a)(p.a.mark((function e(t,n,r){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.signUp({username:t,password:r,attributes:{email:n}});case 2:return a=e.sent,e.abrupt("return",a.codeDeliveryDetails.Destination);case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"verifyEmail",value:function(){var e=Object(h.a)(p.a.mark((function e(t,n){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.confirmSignUp(t,n);case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"resendVerificationEmail",value:function(){var e=Object(h.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.resendSignUp(t);case 2:return n=e.sent,e.abrupt("return",n.CodeDeliveryDetails.Destination);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"forgotPassword",value:function(){var e=Object(h.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.forgotPassword(t);case 2:return n=e.sent,e.abrupt("return",n.CodeDeliveryDetails.Destination);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"resetPassword",value:function(){var e=Object(h.a)(p.a.mark((function e(t,n,r){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.forgotPasswordSubmit(t,n,r);case 2:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"login",value:function(){var e=Object(h.a)(p.a.mark((function e(t,n){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.signIn(t,n);case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"logout",value:function(){var t=Object(h.a)(p.a.mark((function t(){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y.a.signOut();case 2:e.profile=null;case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()},{key:"getUsername",value:function(){var t=Object(h.a)(p.a.mark((function t(){var n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getProfile();case 2:if(n=t.sent){t.next=5;break}return t.abrupt("return",null);case 5:return t.abrupt("return",n.username);case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()},{key:"getAccessToken",value:function(){var t=Object(h.a)(p.a.mark((function t(){var n,r,a;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getProfile();case 2:if(n=t.sent){t.next=5;break}return t.abrupt("return",null);case 5:return r=n.getSignInUserSession(),a=r.getAccessToken(),t.abrupt("return",a.getJwtToken());case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()}]),e}(),E=Object.freeze({LOGIN:0,RECOVERY_USERNAME:1,RECOVERY_PASSWORD:2,RECOVERY_SUCCESS:3,REGISTER:4,REGISTER_VERIFY:5,REGISTER_SUCCESS:6}),O=(n(144),"PreSignUp failed with error"),w=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(e){var r;Object(m.a)(this,n),r=t.call(this,e);var a=e.unverifiedAccountUsername?E.REGISTER_VERIFY:E.REGISTER;return r.state={error:"",success:"",username:e.unverifiedAccountUsername,destination:e.unverifiedAccountDestination,screen:a},r.close=r.close.bind(Object(d.a)(r)),r.register=r.register.bind(Object(d.a)(r)),r.verifyEmail=r.verifyEmail.bind(Object(d.a)(r)),r.resendVerificationEmail=r.resendVerificationEmail.bind(Object(d.a)(r)),r}return Object(f.a)(n,[{key:"close",value:function(){this.props.exitCallback()}},{key:"setError",value:function(){var e=Object(h.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.startsWith(O)&&(t=t.substring(O.length,t.length-1)),e.next=3,k.setStatePromise(this,{error:"Error: ".concat(t),success:""});case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"register",value:function(){var e=Object(h.a)(p.a.mark((function e(t){var n,r,a,s,o,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),n=t.target,r=n.username.value,a=n.email.value,s=n.password.value,o=n.confirmPassword.value,r&&a&&s&&o){e.next=10;break}return e.next=9,this.setError("Please fill out all of the fields.");case 9:return e.abrupt("return");case 10:if(!(r.length<3||r.length>20)){e.next=14;break}return e.next=13,this.setError("Your username must be between ".concat(3," ")+"and ".concat(20," characters!"));case 13:return e.abrupt("return");case 14:return e.next=16,g.checkPasswords(this,s,o);case 16:if(e.sent){e.next=19;break}return e.abrupt("return");case 19:return e.prev=19,e.next=22,x.register(r,a,s);case 22:i=e.sent,k.setStatePromise(this,{error:"",username:r,destination:i,screen:E.REGISTER_VERIFY}),e.next=30;break;case 26:return e.prev=26,e.t0=e.catch(19),e.next=30,this.setError(e.t0.message);case 30:case"end":return e.stop()}}),e,this,[[19,26]])})));return function(t){return e.apply(this,arguments)}}()},{key:"verifyEmail",value:function(){var e=Object(h.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=t.target.code.value,e.prev=2,e.next=5,x.verifyEmail(this.state.username,n);case 5:k.setStatePromise(this,{error:"",success:"",screen:E.REGISTER_SUCCESS}),e.next=12;break;case 8:return e.prev=8,e.t0=e.catch(2),e.next=12,this.setError(e.t0.message);case 12:case"end":return e.stop()}}),e,this,[[2,8]])})));return function(t){return e.apply(this,arguments)}}()},{key:"resendVerificationEmail",value:function(){var e=Object(h.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.resendVerificationEmail(this.state.username);case 3:return e.next=5,k.componentSetSuccess(this,"Another email has been sent!");case 5:e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(0),e.next=11,this.setError(e.t0.message);case 11:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"render",value:function(){var e,t=a.a.createElement("div",{className:"Register-form Module-popup"},this.state.error&&a.a.createElement("h2",null,this.state.error),a.a.createElement("h2",null,"Create an account!"),a.a.createElement("form",{className:"Askd-form",onSubmit:this.register},a.a.createElement("label",{htmlFor:"register-username"},"Username"),a.a.createElement("input",{autoComplete:"off",type:"text",name:"username",id:"register-username"}),a.a.createElement("label",{htmlFor:"register-email"},"Email"),a.a.createElement("input",{autoComplete:"off",type:"text",name:"email",id:"register-email"}),a.a.createElement("label",{htmlFor:"register-password"},"Password"),a.a.createElement("input",{autoComplete:"off",type:"password",name:"password",id:"register-password"}),a.a.createElement("label",{htmlFor:"register-confirm-password"},"Confirm password"),a.a.createElement("input",{autoComplete:"off",type:"password",name:"confirmPassword",id:"register-confirm-password"}),a.a.createElement("input",{className:"Askd-button Module-popup-last",type:"submit",value:"Register"}))),n=a.a.createElement("div",{className:"Register-form Module-popup"},this.state.error&&a.a.createElement("h2",null,this.state.error),this.state.success&&a.a.createElement("h2",null,this.state.success),a.a.createElement("h2",null,"Verify your email!"),a.a.createElement("p",null,"You should've received an email at ",this.state.destination," with a verification code. If it isn't convenient for you to verify your account now, you may do so later by logging in."),a.a.createElement("form",{className:"Askd-form",onSubmit:this.verifyEmail},a.a.createElement("label",{htmlFor:"verification-code"},"Verification code"),a.a.createElement("input",{autoComplete:"off",type:"text",name:"code",key:"verification-code",id:"verification-code"}),a.a.createElement("button",{type:"button",onClick:this.resendVerificationEmail,className:"Askd-form-link Askd-form-link-bottom"},"Didn't get the email? Click here to resend"),a.a.createElement("input",{className:"Askd-button Module-popup-last",type:"submit",value:"Submit"}))),r=a.a.createElement("div",{className:"Register-form Module-popup"},a.a.createElement("h2",null,"Verification success!"),a.a.createElement("p",{className:"Module-popup-last"},"Your email was successfully verified! Click the 'X' button in the top-right corner to return to the site, and you'll be able to login."));switch(this.state.screen){case E.REGISTER:e=t;break;case E.REGISTER_VERIFY:e=n;break;case E.REGISTER_SUCCESS:e=r}return a.a.createElement("div",{className:"Module-blocker"},a.a.createElement("button",{onClick:this.close,className:"Askd-form-close Askd-button Askd-button-circular"},"X"),e)}}]),n}(r.Component),j=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(e){var r;return Object(m.a)(this,n),(r=t.call(this,e)).state={error:"",username:null,destination:null,screen:e.screen||E.LOGIN},r.close=r.close.bind(Object(d.a)(r)),r.login=r.login.bind(Object(d.a)(r)),r.enablePasswordRecovery=r.enablePasswordRecovery.bind(Object(d.a)(r)),r.forgotPassword=r.forgotPassword.bind(Object(d.a)(r)),r.resetPassword=r.resetPassword.bind(Object(d.a)(r)),r.resendVerificationEmail=r.resendVerificationEmail.bind(Object(d.a)(r)),r}return Object(f.a)(n,[{key:"close",value:function(){this.props.exitCallback(!1)}},{key:"login",value:function(){var e=Object(h.a)(p.a.mark((function e(t){var n,r,a,s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),n=t.target,r=n.username.value,a=n.password.value,r&&a){e.next=8;break}return e.next=7,k.componentSetError(this,"Please fill out all of the fields.");case 7:return e.abrupt("return");case 8:return e.prev=8,e.prev=9,e.next=12,x.login(r,a);case 12:this.props.exitCallback(!0),e.next=26;break;case 15:if(e.prev=15,e.t0=e.catch(9),"UserNotConfirmedException"!==e.t0.code){e.next=25;break}return e.next=20,x.resendVerificationEmail(r);case 20:return s=e.sent,e.next=23,this.props.emailVerificationCallback(r,s);case 23:e.next=26;break;case 25:throw e.t0;case 26:e.next=32;break;case 28:return e.prev=28,e.t1=e.catch(8),e.next=32,k.componentSetError(this,e.t1.message);case 32:case"end":return e.stop()}}),e,this,[[8,28],[9,15]])})));return function(t){return e.apply(this,arguments)}}()},{key:"enablePasswordRecovery",value:function(){var e=Object(h.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.setStatePromise(this,{error:"",screen:E.RECOVERY_USERNAME});case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"forgotPassword",value:function(){var e=Object(h.a)(p.a.mark((function e(t){var n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),n=t.target.username.value){e.next=6;break}return e.next=5,k.componentsSetError(this,"Please input your username.");case 5:return e.abrupt("return");case 6:return e.prev=6,e.next=9,x.forgotPassword(n);case 9:return r=e.sent,e.next=12,k.setStatePromise(this,{error:"",username:n,destination:r,screen:E.RECOVERY_PASSWORD});case 12:e.next=18;break;case 14:return e.prev=14,e.t0=e.catch(6),e.next=18,k.componentSetError(this,e.t0.message);case 18:case"end":return e.stop()}}),e,this,[[6,14]])})));return function(t){return e.apply(this,arguments)}}()},{key:"resetPassword",value:function(){var e=Object(h.a)(p.a.mark((function e(t){var n,r,a,s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),n=t.target,r=n.code.value,a=n.password.value,s=n.confirmPassword.value,r&&a&&s){e.next=8;break}return k.componentSetError(this,"Please fill out all of the fields."),e.abrupt("return");case 8:return e.next=10,g.checkPasswords(this,a,s);case 10:if(e.sent){e.next=13;break}return e.abrupt("return");case 13:return e.prev=13,e.next=16,x.resetPassword(this.state.username,r,a);case 16:return e.next=18,k.setStatePromise(this,{error:"",success:"",screen:E.RECOVERY_SUCCESS});case 18:e.next=24;break;case 20:return e.prev=20,e.t0=e.catch(13),e.next=24,k.componentSetError(this,e.t0.message);case 24:case"end":return e.stop()}}),e,this,[[13,20]])})));return function(t){return e.apply(this,arguments)}}()},{key:"resendVerificationEmail",value:function(){var e=Object(h.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.forgotPassword(this.state.username);case 3:return e.next=5,k.componentSetSuccess(this,"Another email has been sent!");case 5:e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(0),e.next=11,k.componentSetError(this,e.t0.message);case 11:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"render",value:function(){var e,t=a.a.createElement("div",{className:"Register-form Module-popup"},this.state.error&&a.a.createElement("h2",null,this.state.error),a.a.createElement("h2",null,"Login to your account!"),a.a.createElement("form",{className:"Askd-form",onSubmit:this.login},a.a.createElement("label",{htmlFor:"login-username"},"Username or email"),a.a.createElement("input",{autoComplete:"off",type:"text",name:"username",key:"login-username",id:"login-username"}),a.a.createElement("label",{htmlFor:"login-password"},"Password"),a.a.createElement("input",{autoComplete:"off",type:"password",name:"password",key:"login-password",id:"login-password"}),a.a.createElement("button",{type:"button",onClick:this.enablePasswordRecovery,className:"Askd-form-link Askd-form-link-bottom"},"Forgot your password?"),a.a.createElement("input",{className:"Askd-button",type:"submit",value:"Login"}))),n=a.a.createElement("div",{className:"Register-form Module-popup"},this.state.error&&a.a.createElement("h2",null,this.state.error),a.a.createElement("h2",null,"Reset your password"),a.a.createElement("p",null,"Please provide your username or email, so that you can reset your password via an emailed confirmation code."),a.a.createElement("form",{className:"Askd-form",onSubmit:this.forgotPassword},a.a.createElement("label",{htmlFor:"reset-username"},"Username or email"),a.a.createElement("input",{autoComplete:"off",type:"text",name:"username",key:"reset-username",id:"reset-username"}),a.a.createElement("input",{className:"Askd-button",type:"submit",value:"Submit"}))),r=a.a.createElement("div",{className:"Register-form Module-popup"},this.state.error&&a.a.createElement("h2",null,this.state.error),this.state.success&&a.a.createElement("h2",null,this.state.success),a.a.createElement("h2",null,"Reset your password"),a.a.createElement("p",null,"You should've received an email at ",this.state.destination," with a verification code."),a.a.createElement("form",{className:"Askd-form",onSubmit:this.resetPassword},a.a.createElement("label",{htmlFor:"reset-code"},"Code"),a.a.createElement("input",{autoComplete:"off",type:"text",name:"code",key:"reset-code",id:"reset-code"}),a.a.createElement("label",{htmlFor:"reset-password"},"Password"),a.a.createElement("input",{autoComplete:"off",type:"password",name:"password",key:"reset-password",id:"reset-password"}),a.a.createElement("label",{htmlFor:"reset-confirm-password"},"Confirm password"),a.a.createElement("input",{autoComplete:"off",type:"password",name:"confirmPassword",key:"reset-confirm-password",id:"reset-confirm-password"}),a.a.createElement("button",{type:"button",onClick:this.resendVerificationEmail,className:"Askd-form-link Askd-form-link-bottom"},"Didn't get the email? Click here to resend"),a.a.createElement("input",{className:"Askd-button",type:"submit",value:"Submit"}))),s=a.a.createElement("div",{className:"Register-form Module-popup"},a.a.createElement("h2",null,"Password reset success!"),a.a.createElement("p",null,"Your password has been reset successfully. You'll now be able to login again."));switch(this.state.screen){case E.LOGIN:e=t;break;case E.RECOVERY_USERNAME:e=n;break;case E.RECOVERY_PASSWORD:e=r;break;case E.RECOVERY_SUCCESS:e=s}return a.a.createElement("div",{className:"Module-blocker"},a.a.createElement("button",{onClick:this.close,className:"Askd-form-close Askd-button Askd-button-circular"},"X"),e)}}]),n}(r.Component),S=(n(145),function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(e){var r;return Object(m.a)(this,n),(r=t.call(this,e)).logout=r.logout.bind(Object(d.a)(r)),r}return Object(f.a)(n,[{key:"logout",value:function(){var e=Object(h.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.logout();case 2:return e.next=4,this.props.logoutCallback();case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return a.a.createElement("div",{className:"User-menu"},a.a.createElement("ol",null,a.a.createElement("li",null,a.a.createElement(c.b,{className:"Header-menu-button",onClick:this.props.closeCallback,to:"/users/".concat(this.props.username)},"Your profile")),a.a.createElement("div",{className:"User-menu-divider"}),a.a.createElement("li",{className:"User-menu-not-link"},a.a.createElement("button",{className:"Header-menu-button"},"Settings")),a.a.createElement("li",{className:"User-menu-not-link"},a.a.createElement("button",{className:"Header-menu-button",onClick:this.logout},"Logout"))))}}]),n}(r.Component)),C=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(e){var r;return Object(m.a)(this,n),(r=t.call(this,e)).state={username:null,showRegisterForm:!1,showLoginForm:!1,showUserMenu:!1,unverifiedAccountUsername:null,unverifiedAccountDestination:null},r.refreshUsername=r.refreshUsername.bind(Object(d.a)(r)),r.toggleRegisterForm=r.toggleRegisterForm.bind(Object(d.a)(r)),r.toggleLoginForm=r.toggleLoginForm.bind(Object(d.a)(r)),r.toggleUserMenu=r.toggleUserMenu.bind(Object(d.a)(r)),r.hideUserMenu=r.hideUserMenu.bind(Object(d.a)(r)),r.afterLogin=r.afterLogin.bind(Object(d.a)(r)),r.unverifiedAccount=r.unverifiedAccount.bind(Object(d.a)(r)),r}return Object(f.a)(n,[{key:"refreshUsername",value:function(){var e=Object(h.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.getUsername();case 2:return t=e.sent,e.next=5,k.setStatePromise(this,{username:t,showUserMenu:!1,unverifiedAccountUsername:null});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=Object(h.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.refreshUsername();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toggleRegisterForm",value:function(){var e=Object(h.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.state.showRegisterForm){e.next=3;break}return e.next=3,k.setStatePromise(this,{unverifiedAccountUsername:null,unverifiedAccountDestination:null});case 3:return e.next=5,k.setStatePromise(this,{showRegisterForm:!this.state.showRegisterForm});case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"toggleLoginForm",value:function(){var e=Object(h.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.setStatePromise(this,{showLoginForm:!this.state.showLoginForm});case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"toggleUserMenu",value:function(){var e=Object(h.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.setStatePromise(this,{showUserMenu:!this.state.showUserMenu});case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"hideUserMenu",value:function(){var e=Object(h.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=t.relatedTarget)||!n.classList.contains("Header-menu-button")){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,k.setStatePromise(this,{showUserMenu:!1});case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"afterLogin",value:function(){var e=Object(h.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.toggleLoginForm();case 2:if(!t){e.next=5;break}return e.next=5,this.refreshUsername();case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"unverifiedAccount",value:function(){var e=Object(h.a)(p.a.mark((function e(t,n){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.setStatePromise(this,{showLoginForm:!1,showRegisterForm:!0,unverifiedAccountUsername:t,unverifiedAccountDestination:n});case 2:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"render",value:function(){var e=a.a.createElement("div",{className:"Header-top-right"},a.a.createElement("button",{className:"Header-menu-button",onClick:this.toggleLoginForm},"Login"),a.a.createElement("span",{className:"Header-divider"}),a.a.createElement("button",{className:"Header-menu-button",onClick:this.toggleRegisterForm},"Create an account")),t=a.a.createElement("div",{className:"Header-logged-in",tabIndex:"-1",onBlur:this.hideUserMenu},a.a.createElement("div",{className:"Header-top-right"},a.a.createElement("button",{className:"Header-menu-button",onClick:this.toggleUserMenu},this.state.username)),a.a.createElement("div",{className:"Header-user-menu"},this.state.showUserMenu&&a.a.createElement(S,{username:this.state.username,closeCallback:this.toggleUserMenu,logoutCallback:this.refreshUsername}))),n=this.state.username?t:e;return a.a.createElement(a.a.Fragment,null,this.state.showRegisterForm&&a.a.createElement(w,{exitCallback:this.toggleRegisterForm,unverifiedAccountUsername:this.state.unverifiedAccountUsername,unverifiedAccountDestination:this.state.unverifiedAccountDestination}),this.state.showLoginForm&&a.a.createElement(j,{exitCallback:this.afterLogin,emailVerificationCallback:this.unverifiedAccount}),n)}}]),n}(r.Component);n(150);var I=function(){var e=Object(u.f)().pathname,t="/"===e||"/home"===e,n=t?"Header":"Header-small";return a.a.createElement("div",{className:n},t&&a.a.createElement("h1",null,"cp-notes beta"),a.a.createElement("ul",null,a.a.createElement("li",null,a.a.createElement(c.b,{to:"/home"},"Home"))),a.a.createElement(C,null),a.a.createElement("span",{className:"Header-bottom"}))},N=n(15),P=n(26);var A=function(){function e(t){Object(m.a)(this,e),this.id=t}return Object(f.a)(e,[{key:"getInfo",value:function(){var e,t,n,r,a=window.getSelection(),s=a.anchorNode.parentElement,o=a.focusNode.parentElement,i=Number(s.getAttribute("index")),c=Number(o.getAttribute("index")),u=a.anchorOffset,l=a.focusOffset;if(i===c&&u===l)return{rangeSelect:!1,index:i,position:u};if(t=u,r=l,!((e=i)===(n=c)?t<r:e<n)){var p=[c,i];i=p[0],c=p[1];var h=[l,u];u=h[0],l=h[1]}return{rangeSelect:!0,leftIndex:i,leftPosition:u,rightIndex:c,rightPosition:l}}},{key:"setPosition",value:function(e,t){var n=document.getElementById(this.id+e),r=n.childNodes[0];r||(r=document.createTextNode(""),n.appendChild(r));var a=document.createRange();a.setStart(r,t),a.collapse(!0);var s=window.getSelection();s.removeAllRanges(),s.addRange(a)}},{key:"setRangePosition",value:function(e,t,n,r){var a=document.getElementById(this.id+e),s=document.getElementById(this.id+n),o=a.childNodes[0],i=s.childNodes[0],c=document.createRange();c.setStart(o,t),c.setEnd(i,r);var u=window.getSelection();u.removeAllRanges(),u.addRange(c)}}]),e}(),U=Object.freeze({BOLD:2,ITALIC:4,UNDERLINE:8}),R=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(e){var r;return Object(m.a)(this,n),(r=t.call(this,e)).state={mask:0},r.updatingMask=!1,r.updateMask=r.updateMask.bind(Object(d.a)(r)),r}return Object(f.a)(n,[{key:"updateMask",value:function(){var e=Object(h.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.updatingMask=!0,e.next=3,k.setStatePromise(this,{mask:this.state.mask^t});case 3:this.props.callback(t,(this.state.mask&t)>0);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=Object(h.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.updatingMask){e.next=3;break}return this.updatingMask=!1,e.abrupt("return");case 3:if(this.props.mask===this.state.mask){e.next=6;break}return e.next=6,k.setStatePromise(this,{mask:this.props.mask});case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=(this.state.mask&U.BOLD)>0,n=(this.state.mask&U.ITALIC)>0,r=(this.state.mask&U.UNDERLINE)>0;return a.a.createElement("div",{className:"Askd-text-editor-toolbar"},a.a.createElement("ul",null,a.a.createElement("li",{className:"Askd-tb-selected-".concat(t)},a.a.createElement("button",{type:"button",className:"Askd-tb-icon Askd-tb-BOLD",onClick:function(){return e.updateMask(U.BOLD)}})),a.a.createElement("li",{className:"Askd-tb-selected-".concat(n)},a.a.createElement("button",{type:"button",className:"Askd-tb-icon Askd-tb-ITALIC",onClick:function(){return e.updateMask(U.ITALIC)}})),a.a.createElement("li",{className:"Askd-tb-selected-".concat(r)},a.a.createElement("button",{type:"button",className:"Askd-tb-icon Askd-tb-UNDERLINE",onClick:function(){return e.updateMask(U.UNDERLINE)}}))))}}]),n}(r.Component);function D(e){var t,n=0,r=Object(N.a)(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;Number(a),n++}}catch(s){r.e(s)}finally{r.f()}return n}var M=function(){function e(t){if(Object(m.a)(this,e),this.characters=[],this.globalCaretPosition=0,t){var n,r=Object(N.a)(t);try{for(r.s();!(n=r.n()).done;){var a,s=n.value,o=s.m,i=Object(N.a)(s.c);try{for(i.s();!(a=i.n()).done;){var c=a.value;this.characters.push({m:o,c:c})}}catch(u){i.e(u)}finally{i.f()}}}catch(u){r.e(u)}finally{r.f()}this.characters.splice(this.characters.length-1)}this.updateBlocks()}return Object(f.a)(e,[{key:"getIndexAndPosition",value:function(e){for(var t=0,n=0;n<this.blocks.length;n++){var r=D(this.blocks[n].c),a=t+r;if(e<=a)for(var s=0,o=t;o<=a;o++){if(e===o)return[n,s];s+=this.characters[o].c.length}t+=r}return[null,null]}},{key:"getGlobalIndex",value:function(e,t){for(var n=this.blockStarts[e],r=0;r<t;)r+=this.characters[n].c.length,n++;return r===t?n:n-1}},{key:"getCharacterMask",value:function(e,t,n){var r=this.getGlobalIndex(e,t);return 0===r?this.characters[0].m:n?this.characters[r].m:this.characters[r-1].m}},{key:"insert",value:function(e,t,n,r){var a,s=this.getGlobalIndex(e,t),o=this.characters.splice(s),i=Object(N.a)(n);try{for(i.s();!(a=i.n()).done;){var c=a.value;this.characters.push({m:r,c:c})}}catch(m){i.e(m)}finally{i.f()}var u,l=this.characters.length,p=Object(N.a)(o);try{for(p.s();!(u=p.n()).done;){var h=u.value;this.characters.push(h)}}catch(m){p.e(m)}finally{p.f()}return this.updateBlocks(),this.getIndexAndPosition(l)}},{key:"delete",value:function(e,t,n,r){var a=this.getGlobalIndex(e,t),s=this.getGlobalIndex(n,r)-a;if(a<0)return[0,0];this.characters.splice(a,s);var o=a;return this.updateBlocks(),this.getIndexAndPosition(o)}},{key:"rangeMaskUpdate",value:function(e,t,n,r,a,s){for(var o=this.getGlobalIndex(e,t),i=this.getGlobalIndex(n,r),c=o;c<i;c++)(s&&!(this.characters[c].m&a)||!s&&this.characters[c].m&a)&&(this.characters[c].m=this.characters[c].m^a);this.updateBlocks();var u=this.getIndexAndPosition(o),l=Object(P.a)(u,2),p=l[0],h=l[1],m=this.getIndexAndPosition(i),f=Object(P.a)(m,2);return[p,h,f[0],f[1]]}},{key:"updateBlocks",value:function(){var e=this;if(0===this.characters.length)return this.blocks=[{m:0,c:""}],void(this.blockStarts=[0]);this.blocks=[],this.blockStarts=[];var t=this.characters[0].m,n="",r=0;this.characters.forEach((function(a,s){a.m!==t?(e.blocks.push({m:t,c:n}),e.blockStarts.push(s-r),t=a.m,n=a.c,r=1):(n+=a.c,r++)})),this.blocks.push({m:t,c:n}),this.blockStarts.push(this.characters.length-r),this.blocks[this.blocks.length-1].c+=String.fromCharCode(10)}},{key:"getContent",value:function(){return this.blocks}}]),e}();function T(e){var t="";for(var n in U)e&U[n]&&(t+="Askd-te-".concat(n," "));return t}var B=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(){return Object(m.a)(this,n),t.apply(this,arguments)}return Object(f.a)(n,[{key:"render",value:function(){var e=this.props.block,t=this.props.id,n=this.props.index;return a.a.createElement("div",{className:T(e.m),id:t+n,suppressContentEditableWarning:"true",index:n},e.c)}}]),n}(r.Component),L=function(e){e.textEditor.addEventListener("keydown",function(){var t=Object(h.a)(p.a.mark((function t(n){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("Delete"!==n.key){t.next=4;break}n.preventDefault(),t.next=14;break;case 4:if("Backspace"!==n.key||e.composing){t.next=10;break}return t.next=7,e.delete();case 7:n.preventDefault(),t.next=14;break;case 10:if("Enter"!==n.key||e.composing){t.next=14;break}return t.next=13,e.insert(String.fromCharCode(10));case 13:n.preventDefault();case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),e.textEditor.addEventListener("beforeinput",function(){var t=Object(h.a)(p.a.mark((function t(n){var r;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n.isComposing&&!e.composing){t.next=2;break}return t.abrupt("return");case 2:if(n.preventDefault(),"insertReplacementText"!==n.inputType){t.next=10;break}return e.caretInfo.rangeSelect=!0,r=n.dataTransfer.getData("text"),t.next=8,e.insert(r);case 8:t.next=13;break;case 10:if(!n.data){t.next=13;break}return t.next=13,e.insert(n.data);case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),e.textEditor.addEventListener("paste",function(){var t=Object(h.a)(p.a.mark((function t(n){var r;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),r=n.clipboardData.getData("Text"),t.next=4,e.insert(r);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),e.textEditor.addEventListener("compositionstart",function(){var t=Object(h.a)(p.a.mark((function t(n){var r;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.caretInfo.rangeSelect){t.next=3;break}return t.next=3,e.delete();case 3:e.composing=!0,e.compositionIndex=e.caretInfo.index,e.compositionPosition=e.caretInfo.position,(r=document.getElementById(e.id+(e.compositionIndex+1)))&&r.setAttribute("contenteditable","false");case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),e.textEditor.addEventListener("compositionend",function(){var t=Object(h.a)(p.a.mark((function t(n){var r;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.composing){t.next=2;break}return t.abrupt("return");case 2:return(r=document.getElementById(e.id+(e.compositionIndex+1)))&&r.setAttribute("contenteditable","true"),e.composing=!1,t.next=7,e.compositionInsert(n.data);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),document.addEventListener("selectionchange",function(){var t=Object(h.a)(p.a.mark((function t(n){var r,a,s;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.composing){t.next=2;break}return t.abrupt("return");case 2:if(t.prev=2,r=window.getSelection(),a=r.anchorNode.parentElement,s=a.parentElement,a.getAttribute("id")!==e.id+"!"&&s.getAttribute("id")!==e.id){t.next=9;break}return t.next=9,e.selectionChanged();case 9:t.next=13;break;case 11:t.prev=11,t.t0=t.catch(2);case 13:case"end":return t.stop()}}),t,null,[[2,11]])})));return function(e){return t.apply(this,arguments)}}())},F=(n(151),function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(e){var r;return Object(m.a)(this,n),(r=t.call(this,e)).id=r.props.uniqueKey?"Askd-text-editor".concat(r.props.uniqueKey):"Askd-text-editor",r.virtualTextEditor=new M(r.props.initialContent),r.caret=new A(r.id),r.contentChanged=!1,r.caretInfo={rangeSelect:!1,index:0,position:0},r.composing=!1,r.compositionIndex=null,r.compositionPosition=null,r.state={content:r.virtualTextEditor.getContent(),editorMask:0},r.toolbarUpdate=r.toolbarUpdate.bind(Object(d.a)(r)),r}return Object(f.a)(n,[{key:"delete",value:function(){var e=Object(h.a)(p.a.mark((function e(){var t,n,r,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.caretInfo.rangeSelect?(r=this.virtualTextEditor.delete(this.caretInfo.leftIndex,this.caretInfo.leftPosition,this.caretInfo.rightIndex,this.caretInfo.rightPosition),a=Object(P.a)(r,2),this.caretInfo.index=a[0],this.caretInfo.position=a[1]):(t=this.virtualTextEditor.delete(this.caretInfo.index,this.caretInfo.position-1,this.caretInfo.index,this.caretInfo.position),n=Object(P.a)(t,2),this.caretInfo.index=n[0],this.caretInfo.position=n[1]),this.caretInfo.rangeSelect=!1,e.next=4,this.updateText();case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"insert",value:function(){var e=Object(h.a)(p.a.mark((function e(t){var n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.updateCaretInfo(),!this.caretInfo.rangeSelect){e.next=4;break}return e.next=4,this.delete();case 4:return n=this.virtualTextEditor.insert(this.caretInfo.index,this.caretInfo.position,t,this.state.editorMask),r=Object(P.a)(n,2),this.caretInfo.index=r[0],this.caretInfo.position=r[1],this.caretInfo.rangeSelect=!1,e.next=11,this.updateText();case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"compositionInsert",value:function(){var e=Object(h.a)(p.a.mark((function e(t){var n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.virtualTextEditor.insert(this.compositionIndex,this.compositionPosition,t,this.state.editorMask),r=Object(P.a)(n,2),this.caretInfo.index=r[0],this.caretInfo.position=r[1],this.caretInfo.rangeSelect=!1,e.next=7,this.updateText();case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"rangeMaskUpdate",value:function(){var e=Object(h.a)(p.a.mark((function e(t,n){var r,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.caretInfo.rangeSelect){e.next=2;break}return e.abrupt("return");case 2:return r=this.virtualTextEditor.rangeMaskUpdate(this.caretInfo.leftIndex,this.caretInfo.leftPosition,this.caretInfo.rightIndex,this.caretInfo.rightPosition,t,n),a=Object(P.a)(r,4),this.caretInfo.leftIndex=a[0],this.caretInfo.leftPosition=a[1],this.caretInfo.rightIndex=a[2],this.caretInfo.rightPosition=a[3],e.next=10,this.updateText();case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateText",value:function(){var e=Object(h.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.contentChanged=!0,e.next=3,k.setStatePromise(this,{content:this.virtualTextEditor.getContent()});case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateMask",value:function(){var e=Object(h.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.setStatePromise(this,{editorMask:t});case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"toolbarUpdate",value:function(){var e=Object(h.a)(p.a.mark((function e(t,n){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.textEditor.focus(),e.next=3,this.updateMask(this.state.editorMask^t);case 3:return e.next=5,this.rangeMaskUpdate(t,n);case 5:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateCaretInfo",value:function(){var e=this.caret.getInfo();e.rangeSelect?(this.caretInfo.leftIndex=e.leftIndex,this.caretInfo.leftPosition=e.leftPosition,this.caretInfo.rightIndex=e.rightIndex,this.caretInfo.rightPosition=e.rightPosition,this.caretInfo.rangeSelect=!0):(this.caretInfo.index=e.index,this.caretInfo.position=e.position,this.caretInfo.rangeSelect=!1)}},{key:"selectionChanged",value:function(){var e=Object(h.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.updateCaretInfo(),t=this.caretInfo.rangeSelect?this.virtualTextEditor.getCharacterMask(this.caretInfo.leftIndex,this.caretInfo.leftPosition,!0):this.virtualTextEditor.getCharacterMask(this.caretInfo.index,this.caretInfo.position,!1),e.next=4,this.updateMask(t);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.textEditor=document.getElementById(this.id),L(this)}},{key:"componentDidUpdate",value:function(){if(this.contentChanged){var e,t=[],n=Object(N.a)(this.textEditor.childNodes);try{for(n.s();!(e=n.n()).done;){var r=e.value;r.nodeType!==Node.TEXT_NODE&&"BR"!==r.nodeName&&"SPAN"!==r.nodeName||t.push(r)}}catch(u){n.e(u)}finally{n.f()}for(var a=0,s=t;a<s.length;a++){var o=s[a];this.textEditor.removeChild(o)}for(var i=0;i<this.state.content.length;i++){var c=this.textEditor.children[i];c.innerHTML!==this.state.content[i].c&&(c.childNodes[0].nodeValue=this.state.content[i].c)}this.caretInfo.rangeSelect?this.caret.setRangePosition(this.caretInfo.leftIndex,this.caretInfo.leftPosition,this.caretInfo.rightIndex,this.caretInfo.rightPosition):this.caret.setPosition(this.caretInfo.index,this.caretInfo.position),this.contentChanged=!1,this.updateCaretInfo(),this.props.onChange&&this.props.onChange(this.state.content)}}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"render",value:function(){var e=this,t=[];return this.state.content.forEach((function(n,r){t.push(a.a.createElement(B,{block:n,id:e.id,index:r,key:r}))})),a.a.createElement("div",{className:"Askd-text-editor",id:this.id+"!"},a.a.createElement(R,{mask:this.state.editorMask,callback:this.toolbarUpdate}),a.a.createElement("div",{className:"Askd-text-editor-text",id:this.id,tabIndex:"0",contentEditable:"true",suppressContentEditableWarning:"true",spellCheck:"false"},t))}}]),n}(r.Component)),V=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(){return Object(m.a)(this,n),t.apply(this,arguments)}return Object(f.a)(n,[{key:"componentDidMount",value:function(){var e=Object(h.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.renderMathJax();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return a.a.createElement("div",{className:"Module-wrapper"},a.a.createElement("div",{className:"Module-description Module-description-centered"},a.a.createElement("p",null,"A work-in-progress web application for storing publicly accessible competitive programming notes! \\[\\LaTeX\\]")),a.a.createElement(F,null))}}]),n}(r.Component);var z=function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement(V,null))};var K=function(e){var t=e.info;return a.a.createElement(a.a.Fragment,null,a.a.createElement("h2",{className:"Module-heading"},t.username),t.email&&a.a.createElement("p",null,"Email: ",t.email," (only visible to you)"))},_=(n(152),function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(e){var r;return Object(m.a)(this,n),(r=t.call(this,e)).state={loading:!1,searchTerm:"",previousValidSearchTerm:"",showOptions:!1,options:[],filteredOptions:[]},r.handleChange=r.handleChange.bind(Object(d.a)(r)),r.handleBlur=r.handleBlur.bind(Object(d.a)(r)),r.handleFocus=r.handleFocus.bind(Object(d.a)(r)),r.handleOptionSelect=r.handleOptionSelect.bind(Object(d.a)(r)),r}return Object(f.a)(n,[{key:"getOptionString",value:function(e){var t,n=[],r=Object(N.a)(this.props.keys);try{for(r.s();!(t=r.n()).done;){var a=t.value;n.push(e[a])}}catch(s){r.e(s)}finally{r.f()}return n.join(" - ")}},{key:"filterOptions",value:function(){var e=Object(h.a)(p.a.mark((function e(){var t,n,r,a,s,o,i,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[],n=this.state.searchTerm.toLowerCase(),r=Object(N.a)(this.state.options),e.prev=3,r.s();case 5:if((a=r.n()).done){e.next=33;break}if(s=a.value,10!==t.length){e.next=9;break}return e.abrupt("break",33);case 9:if(!this.getOptionString(s).toLowerCase().includes(n)){e.next=13;break}return t.push(s),e.abrupt("continue",31);case 13:o=Object(N.a)(this.props.keys),e.prev=14,o.s();case 16:if((i=o.n()).done){e.next=23;break}if(c=i.value,!s[c].toLowerCase().includes(n)){e.next=21;break}return t.push(s),e.abrupt("break",23);case 21:e.next=16;break;case 23:e.next=28;break;case 25:e.prev=25,e.t0=e.catch(14),o.e(e.t0);case 28:return e.prev=28,o.f(),e.finish(28);case 31:e.next=5;break;case 33:e.next=38;break;case 35:e.prev=35,e.t1=e.catch(3),r.e(e.t1);case 38:return e.prev=38,r.f(),e.finish(38);case 41:return e.next=43,k.setStatePromise(this,{filteredOptions:t});case 43:case"end":return e.stop()}}),e,this,[[3,35,38,41],[14,25,28,31]])})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=Object(h.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.staticKey||this.props.staticKey){e.next=4;break}return e.next=3,k.setStatePromise(this,{searchTerm:""});case 3:return e.abrupt("return");case 4:if(this.props.staticKey!==t.staticKey){e.next=6;break}return e.abrupt("return");case 6:return e.next=8,k.setStatePromise(this,{searchTerm:"",loading:!0});case 8:return e.next=10,this.props.search();case 10:return n=e.sent,e.next=13,k.setStatePromise(this,{loading:!1,previousValidSearchTerm:"",options:n,showOptions:!1});case 13:return e.next=15,this.filterOptions();case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleChange",value:function(){var e=Object(h.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.setStatePromise(this,{searchTerm:t.target.value});case 2:return e.next=4,this.filterOptions();case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleBlur",value:function(){var e=Object(h.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=t.relatedTarget)||n.id!=="Select-options-".concat(this.props.name)){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,k.setStatePromise(this,{showOptions:!1,searchTerm:this.state.previousValidSearchTerm});case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleFocus",value:function(){var e=Object(h.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.setStatePromise(this,{showOptions:!0});case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleOptionSelect",value:function(){var e=Object(h.a)(p.a.mark((function e(t,n){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.setStatePromise(this,{searchTerm:n,previousValidSearchTerm:n,showOptions:!1});case 2:return e.next=4,this.filterOptions();case 4:this.props.callback(t);case 5:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"render",value:function(){var e,t=this,n=[],r=Object(N.a)(this.state.filteredOptions);try{var s=function(){var r=e.value,s=t.getOptionString(r),o=r[t.props.displayKey],i=r.sk;n.push(a.a.createElement("li",{onClick:function(){return t.handleOptionSelect(i,o)},key:i},s))};for(r.s();!(e=r.n()).done;)s()}catch(o){r.e(o)}finally{r.f()}return a.a.createElement("div",{onBlur:this.handleBlur,className:"Search-select"},a.a.createElement("input",{className:this.state.loading?"Askd-form-loading":"",onChange:this.handleChange,autoComplete:"off",type:"text",value:this.state.searchTerm,onFocus:this.handleFocus,name:this.props.name,id:this.props.id,disabled:!this.props.search||this.state.loading}),n.length>0&&this.state.showOptions&&a.a.createElement("ol",{id:"Select-options-".concat(this.props.name),tabIndex:"-1",className:"Search-select-options"},n))}}]),n}(r.Component)),G=n(104),J=n.n(G),Y=Object.freeze({API_ENDPOINT:"https://qqmeusmrfk.execute-api.us-east-1.amazonaws.com/prod/"}),H=function(){function e(){Object(m.a)(this,e)}return Object(f.a)(e,null,[{key:"createApiError",value:function(e,t){var n=Error(t);return n.name=e,n}},{key:"manageResponseError",value:function(){var t=Object(h.a)(p.a.mark((function t(n){var r;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(400!==n.status){t.next=7;break}return t.next=3,n.json();case 3:throw r=t.sent,e.createApiError(r.name,r.message);case 7:if(200===n.status){t.next=9;break}throw Error("Request failed!");case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},{key:"sendRequestBody",value:function(){var t=Object(h.a)(p.a.mark((function t(n,r,a){var s,o;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x.getAccessToken();case 2:return s=t.sent,t.next=5,fetch(Y.API_ENDPOINT+n,{method:a,body:JSON.stringify(r),headers:{Authorization:s}});case 5:return o=t.sent,t.next=8,e.manageResponseError(o);case 8:return t.next=10,o.json();case 10:return t.abrupt("return",t.sent);case 11:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"getJson",value:function(){var t=Object(h.a)(p.a.mark((function t(n,r){var a,s,o;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a="".concat(n,"?").concat(J.a.stringify(r)),t.next=3,x.getAccessToken();case 3:return s=t.sent,t.next=6,fetch(Y.API_ENDPOINT+a,{headers:{Authorization:s}});case 6:return o=t.sent,t.next=9,e.manageResponseError(o);case 9:return t.next=11,o.json();case 11:return t.abrupt("return",t.sent);case 12:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"postJson",value:function(){var t=Object(h.a)(p.a.mark((function t(n,r){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.sendRequestBody(n,r,"POST");case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"putJson",value:function(){var t=Object(h.a)(p.a.mark((function t(n,r){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.sendRequestBody(n,r,"PUT");case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"deleteJson",value:function(){var t=Object(h.a)(p.a.mark((function t(n,r){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.sendRequestBody(n,r,"DELETE");case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}(),W=Object.freeze({SOLVED:{value:0,text:"Solved"},UPSOLVED:{value:1,text:"Upsolved"},UPSOLVED_HELP:{value:2,text:"Upsolved with help"},UNSOLVED:{value:3,text:"Unsolved"}}),q=function(){function e(){Object(m.a)(this,e)}return Object(f.a)(e,null,[{key:"_prettifyProblems",value:function(e){for(var t=0;t<e.length;t++)e[t].prettySk=e[t].sk.replaceAll("#","")}},{key:"getContests",value:function(){var e=Object(h.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={platform:t},e.next=3,H.getJson("contests",n);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getProblems",value:function(){var t=Object(h.a)(p.a.mark((function t(n,r){var a,s;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a={platform:n,contestId:r},t.next=3,H.getJson("problems",a);case 3:return s=t.sent,e._prettifyProblems(s),t.abrupt("return",s);case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"getProblemInfo",value:function(){var e=Object(h.a)(p.a.mark((function e(t,n){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={platform:t,problemId:n},e.next=3,H.getJson("problems",r);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getSolvedStateText",value:function(e){for(var t in W)if(W[t].value===e)return W[t].text}}]),e}(),X=(n(165),function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(e){var r;return Object(m.a)(this,n),(r=t.call(this,e)).state={error:"",platform:null,contestSortKey:null,problemSortKey:null,skipContestSearch:!1},r.close=r.close.bind(Object(d.a)(r)),r.handlePlatformChange=r.handlePlatformChange.bind(Object(d.a)(r)),r.toggleSkipContestSearch=r.toggleSkipContestSearch.bind(Object(d.a)(r)),r.updateProblemSortKey=r.updateProblemSortKey.bind(Object(d.a)(r)),r.updateContestSortKey=r.updateContestSortKey.bind(Object(d.a)(r)),r.addProblem=r.addProblem.bind(Object(d.a)(r)),r}return Object(f.a)(n,[{key:"close",value:function(){this.props.callback(null,null,null)}},{key:"handlePlatformChange",value:function(){var e=Object(h.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.setStatePromise(this,{platform:t.target.value});case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"toggleSkipContestSearch",value:function(){var e=Object(h.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.setStatePromise(this,{skipContestSearch:!this.state.skipContestSearch,contestSortKey:null,problemSortKey:null});case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateContestSortKey",value:function(){var e=Object(h.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.setStatePromise(this,{contestSortKey:t,problemSortKey:null});case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateProblemSortKey",value:function(){var e=Object(h.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.setStatePromise(this,{problemSortKey:t});case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addProblem",value:function(){var e=Object(h.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),this.state.problemSortKey){e.next=5;break}return e.next=4,k.componentSetError(this,"Please search and select a problem.");case 4:return e.abrupt("return");case 5:this.props.callback(this.state.problemSortKey,this.state.platform,this);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=null,n=null;this.state.platform&&!this.state.skipContestSearch&&(t=function(){return q.getContests(e.state.platform)},n=this.state.platform);var r=null,s=null;this.state.platform&&this.state.contestSortKey?(r=function(){return q.getProblems(e.state.platform,e.state.contestSortKey)},s=this.state.platform+this.state.contestSortKey):this.state.platform&&this.state.skipContestSearch&&(r=function(){return q.getProblems(e.state.platform)},s=this.state.platform);var o=this.state.skipContestSearch?"Want to filter by contest?":"Want to skip filtering by contest?";return a.a.createElement("div",{className:"Module-blocker"},a.a.createElement("button",{onClick:this.close,className:"Askd-form-close Askd-button Askd-button-circular"},"X"),a.a.createElement("div",{className:"Add-problem-form Module-popup"},this.state.error&&a.a.createElement("h2",null,this.state.error),a.a.createElement("h2",null,"Add a problem!"),a.a.createElement("form",{className:"Askd-form",onSubmit:this.addProblem},a.a.createElement("label",{htmlFor:"cp-platform"},"Platform"),a.a.createElement("select",{defaultValue:"",onChange:this.handlePlatformChange,name:"platform",id:"cp-platform"},a.a.createElement("option",{disabled:!0,value:""}),a.a.createElement("option",{value:"CodeForces"},"CodeForces"),a.a.createElement("option",{value:"CodeChef"},"CodeChef")),a.a.createElement("label",{htmlFor:"cp-contest"},"Contest"),a.a.createElement(_,{name:"contest",id:"cp-contest",search:t,keys:["sk","name"],callback:this.updateContestSortKey,displayKey:"name",staticKey:n}),a.a.createElement("button",{onClick:this.toggleSkipContestSearch,type:"button",className:"Askd-form-link Askd-form-link-separator"},o),a.a.createElement("label",{htmlFor:"cp-title"},"Problem"),a.a.createElement(_,{name:"title",id:"cp-title",search:r,keys:["prettySk","name"],callback:this.updateProblemSortKey,displayKey:"name",staticKey:s}),a.a.createElement("input",{className:"Askd-button Module-popup-last",type:"submit",value:"Add Problem"}))))}}]),n}(r.Component)),Q=function(){function e(){Object(m.a)(this,e)}return Object(f.a)(e,null,[{key:"getNotes",value:function(){var e=Object(h.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={username:t},e.next=3,H.getJson("notes",n);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getNoteInfo",value:function(){var e=Object(h.a)(p.a.mark((function e(t,n,r){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={username:t,platform:n,problemId:r},e.next=3,H.getJson("notes",a);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"addNote",value:function(){var e=Object(h.a)(p.a.mark((function e(t,n,r){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={username:t,platform:n,problemId:r},e.next=3,H.postJson("notes",a);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"editNote",value:function(){var e=Object(h.a)(p.a.mark((function e(t,n,r,a,s,o,i){var c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c={username:t,platform:n,problemId:r,title:a,solved:s,content:o,published:i},e.next=3,H.putJson("notes",c);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,n,r,a,s,o,i){return e.apply(this,arguments)}}()},{key:"deleteNote",value:function(){var e=Object(h.a)(p.a.mark((function e(t,n,r){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={username:t,platform:n,problemId:r},e.next=3,H.deleteJson("notes",a);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()}]),e}(),Z=n(110),$=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(){return Object(m.a)(this,n),t.apply(this,arguments)}return Object(f.a)(n,[{key:"render",value:function(){var e,t=this.props.info;switch(t.solved){case W.SOLVED.value:e="solved";break;case W.UPSOLVED.value:e="upsolved";break;case W.UPSOLVED_HELP.value:e="upsolved-help";break;default:e="unsolved"}var n=t.problemSk.replace("#","/"),r=t.published?"published":"unpublished",s=new Date(t.editedTime).toLocaleDateString();return a.a.createElement("li",{className:"User-note-info User-note-info-".concat(e)},a.a.createElement(c.b,{className:"User-note-info-edit Askd-form-link",to:"/notes/edit/".concat(t.platform,"/").concat(n)},"Edit"),a.a.createElement("h5",null,t.platform," ",t.problemCode," - ",t.problemName),a.a.createElement("h6",{className:"User-note-info-title"},t.title),a.a.createElement("h6",{className:"User-note-info-timestamp"},s),a.a.createElement("ul",{className:"User-note-info-tags"},a.a.createElement("li",{className:"User-note-solved-indicator"}),a.a.createElement("li",{className:"User-note-tag-".concat(r)})))}}]),n}(r.Component),ee=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(){return Object(m.a)(this,n),t.apply(this,arguments)}return Object(f.a)(n,[{key:"render",value:function(){for(var e=this.props.info,t=[],n=0;n<e.notes.length;n++){var r=e.notes[n],s=r.problemSk.split("#")[1],o=r.problemSk.replace("#","/"),i="User-note-contest-code";s.length>=3&&(i+="-small");var u=void 0;switch(r.solved){case W.SOLVED.value:u="solved";break;case W.UPSOLVED.value:u="upsolved";break;case W.UPSOLVED_HELP.value:u="upsolved-help";break;default:u="unsolved"}t.push(a.a.createElement("li",{key:n,className:"User-note-contest-".concat(u)},a.a.createElement(c.b,{className:"User-note-contest-edit Askd-form-link",to:"/notes/edit/".concat(e.platform,"/").concat(o)},"Edit"),a.a.createElement("span",{className:i},s)))}var l=new Date(e.editedTime).toLocaleDateString();return a.a.createElement("li",{className:"User-note-info"},a.a.createElement("h5",null,e.contestName),a.a.createElement("h6",{className:"User-note-contest-timestamp"},l),a.a.createElement("ul",{className:"User-note-contest-notes"},t))}}]),n}(r.Component);var te=function(e){var t=e.title,n=e.innerContent,s=Object(r.useState)(!0),o=Object(P.a)(s,2),i=o[0],c=o[1],u=i?"Hide":"Show";return a.a.createElement("li",{className:"User-notes-title-dropdown"},a.a.createElement("button",{className:"User-notes-title-dropdown-showhide Askd-form-link",onClick:function(){return c(!i)}},u),a.a.createElement("h4",{className:"User-notes-title-dropdown-heading"},t),i&&n)};function ne(e,t){return e.editedTime>t.editedTime?-1:1}var re=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(){return Object(m.a)(this,n),t.apply(this,arguments)}return Object(f.a)(n,[{key:"renderIntoNotes",value:function(e){for(var t=[],n=0;n<e.length;n++)t.push(a.a.createElement($,{key:n,info:e[n]}));return a.a.createElement("ul",{className:"User-notes-list"},t)}},{key:"renderIntoContests",value:function(e){var t,n={},r=Object(N.a)(e);try{for(r.s();!(t=r.n()).done;){var s=t.value,o="".concat(s.platform,"#").concat(s.contestCode,"#").concat(s.contestName);n.hasOwnProperty(o)?(s.editedTime>n[o].editedTime&&(n[o].editedTime=s.editedTime),n[o].notes.push(s)):n[o]={contestCode:s.contestCode,contestName:s.contestName,platform:s.platform,editedTime:s.editedTime,notes:[s]}}}catch(u){r.e(u)}finally{r.f()}var i=[];for(var c in n)i.push(a.a.createElement(ee,{key:c,info:n[c]}));return a.a.createElement("ul",{className:"User-notes-list"},i)}},{key:"renderIntoPlatforms",value:function(e){var t,n={},r=Object(N.a)(e);try{for(r.s();!(t=r.n()).done;){var s=t.value;n.hasOwnProperty(s.platform)?n[s.platform].push(s):n[s.platform]=[s]}}catch(l){r.e(l)}finally{r.f()}var o=[];for(var i in n){var c=n[i],u=this.props.organizeByContest?this.renderIntoContests(c):this.renderIntoNotes(c);o.push(a.a.createElement(te,{key:i,title:i,innerContent:u}))}return a.a.createElement("ul",{className:"User-notes-list"},o)}},{key:"renderIntoSolved",value:function(e){var t,n={},r=Object(N.a)(e);try{for(r.s();!(t=r.n()).done;){var s=t.value;n.hasOwnProperty(s.solved)?n[s.solved].push(s):n[s.solved]=[s]}}catch(p){r.e(p)}finally{r.f()}var o=[];for(var i in n){var c=q.getSolvedStateText(parseInt(i)),u=n[i],l=void 0;l=this.props.organizeByPlatform?this.renderIntoPlatforms(u):this.props.organizeByContest?this.renderIntoContests(u):this.renderIntoNotes(u),o.push(a.a.createElement(te,{key:i,title:c,innerContent:l}))}return a.a.createElement("ul",{className:"User-notes-list"},o)}},{key:"render",value:function(){return 0===this.props.notes.length?a.a.createElement("p",null,"There's nothing to see here yet!"):(e=this.props.sortByRecent?Object(Z.a)(this.props.notes).sort(ne):this.props.notes,this.props.organizeBySolved?this.renderIntoSolved(e):this.props.organizeByPlatform?this.renderIntoPlatforms(e):this.props.organizeByContest?this.renderIntoContests(e):this.renderIntoNotes(e));var e}}]),n}(r.Component),ae=(n(166),function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(e){var r;return Object(m.a)(this,n),(r=t.call(this,e)).state={showAddProblemForm:!1,organizeBySolved:!1,organizeByPlatform:!1,organizeByContest:!1,sortByRecent:!1},r.toggleAddProblemForm=r.toggleAddProblemForm.bind(Object(d.a)(r)),r.toggleOrganizeBySolved=r.toggleOrganizeBySolved.bind(Object(d.a)(r)),r.toggleOrganizeByPlatform=r.toggleOrganizeByPlatform.bind(Object(d.a)(r)),r.toggleOrganizeByContest=r.toggleOrganizeByContest.bind(Object(d.a)(r)),r.toggleSortByRecent=r.toggleSortByRecent.bind(Object(d.a)(r)),r.addProblem=r.addProblem.bind(Object(d.a)(r)),r}return Object(f.a)(n,[{key:"toggleAddProblemForm",value:function(){var e=Object(h.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.setStatePromise(this,{showAddProblemForm:!this.state.showAddProblemForm});case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toggleOrganizeBySolved",value:function(){var e=Object(h.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.setStatePromise(this,{organizeBySolved:!this.state.organizeBySolved});case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toggleOrganizeByPlatform",value:function(){var e=Object(h.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.setStatePromise(this,{organizeByPlatform:!this.state.organizeByPlatform});case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toggleOrganizeByContest",value:function(){var e=Object(h.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.setStatePromise(this,{organizeByContest:!this.state.organizeByContest});case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toggleSortByRecent",value:function(){var e=Object(h.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.setStatePromise(this,{sortByRecent:!this.state.sortByRecent});case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addProblem",value:function(){var e=Object(h.a)(p.a.mark((function e(t,n,r){var a,s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=4;break}return e.next=3,this.toggleAddProblemForm();case 3:return e.abrupt("return");case 4:return e.prev=4,a=this.props.userInfo.username,e.next=8,Q.addNote(a,n,t);case 8:s=t.replace("#","/"),this.props.history.push("/notes/edit/".concat(n,"/").concat(s)),e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(4),e.next=16,k.componentSetError(r,e.t0.message);case 16:case"end":return e.stop()}}),e,this,[[4,12]])})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"render",value:function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement("h2",{className:"Module-heading"},"Problems"),this.state.showAddProblemForm&&a.a.createElement(X,{callback:this.addProblem}),a.a.createElement("form",null,a.a.createElement("div",{className:"User-notes-organize"},a.a.createElement("label",null,a.a.createElement("b",null,"Organize by")),a.a.createElement("input",{type:"checkbox",name:"solved",value:"solved",onChange:this.toggleOrganizeBySolved}),a.a.createElement("label",{htmlFor:"solved"},"Solved"),a.a.createElement("input",{type:"checkbox",name:"platform",value:"platform",onChange:this.toggleOrganizeByPlatform}),a.a.createElement("label",{htmlFor:"platform"},"Platform"),a.a.createElement("input",{type:"checkbox",name:"contest",value:"contest",onChange:this.toggleOrganizeByContest}),a.a.createElement("label",{htmlFor:"contest"},"Contest")),a.a.createElement("div",{className:"User-notes-organize"},a.a.createElement("label",{htmlFor:"sort"},a.a.createElement("b",null,"Sort by")),a.a.createElement("select",{defaultValue:"default",name:"sort",onChange:this.toggleSortByRecent},a.a.createElement("option",{value:"default"},"Default"),a.a.createElement("option",{value:"recent"},"Recent")))),a.a.createElement("div",{className:"User-notes Module-space"},a.a.createElement(re,{organizeBySolved:this.state.organizeBySolved,organizeByPlatform:this.state.organizeByPlatform,organizeByContest:this.state.organizeByContest,sortByRecent:this.state.sortByRecent,notes:this.props.notes}),this.props.userInfo.email&&a.a.createElement("button",{onClick:this.toggleAddProblemForm,className:"User-notes-add Askd-button Askd-button-circular"},"+")))}}]),n}(r.Component)),se=function(){function e(){Object(m.a)(this,e)}return Object(f.a)(e,null,[{key:"getUserInfo",value:function(){var e=Object(h.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={username:t},e.next=3,H.getJson("profile",n);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),oe=Object.freeze({LOADING:0,DONE:1,NOT_FOUND:2}),ie=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(e){var r;return Object(m.a)(this,n),(r=t.call(this,e)).state={screen:oe.LOADING,userInfo:null,notes:null},r}return Object(f.a)(n,[{key:"getUserInfo",value:function(){var e=Object(h.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.match.params.username,e.next=3,se.getUserInfo(t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getNotes",value:function(){var e=Object(h.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.match.params.username,e.next=3,Q.getNotes(t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadInfo",value:function(){var e=Object(h.a)(p.a.mark((function e(){var t,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.getUserInfo();case 3:return t=e.sent,e.next=6,this.getNotes();case 6:return n=e.sent,e.next=9,k.setStatePromise(this,{screen:oe.DONE,userInfo:t,notes:n});case 9:e.next=16;break;case 11:if(e.prev=11,e.t0=e.catch(0),"UserNotFound"!==e.t0.name){e.next=16;break}return e.next=16,k.setStatePromise(this,{screen:oe.NOT_FOUND});case 16:case"end":return e.stop()}}),e,this,[[0,11]])})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=Object(h.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadInfo();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=Object(h.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.match.params.username===this.props.match.params.username){e.next=5;break}return e.next=3,k.setStatePromise(this,{screen:oe.LOADING,info:null});case 3:return e.next=5,this.loadInfo();case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"render",value:function(){var e,t=a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"Module-description"},a.a.createElement(K,{info:this.state.userInfo})),a.a.createElement(ae,{userInfo:this.state.userInfo,notes:this.state.notes,history:this.props.history})),n=a.a.createElement("div",{className:"Module-description"},a.a.createElement("h2",null,"User not found!"));switch(this.state.screen){case oe.LOADING:e=null;break;case oe.DONE:e=t;break;case oe.NOT_FOUND:e=n}return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"Module-wrapper"},e))}}]),n}(r.Component),ce=Object.freeze({LOADING:0,DONE:1,NOT_FOUND:2}),ue=n(221),le=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(e){var r;return Object(m.a)(this,n),(r=t.call(this,e)).state={error:""},r.randomCode=Object(ue.a)(),r.close=r.close.bind(Object(d.a)(r)),r.deleteNote=r.deleteNote.bind(Object(d.a)(r)),r}return Object(f.a)(n,[{key:"close",value:function(){this.props.exitCallback()}},{key:"deleteNote",value:function(){var e=Object(h.a)(p.a.mark((function e(t){var n,r,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),t.target.confirmCode.value===this.randomCode){e.next=6;break}return e.next=5,k.componentSetError(this,"Your confirmation code doesn't match!");case 5:return e.abrupt("return");case 6:return e.prev=6,e.next=9,x.getUsername();case 9:return n=e.sent,r=this.props.platform,a=this.props.problemInfo.problemId,e.next=14,Q.deleteNote(n,r,a);case 14:this.props.history.push("/users/".concat(n)),e.next=21;break;case 17:return e.prev=17,e.t0=e.catch(6),e.next=21,k.componentSetError(this,e.t0.message);case 21:case"end":return e.stop()}}),e,this,[[6,17]])})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return a.a.createElement("div",{className:"Module-blocker"},a.a.createElement("button",{onClick:this.close,className:"Askd-form-close Askd-button Askd-button-circular"},"X"),a.a.createElement("div",{className:"Edit-note-delete-menu Module-popup"},this.state.error&&a.a.createElement("h2",null,this.state.error),a.a.createElement("h2",null,"Are you sure you want to permanently delete this note?"),a.a.createElement("p",null,"This action cannot be undone! Please enter the following code as confirmation."),a.a.createElement("form",{className:"Askd-form",onSubmit:this.deleteNote},a.a.createElement("label",{htmlFor:"confirmCode"},this.randomCode),a.a.createElement("input",{autoComplete:"off",type:"text",name:"confirmCode",key:"confirmCode",id:"confirmCode"}),a.a.createElement("input",{className:"Askd-button",type:"submit",value:"Delete"}))))}}]),n}(r.Component),pe=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(e){var r;Object(m.a)(this,n);var a=(r=t.call(this,e)).props.noteInfo;return r.title=a.title,r.solved=a.solved,r.content=JSON.parse(a.content),r.state={published:a.published,disableEditButtons:!1,loadingSave:!1,loadingPublish:!1,showDeleteMenu:!1},r.saveNote=r.saveNote.bind(Object(d.a)(r)),r.togglePublishNote=r.togglePublishNote.bind(Object(d.a)(r)),r.toggleDeleteMenu=r.toggleDeleteMenu.bind(Object(d.a)(r)),r.handleTitleChange=r.handleTitleChange.bind(Object(d.a)(r)),r.handleSolvedChange=r.handleSolvedChange.bind(Object(d.a)(r)),r.handleContentChange=r.handleContentChange.bind(Object(d.a)(r)),r}return Object(f.a)(n,[{key:"saveOrPublishNote",value:function(){var e=Object(h.a)(p.a.mark((function e(t){var n,r,a,s,o,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.getUsername();case 2:return n=e.sent,r=this.props.platform,a=this.props.problemInfo.problemId,s=this.title,o=this.solved,i=JSON.stringify(this.content),e.next=10,Q.editNote(n,r,a,s,o,i,t);case 10:return e.next=12,k.setStatePromise(this,{published:t,disableEditButtons:!1,loadingSave:!1,loadingPublish:!1});case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"saveNote",value:function(){var e=Object(h.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.setStatePromise(this,{disableEditButtons:!0,loadingSave:!0});case 2:return e.next=4,this.saveOrPublishNote(this.state.published);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"togglePublishNote",value:function(){var e=Object(h.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.setStatePromise(this,{disableEditButtons:!0,loadingPublish:!0});case 2:return e.next=4,this.saveOrPublishNote(!this.state.published);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"toggleDeleteMenu",value:function(){var e=Object(h.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.setStatePromise(this,{showDeleteMenu:!this.state.showDeleteMenu});case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleTitleChange",value:function(e){this.title=e.target.value}},{key:"handleSolvedChange",value:function(e){this.solved=e.target.value}},{key:"handleContentChange",value:function(e){this.content=e}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"render",value:function(){var e=this.state.published?"Unpublish":"Publish!",t="Askd-button Askd-not-fullwidth",n="Askd-button Askd-not-fullwidth";return this.state.loadingSave&&(t+=" Askd-form-loading"),this.state.loadingPublish&&(n+=" Askd-form-loading"),a.a.createElement(a.a.Fragment,null,this.state.showDeleteMenu&&a.a.createElement(le,{exitCallback:this.toggleDeleteMenu,platform:this.props.platform,history:this.props.history,problemInfo:this.props.problemInfo}),a.a.createElement("form",{className:"Edit-note-form Askd-form"},a.a.createElement("input",{className:"Edit-note-title",name:"title",type:"text",defaultValue:this.title,placeholder:"Title",onChange:this.handleTitleChange}),a.a.createElement("select",{name:"solved",id:"note-solved",onChange:this.handleSolvedChange,defaultValue:this.solved},a.a.createElement("option",{value:W.SOLVED.value},"Solved"),a.a.createElement("option",{value:W.UPSOLVED.value},"Upsolved"),a.a.createElement("option",{value:W.UPSOLVED_HELP.value},"Upsolved with help"),a.a.createElement("option",{value:W.UNSOLVED.value},"Unsolved")),a.a.createElement(F,{initialContent:this.content,onChange:this.handleContentChange}),a.a.createElement("div",{className:"Edit-note-bottom-buttons"},a.a.createElement("input",{className:t,type:"button",value:"Save",onClick:this.saveNote,disabled:this.state.disableEditButtons}),a.a.createElement("input",{className:n,type:"button",value:e,onClick:this.togglePublishNote,disabled:this.state.disableEditButtons})),a.a.createElement("div",{className:"Edit-note-delete"},a.a.createElement("button",{type:"button",className:"Askd-form-link Askd-form-link-bottom",onClick:this.toggleDeleteMenu},"Permanently delete this note?"))))}}]),n}(r.Component),he=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(){return Object(m.a)(this,n),t.apply(this,arguments)}return Object(f.a)(n,[{key:"render",value:function(){var e=this.props.info;return a.a.createElement("div",{className:"Edit-note-problem-info"},a.a.createElement("div",{className:"Module-info-box"},a.a.createElement("h4",null,this.props.platform," ",e.problemCode," - ",e.problemName),a.a.createElement("p",{className:"Edit-note-contest"},e.contestName),a.a.createElement("a",{className:"Askd-form-link",href:e.link},"Problem link")))}}]),n}(r.Component),me=(n(167),function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(e){var r;return Object(m.a)(this,n),(r=t.call(this,e)).state={screen:ce.LOADING,problemInfo:null,noteInfo:null},r}return Object(f.a)(n,[{key:"loadProblemInfo",value:function(){var e=Object(h.a)(p.a.mark((function e(){var t,n,r,a,s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.match.params.platform,n=this.props.match.params.contestId,r=this.props.match.params.problemCode,a="".concat(n,"#").concat(r),e.next=6,q.getProblemInfo(t,a);case 6:return(s=e.sent).problemId=a,e.abrupt("return",s);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadNoteInfo",value:function(){var e=Object(h.a)(p.a.mark((function e(){var t,n,r,a,s,o;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.getUsername();case 2:return t=e.sent,n=this.props.match.params.platform,r=this.props.match.params.contestId,a=this.props.match.params.problemCode,s="".concat(r,"#").concat(a),e.next=9,Q.getNoteInfo(t,n,s);case 9:return o=e.sent,e.abrupt("return",o);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadInfo",value:function(){var e=Object(h.a)(p.a.mark((function e(){var t,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadProblemInfo();case 2:return t=e.sent,e.next=5,this.loadNoteInfo();case 5:return n=e.sent,e.next=8,k.setStatePromise(this,{problemInfo:t,noteInfo:n,screen:ce.DONE});case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=Object(h.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadInfo();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"render",value:function(){var e=this.props.match.params.platform;return a.a.createElement("div",{className:"Module-wrapper"},this.state.screen===ce.DONE&&a.a.createElement(a.a.Fragment,null,a.a.createElement(he,{info:this.state.problemInfo,platform:e}),a.a.createElement(pe,{problemInfo:this.state.problemInfo,noteInfo:this.state.noteInfo,platform:e,history:this.props.history})))}}]),n}(r.Component));n(168),n(169),n(170);var fe=function(){return a.a.createElement(c.a,null,a.a.createElement("div",{className:"App"},a.a.createElement(I,null),a.a.createElement(u.c,null,a.a.createElement(u.a,{exact:!0,path:"/",component:z}),a.a.createElement(u.a,{exact:!0,path:"/home",component:z}),a.a.createElement(u.a,{exact:!0,path:"/users/:username",component:ie}),a.a.createElement(u.a,{exact:!0,path:"/notes/edit/:platform/:contestId/:problemCode",component:me}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var de=n(105);i.default.configure(de),document.body.addEventListener("mousedown",(function(e){document.body.classList.add("Global-mouse-click")})),document.body.addEventListener("keydown",(function(e){9===e.keyCode&&document.body.classList.remove("Global-mouse-click")})),o.a.render(a.a.createElement(fe,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[193,1,2]]]);
//# sourceMappingURL=main.4eccb8e2.chunk.js.map