(this["webpackJsonpaskdfjlas.github.io"]=this["webpackJsonpaskdfjlas.github.io"]||[]).push([[0],{104:function(e){e.exports=JSON.parse('{"Auth":{"region":"us-east-1","userPoolId":"us-east-1_YQGmZ3d3H","userPoolWebClientId":"7ntajq8ii4nne0s2o55cvsqlfe"}}')},115:function(e,t,r){e.exports=r(192)},143:function(e,t,r){},144:function(e,t,r){},149:function(e,t,r){},150:function(e,t,r){},151:function(e,t,r){},164:function(e,t,r){},165:function(e,t,r){},166:function(e,t,r){},167:function(e,t,r){},168:function(e,t,r){},169:function(e,t,r){},192:function(e,t,r){"use strict";r.r(t);var n=r(2),a=r.n(n),s=r(98),o=r.n(s),c=r(68),i=r(37),u=r(13),l=r(3),p=r.n(l),m=r(5),f=r(6),h=r(7),d=r(8),b=r(11),v=r(10),k=function(){function e(){Object(f.a)(this,e)}return Object(h.a)(e,null,[{key:"setStatePromise",value:function(){var e=Object(m.a)(p.a.mark((function e(t,r){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){t.setState(r,(function(){e()}))})));case 1:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"isEmpty",value:function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}},{key:"componentSetError",value:function(){var t=Object(m.a)(p.a.mark((function t(r,n){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!r.setError){t.next=5;break}return t.next=3,r.setError(n);case 3:t.next=7;break;case 5:return t.next=7,e.setStatePromise(r,{error:"Error: ".concat(n)});case 7:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}()},{key:"componentSetSuccess",value:function(){var t=Object(m.a)(p.a.mark((function t(r,n){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!r.setSuccess){t.next=5;break}return t.next=3,r.setSuccess(n);case 3:t.next=7;break;case 5:return t.next=7,e.setStatePromise(r,{error:"",success:n});case 7:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}()},{key:"renderMathJax",value:function(){var e=Object(m.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.MathJax){e.next=3;break}return e.next=3,window.MathJax.typesetPromise();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),e}(),x=function(){function e(){Object(f.a)(this,e)}return Object(h.a)(e,null,[{key:"checkPasswords",value:function(){var e=Object(m.a)(p.a.mark((function e(t,r,n){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r===n){e.next=4;break}return e.next=3,k.componentSetError(t,"Your passwords don't match!");case 3:return e.abrupt("return",!1);case 4:if(!(r.length<6)){e.next=8;break}return e.next=7,k.componentSetError(t,"Your password is too short!");case 7:return e.abrupt("return",!1);case 8:return e.abrupt("return",!0);case 9:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}()}]),e}(),y=r(108),E=function(){function e(){Object(f.a)(this,e)}return Object(h.a)(e,null,[{key:"getProfile",value:function(){var e=Object(m.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.a.currentAuthenticatedUser();case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}()},{key:"register",value:function(){var e=Object(m.a)(p.a.mark((function e(t,r,n){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.signUp({username:t,password:n,attributes:{email:r}});case 2:return a=e.sent,e.abrupt("return",a.codeDeliveryDetails.Destination);case 4:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"verifyEmail",value:function(){var e=Object(m.a)(p.a.mark((function e(t,r){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.confirmSignUp(t,r);case 2:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"resendVerificationEmail",value:function(){var e=Object(m.a)(p.a.mark((function e(t){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.resendSignUp(t);case 2:return r=e.sent,e.abrupt("return",r.CodeDeliveryDetails.Destination);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"forgotPassword",value:function(){var e=Object(m.a)(p.a.mark((function e(t){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.forgotPassword(t);case 2:return r=e.sent,e.abrupt("return",r.CodeDeliveryDetails.Destination);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"resetPassword",value:function(){var e=Object(m.a)(p.a.mark((function e(t,r,n){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.forgotPasswordSubmit(t,r,n);case 2:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"login",value:function(){var e=Object(m.a)(p.a.mark((function e(t,r){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.signIn(t,r);case 2:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"logout",value:function(){var t=Object(m.a)(p.a.mark((function t(){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y.a.signOut();case 2:e.profile=null;case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()},{key:"getUsername",value:function(){var t=Object(m.a)(p.a.mark((function t(){var r;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getProfile();case 2:if(r=t.sent){t.next=5;break}return t.abrupt("return",null);case 5:return t.abrupt("return",r.username);case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()},{key:"getAccessToken",value:function(){var t=Object(m.a)(p.a.mark((function t(){var r,n,a;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getProfile();case 2:if(r=t.sent){t.next=5;break}return t.abrupt("return",null);case 5:return n=r.getSignInUserSession(),a=n.getAccessToken(),t.abrupt("return",a.getJwtToken());case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()}]),e}(),g=Object.freeze({LOGIN:0,RECOVERY_USERNAME:1,RECOVERY_PASSWORD:2,RECOVERY_SUCCESS:3,REGISTER:4,REGISTER_VERIFY:5,REGISTER_SUCCESS:6}),w=(r(143),function(e){Object(b.a)(r,e);var t=Object(v.a)(r);function r(e){var n;Object(f.a)(this,r),n=t.call(this,e);var a=e.unverifiedAccountUsername?g.REGISTER_VERIFY:g.REGISTER;return n.state={error:"",success:"",username:e.unverifiedAccountUsername,destination:e.unverifiedAccountDestination,screen:a},n.close=n.close.bind(Object(d.a)(n)),n.register=n.register.bind(Object(d.a)(n)),n.verifyEmail=n.verifyEmail.bind(Object(d.a)(n)),n.resendVerificationEmail=n.resendVerificationEmail.bind(Object(d.a)(n)),n}return Object(h.a)(r,[{key:"close",value:function(){this.props.exitCallback()}},{key:"setError",value:function(){var e=Object(m.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.startsWith("PreSignUp failed with error")&&(t=t.substring("PreSignUp failed with error".length,t.length-1)),e.next=3,k.setStatePromise(this,{error:"Error: ".concat(t),success:""});case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"register",value:function(){var e=Object(m.a)(p.a.mark((function e(t){var r,n,a,s,o,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),r=t.target,n=r.username.value,a=r.email.value,s=r.password.value,o=r.confirmPassword.value,n&&a&&s&&o){e.next=10;break}return e.next=9,this.setError("Please fill out all of the fields.");case 9:return e.abrupt("return");case 10:if(!(n.length<3||n.length>20)){e.next=14;break}return e.next=13,this.setError("Your username must be between ".concat(3," ")+"and ".concat(20," characters!"));case 13:return e.abrupt("return");case 14:return e.next=16,x.checkPasswords(this,s,o);case 16:if(e.sent){e.next=19;break}return e.abrupt("return");case 19:return e.prev=19,e.next=22,E.register(n,a,s);case 22:c=e.sent,k.setStatePromise(this,{error:"",username:n,destination:c,screen:g.REGISTER_VERIFY}),e.next=30;break;case 26:return e.prev=26,e.t0=e.catch(19),e.next=30,this.setError(e.t0.message);case 30:case"end":return e.stop()}}),e,this,[[19,26]])})));return function(t){return e.apply(this,arguments)}}()},{key:"verifyEmail",value:function(){var e=Object(m.a)(p.a.mark((function e(t){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),r=t.target.code.value,e.prev=2,e.next=5,E.verifyEmail(this.state.username,r);case 5:k.setStatePromise(this,{error:"",success:"",screen:g.REGISTER_SUCCESS}),e.next=12;break;case 8:return e.prev=8,e.t0=e.catch(2),e.next=12,this.setError(e.t0.message);case 12:case"end":return e.stop()}}),e,this,[[2,8]])})));return function(t){return e.apply(this,arguments)}}()},{key:"resendVerificationEmail",value:function(){var e=Object(m.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E.resendVerificationEmail(this.state.username);case 3:return e.next=5,k.componentSetSuccess(this,"Another email has been sent!");case 5:e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(0),e.next=11,this.setError(e.t0.message);case 11:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e,t=a.a.createElement("div",{className:"Register-form Module-popup"},this.state.error&&a.a.createElement("h2",null,this.state.error),a.a.createElement("h2",null,"Create an account!"),a.a.createElement("form",{className:"Askd-form",onSubmit:this.register},a.a.createElement("label",{htmlFor:"register-username"},"Username"),a.a.createElement("input",{autoComplete:"off",type:"text",name:"username",id:"register-username"}),a.a.createElement("label",{htmlFor:"register-email"},"Email"),a.a.createElement("input",{autoComplete:"off",type:"text",name:"email",id:"register-email"}),a.a.createElement("label",{htmlFor:"register-password"},"Password"),a.a.createElement("input",{autoComplete:"off",type:"password",name:"password",id:"register-password"}),a.a.createElement("label",{htmlFor:"register-confirm-password"},"Confirm password"),a.a.createElement("input",{autoComplete:"off",type:"password",name:"confirmPassword",id:"register-confirm-password"}),a.a.createElement("input",{className:"Askd-button Module-popup-last",type:"submit",value:"Register"}))),r=a.a.createElement("div",{className:"Register-form Module-popup"},this.state.error&&a.a.createElement("h2",null,this.state.error),this.state.success&&a.a.createElement("h2",null,this.state.success),a.a.createElement("h2",null,"Verify your email!"),a.a.createElement("p",null,"You should've received an email at ",this.state.destination," with a verification code. If it isn't convenient for you to verify your account now, you may do so later by logging in."),a.a.createElement("form",{className:"Askd-form",onSubmit:this.verifyEmail},a.a.createElement("label",{htmlFor:"verification-code"},"Verification code"),a.a.createElement("input",{autoComplete:"off",type:"text",name:"code",key:"verification-code",id:"verification-code"}),a.a.createElement("button",{type:"button",onClick:this.resendVerificationEmail,className:"Askd-form-link Askd-form-link-bottom"},"Didn't get the email? Click here to resend"),a.a.createElement("input",{className:"Askd-button Module-popup-last",type:"submit",value:"Submit"}))),n=a.a.createElement("div",{className:"Register-form Module-popup"},a.a.createElement("h2",null,"Verification success!"),a.a.createElement("p",{className:"Module-popup-last"},"Your email was successfully verified! Click the 'X' button in the top-right corner to return to the site, and you'll be able to login."));switch(this.state.screen){case g.REGISTER:e=t;break;case g.REGISTER_VERIFY:e=r;break;case g.REGISTER_SUCCESS:e=n}return a.a.createElement("div",{className:"Module-blocker"},a.a.createElement("button",{onClick:this.close,className:"Askd-form-close Askd-button Askd-button-circular"},"X"),e)}}]),r}(n.Component)),O=function(e){Object(b.a)(r,e);var t=Object(v.a)(r);function r(e){var n;return Object(f.a)(this,r),(n=t.call(this,e)).state={error:"",username:null,destination:null,screen:e.screen||g.LOGIN},n.close=n.close.bind(Object(d.a)(n)),n.login=n.login.bind(Object(d.a)(n)),n.enablePasswordRecovery=n.enablePasswordRecovery.bind(Object(d.a)(n)),n.forgotPassword=n.forgotPassword.bind(Object(d.a)(n)),n.resetPassword=n.resetPassword.bind(Object(d.a)(n)),n.resendVerificationEmail=n.resendVerificationEmail.bind(Object(d.a)(n)),n}return Object(h.a)(r,[{key:"close",value:function(){this.props.exitCallback(!1)}},{key:"login",value:function(){var e=Object(m.a)(p.a.mark((function e(t){var r,n,a,s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),r=t.target,n=r.username.value,a=r.password.value,n&&a){e.next=8;break}return e.next=7,k.componentSetError(this,"Please fill out all of the fields.");case 7:return e.abrupt("return");case 8:return e.prev=8,e.prev=9,e.next=12,E.login(n,a);case 12:this.props.exitCallback(!0),e.next=26;break;case 15:if(e.prev=15,e.t0=e.catch(9),"UserNotConfirmedException"!==e.t0.code){e.next=25;break}return e.next=20,E.resendVerificationEmail(n);case 20:return s=e.sent,e.next=23,this.props.emailVerificationCallback(n,s);case 23:e.next=26;break;case 25:throw e.t0;case 26:e.next=32;break;case 28:return e.prev=28,e.t1=e.catch(8),e.next=32,k.componentSetError(this,e.t1.message);case 32:case"end":return e.stop()}}),e,this,[[8,28],[9,15]])})));return function(t){return e.apply(this,arguments)}}()},{key:"enablePasswordRecovery",value:function(){var e=Object(m.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.setStatePromise(this,{error:"",screen:g.RECOVERY_USERNAME});case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"forgotPassword",value:function(){var e=Object(m.a)(p.a.mark((function e(t){var r,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),r=t.target.username.value){e.next=5;break}return k.componentsSetError(this,"Please input your username."),e.abrupt("return");case 5:return e.prev=5,e.next=8,E.forgotPassword(r);case 8:n=e.sent,k.setStatePromise(this,{error:"",username:r,destination:n,screen:g.RECOVERY_PASSWORD}),e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(5),e.next=16,k.componentSetError(this,e.t0.message);case 16:case"end":return e.stop()}}),e,this,[[5,12]])})));return function(t){return e.apply(this,arguments)}}()},{key:"resetPassword",value:function(){var e=Object(m.a)(p.a.mark((function e(t){var r,n,a,s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),r=t.target,n=r.code.value,a=r.password.value,s=r.confirmPassword.value,n&&a&&s){e.next=8;break}return k.componentSetError(this,"Please fill out all of the fields."),e.abrupt("return");case 8:return e.next=10,x.checkPasswords(this,a,s);case 10:if(e.sent){e.next=13;break}return e.abrupt("return");case 13:return e.prev=13,e.next=16,E.resetPassword(this.state.username,n,a);case 16:return e.next=18,k.setStatePromise(this,{error:"",success:"",screen:g.RECOVERY_SUCCESS});case 18:e.next=24;break;case 20:return e.prev=20,e.t0=e.catch(13),e.next=24,k.componentSetError(this,e.t0.message);case 24:case"end":return e.stop()}}),e,this,[[13,20]])})));return function(t){return e.apply(this,arguments)}}()},{key:"resendVerificationEmail",value:function(){var e=Object(m.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E.forgotPassword(this.state.username);case 3:return e.next=5,k.componentSetSuccess(this,"Another email has been sent!");case 5:e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(0),e.next=11,k.componentSetError(this,e.t0.message);case 11:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e,t=a.a.createElement("div",{className:"Register-form Module-popup"},this.state.error&&a.a.createElement("h2",null,this.state.error),a.a.createElement("h2",null,"Login to your account!"),a.a.createElement("form",{className:"Askd-form",onSubmit:this.login},a.a.createElement("label",{htmlFor:"login-username"},"Username or email"),a.a.createElement("input",{autoComplete:"off",type:"text",name:"username",key:"login-username",id:"login-username"}),a.a.createElement("label",{htmlFor:"login-password"},"Password"),a.a.createElement("input",{autoComplete:"off",type:"password",name:"password",key:"login-password",id:"login-password"}),a.a.createElement("button",{type:"button",onClick:this.enablePasswordRecovery,className:"Askd-form-link Askd-form-link-bottom"},"Forgot your password?"),a.a.createElement("input",{className:"Askd-button",type:"submit",value:"Login"}))),r=a.a.createElement("div",{className:"Register-form Module-popup"},this.state.error&&a.a.createElement("h2",null,this.state.error),a.a.createElement("h2",null,"Reset your password"),a.a.createElement("p",null,"Please provide your username or email, so that you can reset your password via an emailed confirmation code."),a.a.createElement("form",{className:"Askd-form",onSubmit:this.forgotPassword},a.a.createElement("label",{htmlFor:"reset-username"},"Username or email"),a.a.createElement("input",{autoComplete:"off",type:"text",name:"username",key:"reset-username",id:"reset-username"}),a.a.createElement("input",{className:"Askd-button",type:"submit",value:"Submit"}))),n=a.a.createElement("div",{className:"Register-form Module-popup"},this.state.error&&a.a.createElement("h2",null,this.state.error),this.state.success&&a.a.createElement("h2",null,this.state.success),a.a.createElement("h2",null,"Reset your password"),a.a.createElement("p",null,"You should've received an email at ",this.state.destination," with a verification code."),a.a.createElement("form",{className:"Askd-form",onSubmit:this.resetPassword},a.a.createElement("label",{htmlFor:"reset-code"},"Code"),a.a.createElement("input",{autoComplete:"off",type:"text",name:"code",key:"reset-code",id:"reset-code"}),a.a.createElement("label",{htmlFor:"reset-password"},"Password"),a.a.createElement("input",{autoComplete:"off",type:"password",name:"password",key:"reset-password",id:"reset-password"}),a.a.createElement("label",{htmlFor:"reset-confirm-password"},"Confirm password"),a.a.createElement("input",{autoComplete:"off",type:"password",name:"confirmPassword",key:"reset-confirm-password",id:"reset-confirm-password"}),a.a.createElement("button",{type:"button",onClick:this.resendVerificationEmail,className:"Askd-form-link Askd-form-link-bottom"},"Didn't get the email? Click here to resend"),a.a.createElement("input",{className:"Askd-button",type:"submit",value:"Submit"}))),s=a.a.createElement("div",{className:"Register-form Module-popup"},a.a.createElement("h2",null,"Password reset success!"),a.a.createElement("p",null,"Your password has been reset successfully. You'll now be able to login again."));switch(this.state.screen){case g.LOGIN:e=t;break;case g.RECOVERY_USERNAME:e=r;break;case g.RECOVERY_PASSWORD:e=n;break;case g.RECOVERY_SUCCESS:e=s}return a.a.createElement("div",{className:"Module-blocker"},a.a.createElement("button",{onClick:this.close,className:"Askd-form-close Askd-button Askd-button-circular"},"X"),e)}}]),r}(n.Component),j=(r(144),function(e){Object(b.a)(r,e);var t=Object(v.a)(r);function r(e){var n;return Object(f.a)(this,r),(n=t.call(this,e)).logout=n.logout.bind(Object(d.a)(n)),n}return Object(h.a)(r,[{key:"logout",value:function(){var e=Object(m.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.logout();case 2:return e.next=4,this.props.logoutCallback();case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return a.a.createElement("div",{className:"User-menu"},a.a.createElement("ol",null,a.a.createElement("li",null,a.a.createElement(i.b,{className:"Header-menu-button",onClick:this.props.closeCallback,to:"/users/".concat(this.props.username)},"Your profile")),a.a.createElement("div",{className:"User-menu-divider"}),a.a.createElement("li",{className:"User-menu-not-link"},a.a.createElement("button",{className:"Header-menu-button"},"Settings")),a.a.createElement("li",{className:"User-menu-not-link"},a.a.createElement("button",{className:"Header-menu-button",onClick:this.logout},"Logout"))))}}]),r}(n.Component)),S=function(e){Object(b.a)(r,e);var t=Object(v.a)(r);function r(e){var n;return Object(f.a)(this,r),(n=t.call(this,e)).state={username:null,showRegisterForm:!1,showLoginForm:!1,showUserMenu:!1,unverifiedAccountUsername:null,unverifiedAccountDestination:null},n.refreshUsername=n.refreshUsername.bind(Object(d.a)(n)),n.toggleRegisterForm=n.toggleRegisterForm.bind(Object(d.a)(n)),n.toggleLoginForm=n.toggleLoginForm.bind(Object(d.a)(n)),n.toggleUserMenu=n.toggleUserMenu.bind(Object(d.a)(n)),n.hideUserMenu=n.hideUserMenu.bind(Object(d.a)(n)),n.afterLogin=n.afterLogin.bind(Object(d.a)(n)),n.unverifiedAccount=n.unverifiedAccount.bind(Object(d.a)(n)),n}return Object(h.a)(r,[{key:"refreshUsername",value:function(){var e=Object(m.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.getUsername();case 2:return t=e.sent,e.next=5,k.setStatePromise(this,{username:t,showUserMenu:!1,unverifiedAccountUsername:null});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=Object(m.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.refreshUsername();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toggleRegisterForm",value:function(){var e=Object(m.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.state.showRegisterForm){e.next=3;break}return e.next=3,k.setStatePromise(this,{unverifiedAccountUsername:null,unverifiedAccountDestination:null});case 3:return e.next=5,k.setStatePromise(this,{showRegisterForm:!this.state.showRegisterForm});case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"toggleLoginForm",value:function(){var e=Object(m.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.setStatePromise(this,{showLoginForm:!this.state.showLoginForm});case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"toggleUserMenu",value:function(){var e=Object(m.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.setStatePromise(this,{showUserMenu:!this.state.showUserMenu});case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"hideUserMenu",value:function(){var e=Object(m.a)(p.a.mark((function e(t){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=t.relatedTarget)||!r.classList.contains("Header-menu-button")){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,k.setStatePromise(this,{showUserMenu:!1});case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"afterLogin",value:function(){var e=Object(m.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.toggleLoginForm();case 2:if(!t){e.next=5;break}return e.next=5,this.refreshUsername();case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"unverifiedAccount",value:function(){var e=Object(m.a)(p.a.mark((function e(t,r){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.setStatePromise(this,{showLoginForm:!1,showRegisterForm:!0,unverifiedAccountUsername:t,unverifiedAccountDestination:r});case 2:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=a.a.createElement("div",{className:"Header-top-right"},a.a.createElement("button",{className:"Header-menu-button",onClick:this.toggleLoginForm},"Login"),a.a.createElement("span",{className:"Header-divider"}),a.a.createElement("button",{className:"Header-menu-button",onClick:this.toggleRegisterForm},"Create an account")),t=a.a.createElement("div",{className:"Header-logged-in",tabIndex:"-1",onBlur:this.hideUserMenu},a.a.createElement("div",{className:"Header-top-right"},a.a.createElement("button",{className:"Header-menu-button",onClick:this.toggleUserMenu},this.state.username)),a.a.createElement("div",{className:"Header-user-menu"},this.state.showUserMenu&&a.a.createElement(j,{username:this.state.username,closeCallback:this.toggleUserMenu,logoutCallback:this.refreshUsername}))),r=this.state.username?t:e;return a.a.createElement(a.a.Fragment,null,this.state.showRegisterForm&&a.a.createElement(w,{exitCallback:this.toggleRegisterForm,unverifiedAccountUsername:this.state.unverifiedAccountUsername,unverifiedAccountDestination:this.state.unverifiedAccountDestination}),this.state.showLoginForm&&a.a.createElement(O,{exitCallback:this.afterLogin,emailVerificationCallback:this.unverifiedAccount}),r)}}]),r}(n.Component);r(149);var P=function(){var e=Object(u.f)().pathname,t="/"===e||"/home"===e,r=t?"Header":"Header-small";return a.a.createElement("div",{className:r},t&&a.a.createElement("h1",null,"cp-notes beta"),a.a.createElement("ul",null,a.a.createElement("li",null,a.a.createElement(i.b,{to:"/home"},"Home"))),a.a.createElement(S,null),a.a.createElement("span",{className:"Header-bottom"}))},C=(r(150),function(e){Object(b.a)(r,e);var t=Object(v.a)(r);function r(){return Object(f.a)(this,r),t.apply(this,arguments)}return Object(h.a)(r,[{key:"componentDidMount",value:function(){var e=Object(m.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.renderMathJax();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return a.a.createElement("div",{className:"Module-wrapper"},a.a.createElement("div",{className:"Module-description Module-description-centered"},a.a.createElement("p",null,"A work-in-progress web application for storing publicly accessible competitive programming notes! \\[\\LaTeX\\]")))}}]),r}(n.Component));var N=function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement(C,null))};var A=function(e){var t=e.info;return a.a.createElement(a.a.Fragment,null,a.a.createElement("h2",{className:"Module-heading"},t.username),t.email&&a.a.createElement("p",null,"Email: ",t.email," (only visible to you)"))},I=r(28),R=(r(151),function(e){Object(b.a)(r,e);var t=Object(v.a)(r);function r(e){var n;return Object(f.a)(this,r),(n=t.call(this,e)).state={loading:!1,searchTerm:"",previousValidSearchTerm:"",showOptions:!1,options:[],filteredOptions:[]},n.handleChange=n.handleChange.bind(Object(d.a)(n)),n.handleBlur=n.handleBlur.bind(Object(d.a)(n)),n.handleFocus=n.handleFocus.bind(Object(d.a)(n)),n.handleOptionSelect=n.handleOptionSelect.bind(Object(d.a)(n)),n}return Object(h.a)(r,[{key:"getOptionString",value:function(e){var t,r=[],n=Object(I.a)(this.props.keys);try{for(n.s();!(t=n.n()).done;){var a=t.value;r.push(e[a])}}catch(s){n.e(s)}finally{n.f()}return r.join(" - ")}},{key:"filterOptions",value:function(){var e=Object(m.a)(p.a.mark((function e(){var t,r,n,a,s,o,c,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[],r=this.state.searchTerm.toLowerCase(),n=Object(I.a)(this.state.options),e.prev=3,n.s();case 5:if((a=n.n()).done){e.next=33;break}if(s=a.value,10!==t.length){e.next=9;break}return e.abrupt("break",33);case 9:if(!this.getOptionString(s).toLowerCase().includes(r)){e.next=13;break}return t.push(s),e.abrupt("continue",31);case 13:o=Object(I.a)(this.props.keys),e.prev=14,o.s();case 16:if((c=o.n()).done){e.next=23;break}if(i=c.value,!s[i].toLowerCase().includes(r)){e.next=21;break}return t.push(s),e.abrupt("break",23);case 21:e.next=16;break;case 23:e.next=28;break;case 25:e.prev=25,e.t0=e.catch(14),o.e(e.t0);case 28:return e.prev=28,o.f(),e.finish(28);case 31:e.next=5;break;case 33:e.next=38;break;case 35:e.prev=35,e.t1=e.catch(3),n.e(e.t1);case 38:return e.prev=38,n.f(),e.finish(38);case 41:return e.next=43,k.setStatePromise(this,{filteredOptions:t});case 43:case"end":return e.stop()}}),e,this,[[3,35,38,41],[14,25,28,31]])})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=Object(m.a)(p.a.mark((function e(t){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.staticKey||this.props.staticKey){e.next=4;break}return e.next=3,k.setStatePromise(this,{searchTerm:""});case 3:return e.abrupt("return");case 4:if(this.props.staticKey!==t.staticKey){e.next=6;break}return e.abrupt("return");case 6:return e.next=8,k.setStatePromise(this,{searchTerm:"",loading:!0});case 8:return e.next=10,this.props.search();case 10:return r=e.sent,e.next=13,k.setStatePromise(this,{loading:!1,previousValidSearchTerm:"",options:r,showOptions:!1});case 13:return e.next=15,this.filterOptions();case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleChange",value:function(){var e=Object(m.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.setStatePromise(this,{searchTerm:t.target.value});case 2:return e.next=4,this.filterOptions();case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleBlur",value:function(){var e=Object(m.a)(p.a.mark((function e(t){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=t.relatedTarget)||r.id!=="Select-options-".concat(this.props.name)){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,k.setStatePromise(this,{showOptions:!1,searchTerm:this.state.previousValidSearchTerm});case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleFocus",value:function(){var e=Object(m.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.setStatePromise(this,{showOptions:!0});case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleOptionSelect",value:function(){var e=Object(m.a)(p.a.mark((function e(t,r){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.setStatePromise(this,{searchTerm:r,previousValidSearchTerm:r,showOptions:!1});case 2:return e.next=4,this.filterOptions();case 4:this.props.callback(t);case 5:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e,t=this,r=[],n=Object(I.a)(this.state.filteredOptions);try{var s=function(){var n=e.value,s=t.getOptionString(n),o=n[t.props.displayKey],c=n.sk;r.push(a.a.createElement("li",{onClick:function(){return t.handleOptionSelect(c,o)},key:c},s))};for(n.s();!(e=n.n()).done;)s()}catch(o){n.e(o)}finally{n.f()}return a.a.createElement("div",{onBlur:this.handleBlur,className:"Search-select"},a.a.createElement("input",{className:this.state.loading?"Askd-form-loading":"",onChange:this.handleChange,autoComplete:"off",type:"text",value:this.state.searchTerm,onFocus:this.handleFocus,name:this.props.name,id:this.props.id,disabled:!this.props.search||this.state.loading}),r.length>0&&this.state.showOptions&&a.a.createElement("ol",{id:"Select-options-".concat(this.props.name),tabIndex:"-1",className:"Search-select-options"},r))}}]),r}(n.Component)),F=r(103),U=r.n(F),T=Object.freeze({API_ENDPOINT:"https://qqmeusmrfk.execute-api.us-east-1.amazonaws.com/prod/"}),D=function(){function e(){Object(f.a)(this,e)}return Object(h.a)(e,null,[{key:"createApiError",value:function(e,t){var r=Error(t);return r.name=e,r}},{key:"manageResponseError",value:function(){var t=Object(m.a)(p.a.mark((function t(r){var n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(400!==r.status){t.next=7;break}return t.next=3,r.json();case 3:throw n=t.sent,e.createApiError(n.name,n.message);case 7:if(200===r.status){t.next=9;break}throw Error("Request failed!");case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},{key:"getJson",value:function(){var t=Object(m.a)(p.a.mark((function t(r,n){var a,s,o;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a="".concat(r,"?").concat(U.a.stringify(n)),t.next=3,E.getAccessToken();case 3:return s=t.sent,t.next=6,fetch(T.API_ENDPOINT+a,{headers:{Authorization:s}});case 6:return o=t.sent,t.next=9,e.manageResponseError(o);case 9:return t.next=11,o.json();case 11:return t.abrupt("return",t.sent);case 12:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}()},{key:"postJson",value:function(){var t=Object(m.a)(p.a.mark((function t(r,n){var a,s;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,E.getAccessToken();case 2:return a=t.sent,t.next=5,fetch(T.API_ENDPOINT+r,{method:"POST",body:JSON.stringify(n),headers:{Authorization:a}});case 5:return s=t.sent,t.next=8,e.manageResponseError(s);case 8:return t.next=10,s.json();case 10:return t.abrupt("return",t.sent);case 11:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}()}]),e}(),M=function(){function e(){Object(f.a)(this,e)}return Object(h.a)(e,null,[{key:"_prettifyProblems",value:function(e){for(var t=0;t<e.length;t++)e[t].prettySk=e[t].sk.replaceAll("#","")}},{key:"getContests",value:function(){var e=Object(m.a)(p.a.mark((function e(t){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={platform:t},e.next=3,D.getJson("contests",r);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getProblems",value:function(){var t=Object(m.a)(p.a.mark((function t(r,n){var a,s;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a={platform:r,contestId:n},t.next=3,D.getJson("problems",a);case 3:return s=t.sent,e._prettifyProblems(s),t.abrupt("return",s);case 6:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}()},{key:"getProblemInfo",value:function(){var e=Object(m.a)(p.a.mark((function e(t,r){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={platform:t,problemId:r},e.next=3,D.getJson("problems",n);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()}]),e}(),L=(r(164),function(e){Object(b.a)(r,e);var t=Object(v.a)(r);function r(e){var n;return Object(f.a)(this,r),(n=t.call(this,e)).state={error:"",platform:null,contestSortKey:null,problemSortKey:null,skipContestSearch:!1},n.close=n.close.bind(Object(d.a)(n)),n.handlePlatformChange=n.handlePlatformChange.bind(Object(d.a)(n)),n.toggleSkipContestSearch=n.toggleSkipContestSearch.bind(Object(d.a)(n)),n.updateProblemSortKey=n.updateProblemSortKey.bind(Object(d.a)(n)),n.updateContestSortKey=n.updateContestSortKey.bind(Object(d.a)(n)),n.addProblem=n.addProblem.bind(Object(d.a)(n)),n}return Object(h.a)(r,[{key:"close",value:function(){this.props.callback(null,null,null)}},{key:"handlePlatformChange",value:function(){var e=Object(m.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.setStatePromise(this,{platform:t.target.value});case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"toggleSkipContestSearch",value:function(){var e=Object(m.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.setStatePromise(this,{skipContestSearch:!this.state.skipContestSearch,contestSortKey:null,problemSortKey:null});case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateContestSortKey",value:function(){var e=Object(m.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.setStatePromise(this,{contestSortKey:t,problemSortKey:null});case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateProblemSortKey",value:function(){var e=Object(m.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.setStatePromise(this,{problemSortKey:t});case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addProblem",value:function(){var e=Object(m.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),this.state.problemSortKey){e.next=5;break}return e.next=4,k.componentSetError(this,"Please search and select a problem.");case 4:return e.abrupt("return");case 5:this.props.callback(this.state.problemSortKey,this.state.platform,this);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=null,r=null;this.state.platform&&!this.state.skipContestSearch&&(t=function(){return M.getContests(e.state.platform)},r=this.state.platform);var n=null,s=null;this.state.platform&&this.state.contestSortKey?(n=function(){return M.getProblems(e.state.platform,e.state.contestSortKey)},s=this.state.platform+this.state.contestSortKey):this.state.platform&&this.state.skipContestSearch&&(n=function(){return M.getProblems(e.state.platform)},s=this.state.platform);var o=this.state.skipContestSearch?"Want to filter by contest?":"Want to skip filtering by contest?";return a.a.createElement("div",{className:"Module-blocker"},a.a.createElement("button",{onClick:this.close,className:"Askd-form-close Askd-button Askd-button-circular"},"X"),a.a.createElement("div",{className:"Add-problem-form Module-popup"},this.state.error&&a.a.createElement("h2",null,this.state.error),a.a.createElement("h2",null,"Add a problem!"),a.a.createElement("form",{className:"Askd-form",onSubmit:this.addProblem},a.a.createElement("label",{htmlFor:"cp-platform"},"Platform"),a.a.createElement("select",{defaultValue:"",onChange:this.handlePlatformChange,name:"platform",id:"cp-platform"},a.a.createElement("option",{disabled:!0,value:""}),a.a.createElement("option",{value:"CodeForces"},"CodeForces"),a.a.createElement("option",{value:"CodeChef"},"CodeChef")),a.a.createElement("label",{htmlFor:"cp-contest"},"Contest"),a.a.createElement(R,{name:"contest",id:"cp-contest",search:t,keys:["sk","name"],callback:this.updateContestSortKey,displayKey:"name",staticKey:r}),a.a.createElement("button",{onClick:this.toggleSkipContestSearch,type:"button",className:"Askd-form-link Askd-form-link-separator"},o),a.a.createElement("label",{htmlFor:"cp-title"},"Problem"),a.a.createElement(R,{name:"title",id:"cp-title",search:n,keys:["prettySk","name"],callback:this.updateProblemSortKey,displayKey:"name",staticKey:s}),a.a.createElement("input",{className:"Askd-button Module-popup-last",type:"submit",value:"Add Problem"}))))}}]),r}(n.Component)),V=function(){function e(){Object(f.a)(this,e)}return Object(h.a)(e,null,[{key:"addNote",value:function(){var e=Object(m.a)(p.a.mark((function e(t,r,n){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={username:t,platform:r,problemId:n},e.next=3,D.postJson("notes",a);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}()}]),e}(),K=function(e){Object(b.a)(r,e);var t=Object(v.a)(r);function r(e){var n;return Object(f.a)(this,r),(n=t.call(this,e)).state={showAddProblemForm:!1},n.toggleAddProblemForm=n.toggleAddProblemForm.bind(Object(d.a)(n)),n.addProblem=n.addProblem.bind(Object(d.a)(n)),n}return Object(h.a)(r,[{key:"toggleAddProblemForm",value:function(){var e=Object(m.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:k.setStatePromise(this,{showAddProblemForm:!this.state.showAddProblemForm});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addProblem",value:function(){var e=Object(m.a)(p.a.mark((function e(t,r,n){var a,s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=4;break}return e.next=3,this.toggleAddProblemForm();case 3:return e.abrupt("return");case 4:return e.prev=4,a=this.props.info.username,e.next=8,V.addNote(a,r,t);case 8:s=t.replace("#","/"),this.props.history.push("/notes/edit/".concat(r,"/").concat(s)),e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(4),e.next=16,k.componentSetError(n,e.t0.message);case 16:case"end":return e.stop()}}),e,this,[[4,12]])})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"render",value:function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement("h2",{className:"Module-heading"},"Problems"),this.state.showAddProblemForm&&a.a.createElement(L,{callback:this.addProblem}),a.a.createElement("div",{className:"Cp-notes Module-space"},a.a.createElement("p",null,"There's nothing to see here yet!"),this.props.info.email&&a.a.createElement("button",{onClick:this.toggleAddProblemForm,className:"Cp-notes-add Askd-button Askd-button-circular"},"+")))}}]),r}(n.Component),_=function(){function e(){Object(f.a)(this,e)}return Object(h.a)(e,null,[{key:"getUserInfo",value:function(){var e=Object(m.a)(p.a.mark((function e(t){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={username:t},e.next=3,D.getJson("profile",r);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),G=Object.freeze({LOADING:0,DONE:1,NOT_FOUND:2}),Y=function(e){Object(b.a)(r,e);var t=Object(v.a)(r);function r(e){var n;return Object(f.a)(this,r),(n=t.call(this,e)).state={screen:G.LOADING,info:null},n}return Object(h.a)(r,[{key:"loadUserInfo",value:function(){var e=Object(m.a)(p.a.mark((function e(){var t,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=this.props.match.params.username,e.next=4,_.getUserInfo(t);case 4:return r=e.sent,e.next=7,k.setStatePromise(this,{screen:G.DONE,info:r});case 7:e.next=14;break;case 9:if(e.prev=9,e.t0=e.catch(0),"UserNotFound"!==e.t0.name){e.next=14;break}return e.next=14,k.setStatePromise(this,{screen:G.NOT_FOUND});case 14:case"end":return e.stop()}}),e,this,[[0,9]])})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=Object(m.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadUserInfo();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=Object(m.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.match.params.username===this.props.match.params.username){e.next=5;break}return e.next=3,k.setStatePromise(this,{screen:G.LOADING,info:null});case 3:return e.next=5,this.loadUserInfo();case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e,t=a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"Module-description"},a.a.createElement(A,{info:this.state.info})),a.a.createElement(K,{info:this.state.info,history:this.props.history})),r=a.a.createElement("div",{className:"Module-description"},a.a.createElement("h2",null,"User not found!"));switch(this.state.screen){case G.LOADING:e=null;break;case G.DONE:e=t;break;case G.NOT_FOUND:e=r}return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"Module-wrapper"},e))}}]),r}(n.Component),H=Object.freeze({LOADING:0,DONE:1,NOT_FOUND:2}),B=r(49);var J=function(){function e(t){Object(f.a)(this,e),this.id=t}return Object(h.a)(e,[{key:"getInfo",value:function(){var e,t,r,n,a=window.getSelection(),s=a.anchorNode.parentElement,o=a.focusNode.parentElement,c=Number(s.getAttribute("index")),i=Number(o.getAttribute("index")),u=a.anchorOffset,l=a.focusOffset;if(c===i&&u===l)return{rangeSelect:!1,index:c,position:u};if(t=u,n=l,!((e=c)===(r=i)?t<n:e<r)){var p=[i,c];c=p[0],i=p[1];var m=[l,u];u=m[0],l=m[1]}return{rangeSelect:!0,leftIndex:c,leftPosition:u,rightIndex:i,rightPosition:l}}},{key:"updatePosition",value:function(e,t){var r=document.getElementById(this.id+e),n=r.childNodes[0];n||(n=document.createTextNode(""),r.appendChild(n));var a=document.createRange();a.setStart(n,t),a.collapse(!0);var s=window.getSelection();s.removeAllRanges(),s.addRange(a)}}]),e}();function W(e){var t,r=0,n=Object(I.a)(e);try{for(n.s();!(t=n.n()).done;){var a=t.value;Number(a),r++}}catch(s){n.e(s)}finally{n.f()}return r}var z=function(){function e(){Object(f.a)(this,e),this.characters=[],this.globalCaretPosition=0,this.updateBlocks()}return Object(h.a)(e,[{key:"getVirtualCaretIndex",value:function(){for(var e=0,t=0;t<this.blocks.length;t++){var r=W(this.blocks[t].c),n=e+r;if(this.globalCaretPosition<=n)for(var a=0,s=e;s<=n;s++){if(this.globalCaretPosition===s)return[t,a];a+=this.characters[s].c.length}e+=r}return[null,null]}},{key:"getGlobalCaretIndex",value:function(e,t){for(var r=this.blockStarts[e],n=0;n<t;)n+=this.characters[r].c.length,r++;return n===t?r:r-1}},{key:"insert",value:function(e,t,r,n){var a,s=this.getGlobalCaretIndex(e,t),o=n||this.blocks[e].m,c=this.characters.splice(s),i=Object(I.a)(r);try{for(i.s();!(a=i.n()).done;){var u=a.value;this.characters.push({m:o,c:u})}}catch(f){i.e(f)}finally{i.f()}this.globalCaretPosition=this.characters.length;var l,p=Object(I.a)(c);try{for(p.s();!(l=p.n()).done;){var m=l.value;this.characters.push(m)}}catch(f){p.e(f)}finally{p.f()}return this.updateBlocks(),this.getVirtualCaretIndex()}},{key:"delete",value:function(e,t,r,n){var a=this.getGlobalCaretIndex(e,t),s=this.getGlobalCaretIndex(r,n)-a;return a<0?[0,0]:(this.characters.splice(a,s),this.globalCaretPosition=a,this.updateBlocks(),this.getVirtualCaretIndex())}},{key:"updateBlocks",value:function(){var e=this;if(0===this.characters.length)return this.blocks=[{m:0,c:""}],void(this.blockStarts=[0]);this.blocks=[],this.blockStarts=[];var t=this.characters[0].m,r="",n=0;this.characters.forEach((function(a,s){a.m!==t?(e.blocks.push({m:t,c:r}),e.blockStarts.push(s-n),t=a.m,r=a.c,n=1):(r+=a.c,n++)})),this.blocks.push({m:t,c:r}),this.blockStarts.push(this.characters.length-n)}},{key:"getContent",value:function(){return this.blocks}}]),e}(),q=(r(165),function(e){Object(b.a)(r,e);var t=Object(v.a)(r);function r(e){var n;return Object(f.a)(this,r),(n=t.call(this,e)).id="Askd-text-editor".concat(n.props.uniqueKey),n.virtualTextEditor=new z,n.caret=new J(n.id),n.composing=!1,n.compositionIndex=null,n.compositionPosition=null,n.state={content:n.virtualTextEditor.getContent()},n}return Object(h.a)(r,[{key:"delete",value:function(){var e=Object(m.a)(p.a.mark((function e(){var t,r,n,a,s,o,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=this.caret.getInfo()).rangeSelect?(o=this.virtualTextEditor.delete(t.leftIndex,t.leftPosition,t.rightIndex,t.rightPosition),c=Object(B.a)(o,2),r=c[0],n=c[1]):(a=this.virtualTextEditor.delete(t.index,t.position-1,t.index,t.position),s=Object(B.a)(a,2),r=s[0],n=s[1]),e.next=4,this.updateText();case 4:this.caret.updatePosition(r,n);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"insert",value:function(){var e=Object(m.a)(p.a.mark((function e(t){var r,n,a,s,o;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.caret.getInfo(),n=this.virtualTextEditor.insert(r.index,r.position,t),a=Object(B.a)(n,2),s=a[0],o=a[1],e.next=4,this.updateText();case 4:this.caret.updatePosition(s,o);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"compositionInsert",value:function(){var e=Object(m.a)(p.a.mark((function e(t){var r,n,a,s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.virtualTextEditor.insert(this.compositionIndex,this.compositionPosition,t),n=Object(B.a)(r,2),a=n[0],s=n[1],e.next=3,this.updateText();case 3:this.caret.updatePosition(a,s);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateText",value:function(){var e=Object(m.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.textEditor.childNodes[0].nodeType===Node.TEXT_NODE&&this.textEditor.removeChild(this.textEditor.childNodes[0]),e.next=3,k.setStatePromise(this,{content:this.virtualTextEditor.getContent()});case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=this;this.textEditor=document.getElementById(this.id),this.textEditor.addEventListener("keypress",function(){var t=Object(m.a)(p.a.mark((function t(r){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("Enter"!==r.key&&!e.composing){t.next=4;break}return r.preventDefault(),t.abrupt("return");case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),this.textEditor.addEventListener("beforeinput",function(){var t=Object(m.a)(p.a.mark((function t(r){var n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!r.isComposing){t.next=2;break}return t.abrupt("return");case 2:if(r.preventDefault(),"deleteContentBackward"!==r.inputType){t.next=8;break}return t.next=6,e.delete();case 6:t.next=19;break;case 8:if(n=r.data,e.caret.getInfo().rangeSelect){t.next=15;break}return t.next=13,e.insert(n);case 13:t.next=19;break;case 15:return t.next=17,e.delete();case 17:return t.next=19,e.insert(n);case 19:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),this.textEditor.addEventListener("compositionstart",function(){var t=Object(m.a)(p.a.mark((function t(r){var n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n=e.caret.getInfo()).rangeSelect){t.next=5;break}return t.next=4,e.delete();case 4:n=e.caret.getInfo();case 5:e.composing=!0,e.compositionIndex=n.index,e.compositionPosition=n.position;case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),this.textEditor.addEventListener("compositionend",function(){var t=Object(m.a)(p.a.mark((function t(r){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.composing=!1,t.next=3,e.compositionInsert(r.data);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"render",value:function(){var e=this,t=[];return this.state.content.forEach((function(r,n){t.push(a.a.createElement("div",{id:e.id+n,key:n,index:n},r.c))})),a.a.createElement("div",{className:"Askd-text-editor"},a.a.createElement("div",{className:"Askd-text-editor-toolbar"},a.a.createElement("ul",null,a.a.createElement("li",null,a.a.createElement("button",{type:"button"},"Bold")))),a.a.createElement("div",{className:"Askd-text-editor-text",id:this.id,tabIndex:"0",contentEditable:"true",suppressContentEditableWarning:!0,spellCheck:"false"},t))}}]),r}(n.Component)),X=function(e){Object(b.a)(r,e);var t=Object(v.a)(r);function r(){return Object(f.a)(this,r),t.apply(this,arguments)}return Object(h.a)(r,[{key:"render",value:function(){return a.a.createElement("form",{className:"Askd-form"},a.a.createElement("label",{htmlFor:"notes"},"Notes"),a.a.createElement(q,null))}}]),r}(n.Component),Q=function(e){Object(b.a)(r,e);var t=Object(v.a)(r);function r(){return Object(f.a)(this,r),t.apply(this,arguments)}return Object(h.a)(r,[{key:"render",value:function(){var e=this.props.info;return a.a.createElement("div",{className:"Edit-note-problem-info"},e&&a.a.createElement("div",{className:"Module-info-box"},a.a.createElement("h4",null,this.props.platform," ",e.problemCode," - ",e.problemName),a.a.createElement("p",{className:"Edit-note-contest"},e.contestName),a.a.createElement("a",{className:"Askd-form-link",href:e.link},"Problem link")))}}]),r}(n.Component),Z=(r(166),function(e){Object(b.a)(r,e);var t=Object(v.a)(r);function r(e){var n;return Object(f.a)(this,r),(n=t.call(this,e)).state={screen:H.LOADING,problemInfo:null},n}return Object(h.a)(r,[{key:"loadProblemInfo",value:function(){var e=Object(m.a)(p.a.mark((function e(){var t,r,n,a,s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.match.params.platform,r=this.props.match.params.contestId,n=this.props.match.params.problemCode,a="".concat(r,"#").concat(n),e.next=6,M.getProblemInfo(t,a);case 6:return s=e.sent,e.next=9,k.setStatePromise(this,{problemInfo:s});case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadInfo",value:function(){var e=Object(m.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadProblemInfo();case 2:return e.next=4,k.setStatePromise(this,{screen:H.DONE});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=Object(m.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadProblemInfo();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return a.a.createElement("div",{className:"Module-wrapper"},a.a.createElement(Q,{info:this.state.problemInfo,platform:this.props.match.params.platform}),a.a.createElement(X,null))}}]),r}(n.Component));r(167),r(168),r(169);var $=function(){return a.a.createElement(i.a,null,a.a.createElement("div",{className:"App"},a.a.createElement(P,null),a.a.createElement(u.c,null,a.a.createElement(u.a,{exact:!0,path:"/",component:N}),a.a.createElement(u.a,{exact:!0,path:"/home",component:N}),a.a.createElement(u.a,{exact:!0,path:"/users/:username",component:Y}),a.a.createElement(u.a,{exact:!0,path:"/notes/edit/:platform/:contestId/:problemCode",component:Z}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ee=r(104);c.default.configure(ee),document.body.addEventListener("mousedown",(function(e){document.body.classList.add("Global-mouse-click")})),document.body.addEventListener("keydown",(function(e){9===e.keyCode&&document.body.classList.remove("Global-mouse-click")})),o.a.render(a.a.createElement($,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[115,1,2]]]);
//# sourceMappingURL=main.e0bec82e.chunk.js.map